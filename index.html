<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoFit PayCalc - 네오핏 급여 계산기</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Firebase SDK 추가 -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <style>
        * {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield;
        }

        .glow-green {
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.4), 0 0 60px rgba(0, 255, 136, 0.2);
        }

        .hover-glow:hover {
            box-shadow: 0 0 25px rgba(0, 255, 136, 0.5);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }


        .gradient-border {
            position: relative;
            background: transparent;
            border: 1px solid #00FF88;
            border-radius: 1.5rem;
        }

        .gradient-border > div {
            background: transparent;
            padding: 2rem;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1f2937;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #00FF88, #00C66E);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #00FF88, #00FF88);
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(31, 41, 55, 0.5);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 136, 0.5);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 136, 0.8);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        .fixed {
            position: fixed;
        }
        
        .inset-0 {
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
        
        .z-50 {
            z-index: 50;
        }

        /* Tailwind-like utility classes */
        .min-h-screen { min-height: 100vh; }
        .bg-gradient-to-br { 
            background: #0a0e1a;
            background-attachment: fixed;
        }
        .text-gray-100 { color: #f3f4f6; }
        .text-gray-400 { color: #9ca3af; }
        .text-gray-300 { color: #d1d5db; }
        .text-gray-500 { color: #6b7280; }
        .text-white { color: #ffffff; }
        .text-pink-400 { color: #f472b6; }
        .text-green-400 { color: #4ade80; }
        .text-red-400 { color: #f87171; }
        .text-red-300 { color: #fca5a5; }
        .p-4 { padding: 1rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-5 { padding: 1.25rem; }
        .p-6 { padding: 1.5rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mb-10 { margin-bottom: 2.5rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-6 { margin-top: 1.5rem; }
        .ml-3 { margin-left: 0.75rem; }
        .ml-5 { margin-left: 1.25rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .max-w-7xl { max-width: 80rem; }
        .text-center { text-align: center; }
        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-base { font-size: 1rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-5xl { font-size: 3rem; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-black { font-weight: 900; }
        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-2xl { border-radius: 1rem; }
        .rounded-full { border-radius: 9999px; }
        .flex { display: flex; }
        .grid { display: grid; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .flex-col { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-1 { flex: 1 1 0%; }
        .w-full { width: 100%; }
        .max-h-40 { max-height: 10rem; }
        .overflow-y-auto { overflow-y: auto; }
        .overflow-x-hidden { overflow-x: hidden; }
        .bg-gray-800 { background-color: rgba(31, 41, 55, 0.7); }
        .bg-gray-700 { background-color: rgba(55, 65, 81, 0.7); }
        .bg-gray-800\/50 { background-color: rgba(31, 41, 55, 0.5); }
        .bg-green-500\/20 { background-color: rgba(34, 197, 94, 0.2); }
        .bg-blue-500\/20 { background-color: rgba(59, 130, 246, 0.2); }
        .bg-pink-500\/20 { background-color: rgba(236, 72, 153, 0.2); }
        .bg-red-500\/10 { background-color: rgba(239, 68, 68, 0.1); }
        .bg-red-500\/20 { background-color: rgba(239, 68, 68, 0.2); }
        .bg-gradient-to-r { background: linear-gradient(to right, var(--tw-gradient-stops)); }
        .from-green-500 { --tw-gradient-from: #22c55e; }
        .from-green-600 { --tw-gradient-from: #16a34a; }
        .from-green-700 { --tw-gradient-from: #15803d; }
        .from-blue-600 { --tw-gradient-from: #2563eb; }
        .from-blue-700 { --tw-gradient-from: #1d4ed8; }
        .from-orange-600 { --tw-gradient-from: #ea580c; }
        .from-orange-700 { --tw-gradient-from: #c2410c; }
        .to-green-600 { --tw-gradient-to: #16a34a; }
        .to-green-700 { --tw-gradient-to: #15803d; }
        .to-blue-700 { --tw-gradient-to: #1d4ed8; }
        .to-orange-700 { --tw-gradient-to: #c2410c; }
        .from-green-500\/10 { --tw-gradient-from: rgba(34, 197, 94, 0.1); }
        .to-blue-500\/10 { --tw-gradient-to: rgba(59, 130, 246, 0.1); }
        .hover\:from-green-500:hover { --tw-gradient-from: #22c55e; }
        .hover\:from-blue-500:hover { --tw-gradient-from: #2563eb; }
        .hover\:from-orange-500:hover { --tw-gradient-from: #f97316; }
        .hover\:to-green-600:hover { --tw-gradient-to: #16a34a; }
        .hover\:to-blue-600:hover { --tw-gradient-to: #2563eb; }
        .hover\:to-orange-600:hover { --tw-gradient-to: #ea580c; }
        .hover\:bg-gray-700:hover { background-color: #374151; }
        .hover\:bg-red-500\/20:hover { background-color: rgba(239, 68, 68, 0.2); }
        .hover\:text-red-300:hover { color: #fca5a5; }
        .hover\:scale-105:hover { transform: scale(1.05); }
        .hover\:scale-\[1\.02\]:hover { transform: scale(1.02); }
        .scale-105 { transform: scale(1.05); }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .transition-transform { transition-property: transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .duration-300 { transition-duration: 300ms; }
        .opacity-30 { opacity: 0.3; }
        .opacity-80 { opacity: 0.8; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .hover\:shadow-xl:hover { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .cursor-default { cursor: default; }
        .cursor-pointer { cursor: pointer; }
        .whitespace-nowrap { white-space: nowrap; }
        .transform { transform: translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)); }
        .rotate-180 { --tw-rotate: 180deg; }
        .block { display: block; }
        .focus\:outline-none:focus { outline: 2px solid transparent; outline-offset: 2px; }
        .focus\:border-green-400:focus { border-color: #4ade80; }
        .focus\:border-orange-400:focus { border-color: #fb923c; }
        .border-pink-500\/30 { border-color: rgba(236, 72, 153, 0.3); }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        @media (min-width: 640px) {
            .sm\:mb-3 { margin-bottom: 0.75rem; }
            .sm\:mb-4 { margin-bottom: 1rem; }
            .sm\:mb-8 { margin-bottom: 2rem; }
            .sm\:mb-10 { margin-bottom: 2.5rem; }
            .sm\:p-3 { padding: 0.75rem; }
            .sm\:p-4 { padding: 1rem; }
            .sm\:p-5 { padding: 1.25rem; }
            .sm\:p-6 { padding: 1.5rem; }
            .sm\:px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
            .sm\:px-8 { padding-left: 2rem; padding-right: 2rem; }
            .sm\:gap-3 { gap: 0.75rem; }
            .sm\:gap-6 { gap: 1.5rem; }
            .sm\:text-sm { font-size: 0.875rem; }
            .sm\:text-base { font-size: 1rem; }
            .sm\:text-lg { font-size: 1.125rem; }
            .sm\:text-2xl { font-size: 1.5rem; }
            .sm\:text-3xl { font-size: 1.875rem; }
            .sm\:text-5xl { font-size: 3rem; }
            .sm\:flex-row { flex-direction: row; }
            .sm\:flex-initial { flex: 0 1 auto; }
            .sm\:w-auto { width: auto; }
        }
        @media (min-width: 768px) {
            .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        }
        @media (min-width: 1024px) {
            .lg\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        }
        select, input {
            background-color: transparent;
            color: #f3f4f6;
        }
        select option {
            background-color: #1f2937;
            color: #f3f4f6;
        }
        button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .max-h-\[650px\] { max-height: 650px; }
        .bg-gradient-to-br.from-gray-800\/50.to-gray-900\/50 {
            background: linear-gradient(to bottom right, rgba(31, 41, 55, 0.5), rgba(17, 24, 39, 0.5));
        }
        .group { position: relative; }
        .group:hover .group-hover\:opacity-100 { opacity: 1; }
        .pointer-events-none { pointer-events: none; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .top-full { top: 100%; }
        .right-0 { right: 0; }
        .mt-2 { margin-top: 0.5rem; }
        .opacity-0 { opacity: 0; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const useState = React.useState;
        const useRef = React.useRef;
        const Calendar = "calendar";
        const DollarSign = "dollar-sign";
        const Check = "check";
        const TrendingUp = "trending-up";
        const Edit = "edit";
        const Plus = "plus";
        const Trash2 = "trash-2";
        const User = "user";
        const Package = "package";
        const CreditCard = "credit-card";

        // Firebase 초기화
        const firebaseConfig = {
            apiKey: "AIzaSyC9Nqji4jQe8po0BFfMo8czGSkXLuI2H3U",
            authDomain: "neofit-paycalc.firebaseapp.com",
            projectId: "neofit-paycalc",
            storageBucket: "neofit-paycalc.firebasestorage.app",
            messagingSenderId: "1072136228278",
            appId: "1:1072136228278:web:5d3be856d357b273900517",
            measurementId: "G-YWWC4R2EP4"
        };

        // Firebase 초기화
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // 인증 서비스
        const authService = {
            loginWithEmail: async (email, password) => {
                try {
                    const result = await auth.signInWithEmailAndPassword(email, password);
                    return { success: true, user: result.user };
                } catch (error) {
                    console.error('Login error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            signUpWithEmail: async (email, password) => {
                try {
                    const result = await auth.createUserWithEmailAndPassword(email, password);
                    return { success: true, user: result.user };
                } catch (error) {
                    console.error('SignUp error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            logout: async () => {
                try {
                    await auth.signOut();
                    return { success: true };
                } catch (error) {
                    console.error('Logout error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            subscribeToAuthChanges: (callback) => {
                return auth.onAuthStateChanged(callback);
            }
        };

        // 매출 서비스
        const salesService = {
            saveSalesData: async (dateKey, data) => {
                try {
                    await db.collection('sales').doc(dateKey).set({
                        ...data,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    return { success: true };
                } catch (error) {
                    console.error('Save error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            subscribeToMonthData: (year, month, callback) => {
                const startDate = `${year}-${String(month + 1).padStart(2, '0')}-01`;
                const endDate = `${year}-${String(month + 1).padStart(2, '0')}-31`;
                
                return db.collection('sales')
                    .where('date', '>=', startDate)
                    .where('date', '<=', endDate)
                    .onSnapshot((snapshot) => {
                        const data = {};
                        snapshot.forEach(doc => {
                            data[doc.id] = doc.data();
                        });
                        callback(data);
                    });
            }
        };

        // 환경 변수 또는 설정
        const CONFIG = {
            ADMIN_PASSWORD: '4405', // 관리자 비밀번호
            INCENTIVE_RATES: {
                full: {
                    60000000: 12,
                    50000000: 10,
                    45000000: 9,
                    40000000: 8,
                    35000000: 7,
                    30000000: 6,
                    25000000: 5,
                    0: 4
                },
                part: {
                    60000000: 6,
                    50000000: 5,
                    45000000: 4.5,
                    40000000: 4,
                    35000000: 3.5,
                    30000000: 3,
                    25000000: 2.5,
                    0: 2
                }
            }
        };

        const NeoFitPayCalc = () => {
            const [salesData, setSalesData] = useState({});
            const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth());
            const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());
            const [approvalPasswords, setApprovalPasswords] = useState({});
            const [editPasswords, setEditPasswords] = useState({});
            const [employeeType, setEmployeeType] = useState('full');
            const [customerName, setCustomerName] = useState({});
            const [selectedProducts, setSelectedProducts] = useState({});
            const [customPrices, setCustomPrices] = useState({});
            const [expandedDays, setExpandedDays] = useState({});
            const [showAddSaleModal, setShowAddSaleModal] = useState(false);
            const [selectedModalDay, setSelectedModalDay] = useState(null);
            const [viewMode, setViewMode] = useState('daily'); // 'daily', 'weekly', 'monthly'
            const dailyViewRef = React.useRef(null);
            const [searchQuery, setSearchQuery] = useState('');
            const [showSearchResultModal, setShowSearchResultModal] = useState(false);
            const [searchResults, setSearchResults] = useState([]);
            
            // Firebase 인증 상태
            const [user, setUser] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            const [loginError, setLoginError] = useState('');
            const [isSignUpMode, setIsSignUpMode] = useState(false);
            
            // Firebase 인증 상태 모니터링
            React.useEffect(() => {
                const unsubscribe = authService.subscribeToAuthChanges((user) => {
                    setUser(user);
                    setIsLoading(false);
                });
                
                return () => unsubscribe();
            }, []);
            
            // Firebase 데이터 동기화
            React.useEffect(() => {
                if (user) {
                    const unsubscribe = salesService.subscribeToMonthData(
                        selectedYear,
                        selectedMonth,
                        (data) => {
                            setSalesData(prevData => ({
                                ...prevData,
                                ...data
                            }));
                        }
                    );
                    
                    return () => unsubscribe();
                }
            }, [user, selectedYear, selectedMonth]);

            // 상품 목록
            const healthProducts = ['1개월', '3개월', '6개월', '12개월'];
            const pilatesProducts = ['3개월 (24회 주 2회)', '6개월 (48회 주 2회)', '12개월 (96회 주 2회)'];
            const neofitProducts = ['1개월', '3개월', '6개월', '12개월'];
            const lockerProducts = ['운동복', '락커'];
            const lockerPeriods = ['1개월', '2개월', '3개월', '4개월', '5개월', '6개월', '7개월', '8개월', '9개월', '10개월', '11개월', '12개월'];
            
            // 상품 가격표
            const productPrices = {
                '1개월': 110000,
                '3개월': 270000,
                '6개월': 420000,
                '12개월': 600000,
                '3개월 (24회 주 2회)': 384000,
                '6개월 (48회 주 2회)': 624000,
                '12개월 (96회 주 2회)': 960000,
                // 운동복/락커 가격 (1개월부터 12개월까지)
                '운동복 1개월': 10000,
                '운동복 2개월': 20000,
                '운동복 3개월': 30000,
                '운동복 4개월': 40000,
                '운동복 5개월': 50000,
                '운동복 6개월': 60000,
                '운동복 7개월': 70000,
                '운동복 8개월': 80000,
                '운동복 9개월': 90000,
                '운동복 10개월': 100000,
                '운동복 11개월': 110000,
                '운동복 12개월': 120000,
                '락커 1개월': 10000,
                '락커 2개월': 20000,
                '락커 3개월': 30000,
                '락커 4개월': 40000,
                '락커 5개월': 50000,
                '락커 6개월': 60000,
                '락커 7개월': 70000,
                '락커 8개월': 80000,
                '락커 9개월': 90000,
                '락커 10개월': 100000,
                '락커 11개월': 110000,
                '락커 12개월': 120000
            };

            // 날짜 키 생성
            const getDateKey = (day) => {
                return `${selectedYear}-${String(selectedMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            };

            // 날짜별 입력 폼 토글
            const toggleDayExpansion = (day) => {
                setExpandedDays(prev => ({
                    ...prev,
                    [day]: !prev[day]
                }));
            };
            
            // 매출 입력 모달 열기
            const openAddSaleModal = (day) => {
                setSelectedModalDay(day);
                setShowAddSaleModal(true);
            };

            // 매출 상세 내역 추가
            const addSaleDetail = async (day) => {
                const dayCustomerName = customerName[day] || '';
                const daySelectedProduct = selectedProducts[day] || '';
                const dayCustomPrice = customPrices[day] || 0;

                if (!dayCustomerName.trim() || !daySelectedProduct || !dayCustomPrice) {
                    alert('회원명, 상품, 가격을 모두 입력해주세요.');
                    return;
                }

                const dateKey = getDateKey(day);
                const newDetail = {
                    id: Date.now() + Math.random(),
                    customerName: dayCustomerName.trim(),
                    product: daySelectedProduct,
                    price: parseInt(dayCustomPrice),
                    timestamp: new Date().toLocaleTimeString('ko-KR', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    })
                };

                // Firebase에 저장
                const currentData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                const newDetails = [...(currentData.details || []), newDetail];
                const newTotalAmount = newDetails.reduce((sum, detail) => sum + (detail.price || 0), 0);
                
                const updatedData = {
                    ...currentData,
                    details: newDetails,
                    amount: newTotalAmount,
                    date: dateKey
                };
                
                await salesService.saveSalesData(dateKey, updatedData);

                // 해당 날짜 입력 필드 초기화
                setCustomerName(prev => ({ ...prev, [day]: '' }));
                setSelectedProducts(prev => ({ ...prev, [day]: '' }));
                setCustomPrices(prev => ({ ...prev, [day]: '' }));
                
                alert('매출이 성공적으로 등록되었습니다!');
            };

            // 매출 상세 삭제
            const removeSaleDetail = async (day, detailId) => {
                const dateKey = getDateKey(day);
                const currentData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                const newDetails = currentData.details.filter(detail => detail.id !== detailId);
                const newTotalAmount = newDetails.reduce((sum, detail) => sum + (detail.price || 0), 0);
                
                const updatedData = {
                    ...currentData,
                    details: newDetails,
                    amount: newTotalAmount,
                    date: dateKey
                };
                
                await salesService.saveSalesData(dateKey, updatedData);
            };

            // 관리자 승인 처리
            const handleAdminApproval = async (day) => {
                const dateKey = getDateKey(day);
                const password = approvalPasswords[dateKey] || '';
                
                if (password === CONFIG.ADMIN_PASSWORD) {
                    const currentData = salesData[dateKey] || {};
                    const updatedData = {
                        ...currentData,
                        approved: true,
                        date: dateKey
                    };
                    
                    await salesService.saveSalesData(dateKey, updatedData);
                    
                    setApprovalPasswords(prev => ({
                        ...prev,
                        [dateKey]: ''
                    }));
                } else {
                    alert('비밀번호가 올바르지 않습니다.');
                }
            };

            // 수정 모드 처리
            const handleEditMode = (day) => {
                const dateKey = getDateKey(day);
                const password = editPasswords[dateKey] || '';
                
                if (password === CONFIG.ADMIN_PASSWORD) {
                    setSalesData(prev => ({
                        ...prev,
                        [dateKey]: {
                            ...prev[dateKey],
                            approved: false
                        }
                    }));
                    setEditPasswords(prev => ({
                        ...prev,
                        [dateKey]: ''
                    }));
                } else {
                    alert('비밀번호가 올바르지 않습니다.');
                }
            };

            // 월의 일수 계산
            const getDaysInMonth = () => {
                return new Date(selectedYear, selectedMonth + 1, 0).getDate();
            };

            // 주간 매출 계산 (승인된 매출만 계산)
            const calculateWeeklySales = () => {
                const weeks = [];
                const daysInMonth = getDaysInMonth();
                let currentWeek = [];
                let weekTotal = 0;

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false };
                    // 승인된 매출만 계산
                    if (dayData.approved) {
                        weekTotal += dayData.amount;
                    }
                    currentWeek.push(day);

                    if (currentWeek.length === 7 || day === daysInMonth) {
                        weeks.push({
                            days: [...currentWeek],
                            total: weekTotal
                        });
                        currentWeek = [];
                        weekTotal = 0;
                    }
                }

                return weeks;
            };

            // 월간 총매출 계산 (승인된 매출만 계산)
            const calculateMonthlySales = () => {
                let total = 0;
                const daysInMonth = getDaysInMonth();

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false };
                    // 승인된 매출만 계산
                    if (dayData.approved) {
                        total += dayData.amount;
                    }
                }

                return total;
            };

            // 인센티브 비율 계산 (직원 타입별)
            const getIncentiveRate = (totalSales, type = null) => {
                const employeeTypeToUse = type || employeeType;
                const rates = CONFIG.INCENTIVE_RATES;

                const thresholds = Object.keys(rates[employeeTypeToUse])
                    .map(Number)
                    .sort((a, b) => b - a);

                for (const threshold of thresholds) {
                    if (totalSales >= threshold) {
                        return rates[employeeTypeToUse][threshold];
                    }
                }
                
                return rates[employeeTypeToUse][0];
            };

            const monthlyTotal = calculateMonthlySales();
            const incentiveRate = getIncentiveRate(monthlyTotal);
            const incentiveAmount = monthlyTotal * (incentiveRate / 100);
            const weeklySales = calculateWeeklySales();
            
            // 오늘 매출 계산
            const getTodaySales = React.useCallback(() => {
                const today = new Date();
                // 현재 선택된 년월이 오늘과 같은지 확인
                if (today.getMonth() === selectedMonth && today.getFullYear() === selectedYear) {
                    const todayKey = `${selectedYear}-${String(selectedMonth + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                    const todayData = salesData[todayKey];
                    if (todayData && todayData.approved) {
                        return todayData.amount || 0;
                    }
                }
                return 0;
            }, [salesData, selectedMonth, selectedYear]);
            
            // 이번주 매출 계산
            const getThisWeekSales = React.useCallback(() => {
                const today = new Date();
                // 현재 선택된 년월이 오늘과 같은지 확인
                if (today.getMonth() === selectedMonth && today.getFullYear() === selectedYear) {
                    const currentWeek = weeklySales.find(week => {
                        return week.days.includes(today.getDate());
                    });
                    return currentWeek ? currentWeek.total : 0;
                }
                return 0;
            }, [weeklySales, selectedMonth, selectedYear]);

            // SVG 아이콘 컴포넌트
            const Icon = ({ icon: iconName, size = 24, style = {}, className = "" }) => {
                const svgIcons = {
                    "calendar": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                    ),
                    "dollar-sign": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <line x1="12" y1="1" x2="12" y2="23"></line>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                        </svg>
                    ),
                    "check": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    ),
                    "trending-up": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                            <polyline points="17 6 23 6 23 12"></polyline>
                        </svg>
                    ),
                    "edit": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                    ),
                    "plus": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    ),
                    "trash-2": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    ),
                    "user": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    ),
                    "package": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line>
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                            <line x1="12" y1="22.08" x2="12" y2="12"></line>
                        </svg>
                    ),
                    "credit-card": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                    ),
                    "search": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    )
                };
                
                return svgIcons[iconName] || <span>•</span>;
            };

            // 숫자에 천 단위 콤마 추가 함수
            const formatNumberWithCommas = (num) => {
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            };
            
            // 콤마가 있는 숫자에서 콤마 제거 함수
            const removeCommas = (str) => {
                return str.replace(/,/g, '');
            };
            
            // 금액에 따른 색상 반환 함수
            const getPriceColor = (price) => {
                if (price >= 1000000) return '#FF6B6B'; // 100만원 이상: 빨간색
                if (price >= 500000) return '#FFD93D'; // 50만원 이상: 노란색
                if (price >= 300000) return '#6BCF7F'; // 30만원 이상: 초록색
                if (price >= 100000) return '#4ECDC4'; // 10만원 이상: 청록색
                return '#95E1D3'; // 10만원 미만: 연한 민트색
            };
            
            // 오늘 날짜로 스크롤하는 함수
            const scrollToToday = () => {
                const today = new Date();
                if (today.getMonth() === selectedMonth && today.getFullYear() === selectedYear) {
                    const todayDay = today.getDate();
                    const todayElement = document.getElementById(`day-${todayDay}`);
                    if (todayElement) {
                        todayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                } else {
                    // 현재 월이 아니면 현재 월로 변경
                    setSelectedMonth(today.getMonth());
                    setSelectedYear(today.getFullYear());
                    setTimeout(() => {
                        const todayDay = today.getDate();
                        const todayElement = document.getElementById(`day-${todayDay}`);
                        if (todayElement) {
                            todayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }, 500);
                }
            };
            
            // 회원 검색 함수
            const searchCustomer = () => {
                if (!searchQuery.trim()) {
                    alert('검색할 회원명을 입력해주세요.');
                    return;
                }
                
                const results = [];
                
                // 모든 날짜의 매출 데이터를 검색
                Object.entries(salesData).forEach(([dateKey, dayData]) => {
                    if (dayData.details && Array.isArray(dayData.details)) {
                        dayData.details.forEach(detail => {
                            if (detail.customerName && detail.customerName.toLowerCase().includes(searchQuery.toLowerCase())) {
                                results.push({
                                    ...detail,
                                    date: dateKey
                                });
                            }
                        });
                    }
                });
                
                if (results.length === 0) {
                    alert('검색 결과가 없습니다.');
                    return;
                }
                
                setSearchResults(results);
                setShowSearchResultModal(true);
            };
            
            // 매출 입력 모달 컴포넌트
            const AddSaleModal = () => {
                const [modalData, setModalData] = useState({
                    customerName: '',
                    healthProduct: '',
                    pilatesProduct: '',
                    neofitProduct: '',
                    lockerProduct: '',
                    lockerType: '',
                    lockerPeriod: '',
                    price: '',
                    discount: ''
                });
                
                // 상품 선택 시 가격 자동 계산
                React.useEffect(() => {
                    let totalPrice = 0;
                    if (modalData.healthProduct) totalPrice += productPrices[modalData.healthProduct] || 0;
                    if (modalData.pilatesProduct) totalPrice += productPrices[modalData.pilatesProduct] || 0;
                    if (modalData.neofitProduct) totalPrice += productPrices[modalData.neofitProduct] || 0;
                    if (modalData.lockerType && modalData.lockerPeriod) {
                        const lockerKey = `${modalData.lockerType} ${modalData.lockerPeriod}`;
                        totalPrice += productPrices[lockerKey] || 0;
                    }
                    
                    // 할인 금액 차감
                    const discount = parseInt(removeCommas(modalData.discount)) || 0;
                    const finalPrice = Math.max(0, totalPrice - discount);
                    
                    setModalData(prev => ({ ...prev, price: formatNumberWithCommas(finalPrice) }));
                }, [modalData.healthProduct, modalData.pilatesProduct, modalData.neofitProduct, modalData.lockerType, modalData.lockerPeriod, modalData.discount]);
                
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    const selectedProducts = [];
                    if (modalData.healthProduct) selectedProducts.push('헬스: ' + modalData.healthProduct);
                    if (modalData.pilatesProduct) selectedProducts.push('필라테스: ' + modalData.pilatesProduct);
                    if (modalData.neofitProduct) selectedProducts.push('네오핏: ' + modalData.neofitProduct);
                    if (modalData.lockerType && modalData.lockerPeriod) {
                        selectedProducts.push(`${modalData.lockerType}: ${modalData.lockerPeriod}`);
                    }
                    
                    if (!modalData.customerName || selectedProducts.length === 0 || !modalData.price) {
                        alert('회원명, 상품(최소 1개), 가격을 모두 입력해주세요.');
                        return;
                    }
                    
                    const dateKey = getDateKey(selectedModalDay);
                    const newDetail = {
                        id: Date.now() + Math.random(),
                        customerName: modalData.customerName.trim(),
                        product: selectedProducts.join(', '),
                        price: parseInt(removeCommas(modalData.price)),
                        timestamp: new Date().toLocaleTimeString('ko-KR', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            second: '2-digit'
                        })
                    };
                    
                    // Firebase에 저장
                    const currentData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                    const newDetails = [...(currentData.details || []), newDetail];
                    const newTotalAmount = newDetails.reduce((sum, detail) => sum + (detail.price || 0), 0);
                    
                    const updatedData = {
                        ...currentData,
                        details: newDetails,
                        amount: newTotalAmount,
                        date: dateKey
                    };
                    
                    try {
                        await salesService.saveSalesData(dateKey, updatedData);
                        console.log('매출 데이터 Firebase 저장 완료:', dateKey);
                    } catch (error) {
                        console.error('Firebase 저장 실패:', error);
                        alert('데이터 저장에 실패했습니다. 다시 시도해주세요.');
                        return;
                    }
                    
                    setShowAddSaleModal(false);
                    setModalData({ customerName: '', healthProduct: '', pilatesProduct: '', neofitProduct: '', lockerProduct: '', lockerType: '', lockerPeriod: '', price: '', discount: '' });
                    
                    // 오늘 날짜로 스크롤
                    setTimeout(() => {
                        const dayElement = document.getElementById(`day-${selectedModalDay}`);
                        if (dayElement && dailyViewRef.current) {
                            dayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }, 100);
                };
                
                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowAddSaleModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '500px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#00FF88' }}>
                                {selectedMonth + 1}월 {selectedModalDay}일 매출 입력
                            </h3>
                            
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">회원명</label>
                                    <input
                                        type="text"
                                        value={modalData.customerName}
                                        onChange={(e) => setModalData({...modalData, customerName: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                        placeholder="회원명을 입력하세요"
                                        autoFocus
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">헬스 이용권</label>
                                    <select
                                        value={modalData.healthProduct}
                                        onChange={(e) => setModalData({...modalData, healthProduct: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">헬스 이용권 선택</option>
                                        {healthProducts.map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">필라테스 이용권</label>
                                    <select
                                        value={modalData.pilatesProduct}
                                        onChange={(e) => setModalData({...modalData, pilatesProduct: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">필라테스 이용권 선택</option>
                                        {pilatesProducts.map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">네오핏 이용권</label>
                                    <select
                                        value={modalData.neofitProduct}
                                        onChange={(e) => setModalData({...modalData, neofitProduct: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">네오핏 이용권 선택</option>
                                        {neofitProducts.map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">운동복/락커 선택</label>
                                    <select
                                        value={modalData.lockerType}
                                        onChange={(e) => setModalData({...modalData, lockerType: e.target.value, lockerPeriod: ''})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">운동복/락커 선택</option>
                                        {lockerProducts.map(product => (
                                            <option key={product} value={product}>{product}</option>
                                        ))}
                                    </select>
                                </div>
                                
                                {modalData.lockerType && (
                                    <div>
                                        <label className="block text-sm font-semibold mb-2 text-gray-300">{modalData.lockerType} 이용 기간</label>
                                        <select
                                            value={modalData.lockerPeriod}
                                            onChange={(e) => setModalData({...modalData, lockerPeriod: e.target.value})}
                                            className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                        >
                                            <option value="">기간 선택</option>
                                            {lockerPeriods.map(period => {
                                                const priceKey = `${modalData.lockerType} ${period}`;
                                                const price = productPrices[priceKey] || 0;
                                                return (
                                                    <option key={period} value={period}>
                                                        {period} - {price.toLocaleString()}원
                                                    </option>
                                                );
                                            })}
                                        </select>
                                    </div>
                                )}
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">할인 금액</label>
                                    <input
                                        type="text"
                                        inputMode="numeric"
                                        value={modalData.discount}
                                        onChange={(e) => {
                                            const value = e.target.value.replace(/[^0-9]/g, '');
                                            if (value === '') {
                                                setModalData({...modalData, discount: ''});
                                            } else {
                                                setModalData({...modalData, discount: formatNumberWithCommas(value)});
                                            }
                                        }}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                        placeholder="할인 금액을 입력하세요"
                                        style={{ fontSize: '16px' }}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">최종 가격</label>
                                    <input
                                        type="text"
                                        value={modalData.price}
                                        readOnly
                                        className="glass-effect rounded-lg px-4 py-3 w-full bg-gray-800/50 cursor-not-allowed text-green-400 font-bold text-lg"
                                        placeholder="상품을 선택하면 가격이 자동 계산됩니다"
                                    />
                                </div>
                                
                                <div className="flex gap-3 pt-4">
                                    <button
                                        type="button"
                                        onClick={() => setShowAddSaleModal(false)}
                                        className="flex-1 glass-effect hover:border-gray-400 rounded-lg py-3 font-semibold transition-all text-gray-300 hover:text-white"
                                    >
                                        취소
                                    </button>
                                    <button
                                        type="submit"
                                        className="flex-1 glass-effect border-green-500 hover:border-green-400 rounded-lg py-3 font-semibold transition-all hover:shadow-lg text-white"
                                    >
                                        등록
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                );
            };
            
            // 검색 결과 모달 컴포넌트
            const SearchResultModal = () => {
                const totalAmount = searchResults.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = searchResults.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});
                
                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowSearchResultModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#00FF88' }}>
                                '{searchQuery}' 검색 결과
                            </h3>
                            
                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{searchResults.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 결제 금액</p>
                                    <p className="text-3xl font-bold" style={{ color: '#00FF88' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>
                            
                            <div className="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                {Object.entries(groupedByDate).sort((a, b) => b[0].localeCompare(a[0])).map(([date, items]) => (
                                    <div key={date} className="glass-effect rounded-xl p-4">
                                        <div className="font-semibold text-gray-300 mb-3">{date}</div>
                                        <div className="space-y-2">
                                            {items.map((item, index) => (
                                                <div key={index} className="flex justify-between items-start p-3 bg-gray-800/50 rounded-lg">
                                                    <div className="flex-1">
                                                        <div className="text-sm text-gray-400">{item.timestamp}</div>
                                                        <div className="text-xs text-gray-500 mt-1">{item.product}</div>
                                                    </div>
                                                    <div className="font-bold" style={{ color: getPriceColor(item.price || 0) }}>
                                                        {(item.price || 0).toLocaleString()}원
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="mt-6">
                                <button
                                    onClick={() => setShowSearchResultModal(false)}
                                    className="w-full glass-effect hover:border-gray-400 rounded-lg py-3 font-semibold transition-all text-white"
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 로그인 화면
            if (isLoading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br text-gray-100 flex items-center justify-center">
                        <div className="text-2xl">로딩 중...</div>
                    </div>
                );
            }
            
            if (!user) {
                return (
                    <div className="min-h-screen" style={{ backgroundColor: '#1a1a1a' }}>
                        <div className="flex items-center justify-center min-h-screen p-4">
                            <div className="w-full" style={{ maxWidth: '440px' }}>
                                <div style={{ 
                                    backgroundColor: '#2d2d2d',
                                    borderRadius: '16px',
                                    padding: '40px',
                                    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.5)'
                                }}>
                                    <div className="text-center mb-8">
                                        <h1 className="text-3xl font-bold mb-1">
                                            <span style={{ color: '#00FF88' }}>NeoFit</span>
                                            <span className="text-white ml-1">PayCalc</span>
                                        </h1>
                                        <p className="text-gray-400 text-sm">네오핏 급여 계산기</p>
                                    </div>
                                {!isSignUpMode ? (
                                    // 로그인 폼
                                    <>
                                        <form onSubmit={async (e) => {
                                            e.preventDefault();
                                            setLoginError('');
                                            const email = e.target.email.value;
                                            const password = e.target.password.value;
                                            
                                            const result = await authService.loginWithEmail(email, password);
                                            if (!result.success) {
                                                let errorMsg = result.error;
                                                if (result.error.includes('user-not-found')) {
                                                    errorMsg = '등록되지 않은 이메일입니다.';
                                                } else if (result.error.includes('wrong-password')) {
                                                    errorMsg = '잘못된 비밀번호입니다.';
                                                } else if (result.error.includes('invalid-login-credentials')) {
                                                    errorMsg = '이메일 또는 비밀번호가 올바르지 않습니다.';
                                                }
                                                setLoginError(errorMsg);
                                            }
                                        }} className="space-y-5">
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">이메일</label>
                                                <input
                                                    type="email"
                                                    name="email"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="gio7603@gmail.com"
                                                    required
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">비밀번호</label>
                                                <input
                                                    type="password"
                                                    name="password"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="비밀번호 입력"
                                                    required
                                                />
                                            </div>
                                            {loginError && (
                                                <div className="text-red-400 text-sm text-center py-2">
                                                    {loginError}
                                                </div>
                                            )}
                                            <button
                                                type="submit"
                                                className="w-full text-white font-medium py-3 px-4 transition-all duration-200 hover:opacity-90"
                                                style={{
                                                    backgroundColor: '#00FF88',
                                                    borderRadius: '12px',
                                                    fontSize: '16px',
                                                    border: 'none',
                                                    color: '#000',
                                                    marginTop: '24px'
                                                }}
                                            >
                                                로그인
                                            </button>
                                        </form>
                                        <div className="mt-6 pt-6" style={{ borderTop: '1px solid #3d3d3d' }}>
                                            <button
                                                onClick={() => setIsSignUpMode(true)}
                                                className="w-full py-3 px-4 transition-all duration-200 hover:opacity-80"
                                                style={{
                                                    backgroundColor: 'transparent',
                                                    border: '1px solid #4d4d4d',
                                                    borderRadius: '12px',
                                                    fontSize: '15px',
                                                    color: '#999'
                                                }}
                                            >
                                                회원가입
                                            </button>
                                        </div>
                                    </>
                                ) : (
                                    // 회원가입 폼
                                    <>
                                        <form onSubmit={async (e) => {
                                            e.preventDefault();
                                            setLoginError('');
                                            const email = e.target.email.value;
                                            const password = e.target.password.value;
                                            const confirmPassword = e.target.confirmPassword.value;
                                            
                                            if (password !== confirmPassword) {
                                                setLoginError('비밀번호가 일치하지 않습니다.');
                                                return;
                                            }
                                            
                                            if (password.length < 6) {
                                                setLoginError('비밀번호는 최소 6자 이상이어야 합니다.');
                                                return;
                                            }
                                            
                                            const result = await authService.signUpWithEmail(email, password);
                                            if (!result.success) {
                                                let errorMsg = result.error;
                                                if (result.error.includes('email-already-in-use')) {
                                                    errorMsg = '이미 사용 중인 이메일입니다.';
                                                } else if (result.error.includes('weak-password')) {
                                                    errorMsg = '비밀번호가 너무 약합니다.';
                                                } else if (result.error.includes('invalid-email')) {
                                                    errorMsg = '유효하지 않은 이메일 형식입니다.';
                                                }
                                                setLoginError(errorMsg);
                                            } else {
                                                alert('회원가입이 완료되었습니다!');
                                            }
                                        }} className="space-y-5">
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">이메일</label>
                                                <input
                                                    type="email"
                                                    name="email"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="새 이메일 입력"
                                                    required
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">비밀번호</label>
                                                <input
                                                    type="password"
                                                    name="password"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="비밀번호 (6자 이상)"
                                                    required
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">비밀번호 확인</label>
                                                <input
                                                    type="password"
                                                    name="confirmPassword"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="비밀번호 다시 입력"
                                                    required
                                                />
                                            </div>
                                            {loginError && (
                                                <div className="text-red-400 text-sm text-center py-2">
                                                    {loginError}
                                                </div>
                                            )}
                                            <button
                                                type="submit"
                                                className="w-full text-white font-medium py-3 px-4 transition-all duration-200 hover:opacity-90"
                                                style={{
                                                    backgroundColor: '#00FF88',
                                                    borderRadius: '12px',
                                                    fontSize: '16px',
                                                    border: 'none',
                                                    color: '#000',
                                                    marginTop: '24px'
                                                }}
                                            >
                                                회원가입
                                            </button>
                                        </form>
                                        <div className="mt-6 pt-6" style={{ borderTop: '1px solid #3d3d3d' }}>
                                            <button
                                                onClick={() => setIsSignUpMode(false)}
                                                className="w-full py-3 px-4 transition-all duration-200 hover:opacity-80"
                                                style={{
                                                    backgroundColor: 'transparent',
                                                    border: '1px solid #4d4d4d',
                                                    borderRadius: '12px',
                                                    fontSize: '15px',
                                                    color: '#999'
                                                }}
                                            >
                                                로그인으로 돌아가기
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>
                        </div>
                    </div>
                    </div>
                );
            }
            
            return (
                <div className="min-h-screen bg-gradient-to-br text-gray-100 p-4">
                    <div className="max-w-7xl mx-auto">
                        {/* 매출 입력 모달 */}
                        {showAddSaleModal && <AddSaleModal />}
                        {/* 검색 결과 모달 */}
                        {showSearchResultModal && <SearchResultModal />}
                        {/* 헤더 */}
                        <div className="text-center mb-8 sm:mb-10 relative">
                            <h1 className="text-3xl sm:text-5xl font-black mb-2 sm:mb-3" style={{ color: '#00FF88' }}>
                                NeoFit PayCalc
                            </h1>
                            <p className="text-gray-400 text-base sm:text-lg">네오핏 급여 계산기</p>
                            <button
                                onClick={() => authService.logout()}
                                className="absolute top-0 right-0 glass-effect hover:border-red-400 rounded-lg px-4 py-2 text-sm transition-all text-white"
                            >
                                로그아웃
                            </button>
                        </div>
                        
                        {/* 회원 검색 */}
                        <div className="mb-6 flex justify-center">
                            <div className="flex gap-2" style={{ maxWidth: '400px', width: '100%' }}>
                                <input
                                    type="text"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && searchCustomer()}
                                    placeholder="회원명을 검색하세요"
                                    className="flex-1 glass-effect rounded-lg px-4 py-3 focus:border-green-400 focus:outline-none"
                                />
                                <button
                                    onClick={searchCustomer}
                                    className="glass-effect border-green-500 hover:border-green-400 rounded-lg px-6 py-3 font-semibold transition-all hover:shadow-lg text-white"
                                >
                                    <Icon icon="search" size={20} />
                                </button>
                            </div>
                        </div>

                        {/* 뷰 모드 선택 */}
                        <div className="flex justify-center gap-2 mb-6">
                            <button
                                onClick={() => setViewMode('daily')}
                                className={`px-4 py-2 rounded-lg font-semibold transition-all glass-effect ${
                                    viewMode === 'daily' 
                                        ? 'text-green-400 border-green-500 shadow-lg scale-105' 
                                        : 'text-gray-400 hover:text-white hover:border-gray-400'
                                }`}
                                style={viewMode === 'daily' ? { 
                                    backgroundColor: '#0a4a2c',
                                    borderColor: '#00FF88',
                                    boxShadow: '0 0 15px rgba(0, 255, 136, 0.5)'
                                } : {}}
                            >
                                일별
                            </button>
                            <button
                                onClick={() => setViewMode('weekly')}
                                className={`px-4 py-2 rounded-lg font-semibold transition-all glass-effect ${
                                    viewMode === 'weekly' 
                                        ? 'text-green-400 border-green-500 shadow-lg scale-105' 
                                        : 'text-gray-400 hover:text-white hover:border-gray-400'
                                }`}
                                style={viewMode === 'weekly' ? { 
                                    backgroundColor: '#0a4a2c',
                                    borderColor: '#00FF88',
                                    boxShadow: '0 0 15px rgba(0, 255, 136, 0.5)'
                                } : {}}
                            >
                                주별
                            </button>
                            <button
                                onClick={() => setViewMode('monthly')}
                                className={`px-4 py-2 rounded-lg font-semibold transition-all glass-effect ${
                                    viewMode === 'monthly' 
                                        ? 'text-green-400 border-green-500 shadow-lg scale-105' 
                                        : 'text-gray-400 hover:text-white hover:border-gray-400'
                                }`}
                                style={viewMode === 'monthly' ? { 
                                    backgroundColor: '#0a4a2c',
                                    borderColor: '#00FF88',
                                    boxShadow: '0 0 15px rgba(0, 255, 136, 0.5)'
                                } : {}}
                            >
                                월별
                            </button>
                        </div>
                        
                        {/* 직원 유형 선택 및 월 선택 */}
                        <div className="flex flex-col sm:flex-row justify-center gap-4 mb-10 flex-wrap">
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setEmployeeType('full')}
                                    className={`px-6 sm:px-8 py-3 rounded-xl font-semibold transition-all duration-300 text-sm sm:text-base glass-effect ${
                                        employeeType === 'full' 
                                            ? 'text-white border-green-500 shadow-lg scale-105 bg-green-500/20' 
                                            : 'text-gray-400 hover:text-white hover:border-gray-400'
                                    }`}
                                >
                                    정직원
                                </button>
                                <button
                                    onClick={() => setEmployeeType('part')}
                                    className={`px-6 sm:px-8 py-3 rounded-xl font-semibold transition-all duration-300 text-sm sm:text-base glass-effect ${
                                        employeeType === 'part' 
                                            ? 'text-white border-green-500 shadow-lg scale-105 bg-green-500/20' 
                                            : 'text-gray-400 hover:text-white hover:border-gray-400'
                                    }`}
                                >
                                    파트타임
                                </button>
                            </div>
                            
                            <div className="flex gap-3 w-full sm:w-auto">
                                <select
                                    value={selectedMonth}
                                    onChange={(e) => setSelectedMonth(parseInt(e.target.value))}
                                    className="glass-effect rounded-xl px-4 sm:px-6 py-3 focus:border-green-400 focus:outline-none font-medium transition-all hover:scale-105 text-sm sm:text-base flex-1 sm:flex-initial"
                                    style={{ borderColor: '#00C66E' }}
                                >
                                    {Array.from({ length: 12 }, (_, i) => (
                                        <option key={i} value={i}>
                                            {new Date(2024, i).toLocaleDateString('ko-KR', { month: 'long' })}
                                        </option>
                                    ))}
                                </select>
                                <select
                                    value={selectedYear}
                                    onChange={(e) => setSelectedYear(parseInt(e.target.value))}
                                    className="glass-effect rounded-xl px-4 sm:px-6 py-3 focus:border-green-400 focus:outline-none font-medium transition-all hover:scale-105 text-sm sm:text-base flex-1 sm:flex-initial"
                                    style={{ borderColor: '#00C66E' }}
                                >
                                    {[2024, 2025, 2026].map(year => (
                                        <option key={year} value={year}>{year}년</option>
                                    ))}
                                </select>
                            </div>
                        </div>

                        {/* 통계 요약 */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">오늘 매출</p>
                                <p className="text-2xl font-bold text-white">
                                    {getTodaySales().toLocaleString()}원
                                </p>
                            </div>
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">이번주 매출</p>
                                <p className="text-2xl font-bold" style={{ color: '#00C6FF' }}>
                                    {getThisWeekSales().toLocaleString()}원
                                </p>
                            </div>
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">월 매출</p>
                                <p className="text-2xl font-bold" style={{ color: '#FFB800' }}>
                                    {monthlyTotal.toLocaleString()}원
                                </p>
                            </div>
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">예상 인센티브</p>
                                <p className="text-2xl font-bold" style={{ 
                                    color: '#00FF88',
                                    textShadow: '0 0 10px rgba(0, 255, 136, 0.8), 0 0 20px rgba(0, 255, 136, 0.6), 0 0 30px rgba(0, 255, 136, 0.4)'
                                }}>
                                    {Math.floor(incentiveAmount).toLocaleString()}원
                                </p>
                            </div>
                        </div>

                        {/* 매출 현황 */}
                        <div className="gradient-border mb-8">
                            <div>
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold flex items-center gap-3">
                                        <div className="p-2 bg-green-500/20 rounded-lg">
                                            <Icon icon={Calendar} size={28} style={{ color: '#00FF88' }} />
                                        </div>
                                        {viewMode === 'daily' ? '일별 매출 현황' : viewMode === 'weekly' ? '주별 매출 현황' : '월별 매출 현황'}
                                    </h2>
                                    {viewMode === 'daily' && (
                                        <div className="flex gap-2">
                                            <button
                                                onClick={scrollToToday}
                                                className="glass-effect rounded-full p-3 border-green-500 hover:border-green-400 transition-all hover:shadow-lg"
                                                title="오늘로 이동"
                                            >
                                                <Icon icon={Calendar} size={20} style={{ color: '#00FF88' }} />
                                            </button>
                                            <div className="relative group">
                                                <button
                                                    onClick={() => {
                                                        const today = new Date();
                                                        const day = today.getMonth() === selectedMonth && today.getFullYear() === selectedYear ? today.getDate() : 1;
                                                        openAddSaleModal(day);
                                                    }}
                                                    className="glass-effect rounded-full p-3 border-blue-500 hover:border-blue-400 transition-all hover:shadow-lg"
                                                >
                                                <Icon icon={Plus} size={24} style={{ color: 'white' }} />
                                            </button>
                                            <div className="absolute right-0 top-full mt-2 bg-gray-800 text-white text-sm px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
                                                오늘 매출 입력하기
                                            </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                                
                                {/* 일별 뷰 */}
                                {viewMode === 'daily' && (
                                    <div ref={dailyViewRef} className="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[650px] overflow-y-auto p-2">
                                        {Array.from({ length: getDaysInMonth() }, (_, i) => i + 1).map(day => {
                                        const dateKey = getDateKey(day);
                                        const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                                        const date = new Date(selectedYear, selectedMonth, day);
                                        const dayName = date.toLocaleDateString('ko-KR', { weekday: 'short' });
                                        const isWeekend = date.getDay() === 0 || date.getDay() === 6;
                                        
                                        return (
                                            <div key={day} id={`day-${day}`} className={`glass-effect rounded-2xl p-4 sm:p-5 hover:scale-[1.02] transition-all duration-300 slide-in ${isWeekend ? 'border-pink-500/30' : ''}`}>
                                                <div className="flex items-center justify-between mb-3 sm:mb-4">
                                                    <div className="flex items-center gap-2 sm:gap-3">
                                                        <span className={`text-base sm:text-lg font-bold ${isWeekend ? 'text-pink-400' : 'text-white'}`}>
                                                            {selectedMonth + 1}월 {day}일
                                                        </span>
                                                        <span className={`text-xs sm:text-sm px-2 py-1 rounded-full ${isWeekend ? 'bg-pink-500/20 text-pink-400' : 'bg-gray-700 text-gray-400'}`}>
                                                            {dayName}
                                                        </span>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        {dayData.approved && (
                                                            <div className="flex items-center gap-2">
                                                                <Icon icon={Check} size={20} style={{ color: '#00FF88' }} />
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                                
                                                <div className={`rounded-xl p-3 sm:p-4 mb-3 sm:mb-4 ${dayData.amount > 0 ? 'bg-gradient-to-r from-green-500/10 to-blue-500/10' : 'bg-gray-800/50'}`}>
                                                    <div className="text-2xl sm:text-3xl font-black mb-1" style={{ color: dayData.amount > 0 ? '#00FF88' : '#6b7280' }}>
                                                        {(dayData.amount || 0).toLocaleString()}원
                                                    </div>
                                                    <div className="text-xs sm:text-sm text-gray-400 flex items-center gap-2">
                                                        <Icon icon={Package} size={14} />
                                                        {dayData.details?.length || 0}건의 매출
                                                    </div>
                                                </div>

                                                {/* 매출 상세 내역 */}
                                                {dayData.details && dayData.details.length > 0 && (
                                                    <div className="mb-4">
                                                        <div className="flex flex-col gap-2 mb-3">
                                                            <div className="text-sm font-semibold text-gray-300 flex items-center gap-2">
                                                                <Icon icon={DollarSign} size={16} />
                                                                매출 내역 ({dayData.details.length}건)
                                                            </div>
                                                            <div className="flex items-center justify-start gap-1 text-xs overflow-x-auto">
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#95E1D3' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">~10</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#4ECDC4' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">10~</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#6BCF7F' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">30~</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#FFD93D' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">50~</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#FF6B6B' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">100~</span>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div className="space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                                                            {dayData.details.map((detail, index) => (
                                                                <div key={detail.id} className="relative">
                                                                    <div className="glass-effect rounded-xl p-4 hover:scale-[1.01] transition-all border border-gray-700/50 hover:border-green-500/30">
                                                                        <div className="flex justify-between items-start gap-3">
                                                                            <div className="flex-1">
                                                                                <div className="flex items-start justify-between mb-2">
                                                                                    <div className="flex items-center gap-2">
                                                                                        <div className="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                                                                                            <span className="text-xs font-bold text-green-400">{index + 1}</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <div className="font-semibold text-white text-sm">
                                                                                                {detail.customerName}
                                                                                            </div>
                                                                                            <div className="text-gray-500 text-xs">
                                                                                                {detail.timestamp}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div className="font-bold text-lg" style={{ color: getPriceColor(detail.price || 0) }}>
                                                                                        {(detail.price || 0).toLocaleString()}원
                                                                                    </div>
                                                                                </div>
                                                                                <div className="bg-gray-800/50 rounded-lg px-3 py-2 text-xs text-gray-300">
                                                                                    {detail.product}
                                                                                </div>
                                                                            </div>
                                                                            {!dayData.approved && (
                                                                                <button
                                                                                    onClick={() => removeSaleDetail(day, detail.id)}
                                                                                    className="text-red-400 hover:text-red-300 p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 transition-all"
                                                                                >
                                                                                    <Icon icon={Trash2} size={16} />
                                                                                </button>
                                                                            )}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            ))}
                                                        </div>
                                                    </div>
                                                )}

                                                {/* 매출이 없을 때 안내 */}
                                                {(!dayData.details || dayData.details.length === 0) && dayData.amount === 0 && (
                                                    <div className="text-center py-6 text-gray-500 text-sm glass-effect rounded-xl mb-4">
                                                        <Icon icon={DollarSign} size={24} className="mx-auto mb-2 opacity-30" />
                                                        등록된 매출이 없습니다
                                                    </div>
                                                )}

                                                {/* 매출 입력 버튼 */}
                                                {!dayData.approved && (
                                                    <button
                                                        onClick={() => openAddSaleModal(day)}
                                                        className="w-full glass-effect border-blue-500 hover:border-blue-400 rounded-xl py-3 text-sm font-semibold transition-all flex items-center justify-center gap-2 hover:shadow-lg mb-4 text-white"
                                                    >
                                                        <Icon icon={Plus} size={18} />
                                                        빠른 매출 입력
                                                    </button>
                                                )}

                                                {/* 매출 입력 폼 */}
                                                {expandedDays[day] && !dayData.approved && (
                                                    <div className="glass-effect rounded-xl p-5 mb-4 space-y-4 slide-in">
                                                        <div className="text-sm font-bold text-green-400 mb-4 flex items-center gap-2">
                                                            <Icon icon={Edit} size={16} />
                                                            {selectedMonth + 1}월 {day}일 매출 입력
                                                        </div>

                                                        {/* 회원명 입력 */}
                                                        <div>
                                                            <label className="block text-xs font-semibold mb-2 text-gray-300 flex items-center gap-2">
                                                                <Icon icon="user" size={14} />
                                                                회원명
                                                            </label>
                                                            <input
                                                                type="text"
                                                                value={customerName[day] || ''}
                                                                onChange={(e) => setCustomerName(prev => ({
                                                                    ...prev,
                                                                    [day]: e.target.value
                                                                }))}
                                                                placeholder="회원명을 입력하세요"
                                                                className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none text-sm transition-all"
                                                            />
                                                        </div>

                                                        {/* 상품 선택 */}
                                                        <div>
                                                            <label className="block text-xs font-semibold mb-2 text-gray-300 flex items-center gap-2">
                                                                <Icon icon={Package} size={14} />
                                                                상품
                                                            </label>
                                                            <select
                                                                value={selectedProducts[day] || ''}
                                                                onChange={(e) => setSelectedProducts(prev => ({
                                                                    ...prev,
                                                                    [day]: e.target.value
                                                                }))}
                                                                className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none text-sm transition-all"
                                                            >
                                                                <option value="">상품을 선택하세요</option>
                                                                {products.map(product => (
                                                                    <option key={product} value={product}>{product}</option>
                                                                ))}
                                                            </select>
                                                        </div>

                                                        {/* 가격 입력 */}
                                                        <div>
                                                            <label className="block text-xs font-semibold mb-2 text-gray-300 flex items-center gap-2">
                                                                <Icon icon={CreditCard} size={14} />
                                                                가격
                                                            </label>
                                                            <input
                                                                type="number"
                                                                value={customPrices[day] || ''}
                                                                onChange={(e) => setCustomPrices(prev => ({
                                                                    ...prev,
                                                                    [day]: e.target.value
                                                                }))}
                                                                placeholder="가격을 입력하세요"
                                                                className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none text-sm transition-all"
                                                            />
                                                        </div>

                                                        {/* 등록 버튼 */}
                                                        <button
                                                            onClick={() => addSaleDetail(day)}
                                                            className="w-full glass-effect border-green-500 hover:border-green-400 rounded-lg py-3 font-semibold text-sm transition-all hover:shadow-lg text-white"
                                                        >
                                                            매출 등록
                                                        </button>
                                                    </div>
                                                )}
                                                
                                                {!dayData.approved ? (
                                                    <div className="flex gap-2">
                                                        <input
                                                            type="password"
                                                            value={approvalPasswords[dateKey] || ''}
                                                            onChange={(e) => {
                                                                const newValue = e.target.value;
                                                                setApprovalPasswords(prev => ({
                                                                    ...prev,
                                                                    [dateKey]: newValue
                                                                }));
                                                            }}
                                                            placeholder="PW"
                                                            className="glass-effect rounded-xl px-1 sm:px-3 py-3 w-10 sm:w-32 focus:border-green-400 focus:outline-none text-xs sm:text-base transition-all text-center"
                                                            style={{ fontSize: '16px' }}
                                                            onKeyPress={(e) => {
                                                                if (e.key === 'Enter') {
                                                                    handleAdminApproval(day);
                                                                }
                                                            }}
                                                        />
                                                        <button
                                                            onClick={() => handleAdminApproval(day)}
                                                            className="glass-effect border-blue-500 hover:border-blue-400 rounded-xl px-3 sm:px-6 py-3 text-xs sm:text-base font-semibold transition-all whitespace-nowrap hover:shadow-lg text-white"
                                                        >
                                                            승인
                                                        </button>
                                                    </div>
                                                ) : (
                                                    <div className="space-y-3">
                                                        <button
                                                            className="glass-effect border-green-500 rounded-xl px-4 py-3 text-base font-semibold cursor-default flex items-center gap-2 w-full justify-center shadow-lg text-white opacity-70"
                                                            disabled
                                                        >
                                                            <Icon icon={Check} size={18} />
                                                            정산완료
                                                        </button>
                                                        <div className="flex gap-2">
                                                            <input
                                                                type="password"
                                                                value={editPasswords[dateKey] || ''}
                                                                onChange={(e) => {
                                                                    const newValue = e.target.value;
                                                                    setEditPasswords(prev => ({
                                                                        ...prev,
                                                                        [dateKey]: newValue
                                                                    }));
                                                                }}
                                                                placeholder="PW"
                                                                className="glass-effect rounded-xl px-1 sm:px-3 py-3 w-10 sm:w-36 focus:border-orange-400 focus:outline-none text-xs sm:text-base transition-all text-center"
                                                                style={{ fontSize: '16px' }}
                                                                onKeyPress={(e) => {
                                                                    if (e.key === 'Enter') {
                                                                        handleEditMode(day);
                                                                    }
                                                                }}
                                                            />
                                                            <button
                                                                onClick={() => handleEditMode(day)}
                                                                className="glass-effect border-orange-500 hover:border-orange-400 rounded-xl px-2 sm:px-6 py-3 text-xs sm:text-base font-semibold transition-all whitespace-nowrap flex items-center gap-1 hover:shadow-lg text-white"
                                                            >
                                                                <Icon icon={Edit} size={16} />
                                                                <span className="hidden sm:inline">수정</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        );
                                        })}
                                    </div>
                                )}
                                
                                {/* 주별 뷰 */}
                                {viewMode === 'weekly' && (
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        {calculateWeeklySales().map((week, index) => (
                                            <div key={index} className="glass-effect rounded-2xl p-6 hover:scale-[1.02] transition-all">
                                                <h3 className="text-xl font-bold mb-4 flex items-center justify-between">
                                                    <span>{week.days[0]}일 - {week.days[week.days.length - 1]}일</span>
                                                    <span className="text-2xl" style={{ color: '#00C6FF' }}>
                                                        {week.total.toLocaleString()}원
                                                    </span>
                                                </h3>
                                                <div className="space-y-2">
                                                    {week.days.map(day => {
                                                        const dateKey = getDateKey(day);
                                                        const dayData = salesData[dateKey] || { amount: 0, approved: false };
                                                        return (
                                                            <div key={day} className="flex justify-between items-center py-2 border-b border-gray-700">
                                                                <span className="text-gray-400">{selectedMonth + 1}월 {day}일</span>
                                                                <span className={dayData.approved ? 'text-green-400' : 'text-gray-500'}>
                                                                    {dayData.amount.toLocaleString()}원
                                                                </span>
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                                
                                {/* 월별 뷰 */}
                                {viewMode === 'monthly' && (
                                    <div className="glass-effect rounded-2xl p-8">
                                        <div className="text-center">
                                            <h3 className="text-3xl font-bold mb-2">{selectedYear}년 {selectedMonth + 1}월</h3>
                                            <p className="text-5xl font-black mb-4" style={{ color: '#00FF88' }}>
                                                {monthlyTotal.toLocaleString()}원
                                            </p>
                                            <div className="grid grid-cols-2 gap-4 mt-8">
                                                <div className="bg-gray-800/50 rounded-xl p-4">
                                                    <p className="text-gray-400 mb-2">승인된 매출</p>
                                                    <p className="text-2xl font-bold text-green-400">
                                                        {Object.entries(salesData).filter(([_, data]) => data.approved).length}건
                                                    </p>
                                                </div>
                                                <div className="bg-gray-800/50 rounded-xl p-4">
                                                    <p className="text-gray-400 mb-2">평균 일매출</p>
                                                    <p className="text-2xl font-bold">
                                                        {Math.floor(monthlyTotal / getDaysInMonth()).toLocaleString()}원
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* 주간 매출 합계 */}
                        <div className="gradient-border mb-8">
                            <div>
                                <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                    <div className="p-2 bg-blue-500/20 rounded-lg">
                                        <Icon icon={TrendingUp} size={28} style={{ color: '#00C6FF' }} />
                                    </div>
                                    주간 매출 합계
                                </h2>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                    {weeklySales.map((week, index) => (
                                        <div key={index} className="glass-effect rounded-2xl p-5 hover:scale-105 transition-all duration-300">
                                            <div className="flex flex-col">
                                                <span className="text-sm text-gray-400 mb-2">
                                                    {week.days[0]}일 - {week.days[week.days.length - 1]}일
                                                </span>
                                                <span className="text-2xl font-black" style={{ color: '#00C6FF' }}>
                                                    {(week.total || 0).toLocaleString()}원
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* 월간 총계 및 인센티브 */}
                        <div className="gradient-border glow-green">
                            <div className="bg-gradient-to-br from-gray-800/50 to-gray-900/50">
                                <h2 className="text-3xl font-black mb-8 text-center text-white">
                                    월간 급여 계산
                                </h2>
                                
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 text-center mb-6 sm:mb-8">
                                    <div className="glass-effect rounded-2xl p-4 sm:p-6 hover:scale-105 transition-all duration-300">
                                        <p className="text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 font-semibold">월간 총매출</p>
                                        <p className="text-2xl sm:text-3xl font-black" style={{ color: '#FF8C00' }}>{(monthlyTotal || 0).toLocaleString()}원</p>
                                    </div>
                                    
                                    <div className="glass-effect rounded-2xl p-4 sm:p-6 hover:scale-105 transition-all duration-300">
                                        <p className="text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 font-semibold">인센티브율 ({employeeType === 'full' ? '정직원' : '파트타임'})</p>
                                        <p className="text-2xl sm:text-3xl font-black" style={{ color: '#00C6FF' }}>{incentiveRate || 0}%</p>
                                    </div>
                                    
                                    <div className="glass-effect rounded-2xl p-4 sm:p-6 hover:scale-105 transition-all duration-300">
                                        <p className="text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 font-semibold">인센티브 금액</p>
                                        <p className="text-2xl sm:text-3xl font-black" style={{ color: '#00FF88' }}>
                                            {Math.floor(incentiveAmount || 0).toLocaleString()}원
                                        </p>
                                    </div>
                                </div>

                                {/* 인센티브 기준표 */}
                                <div className="glass-effect rounded-2xl p-6">
                                    <p className="text-lg font-bold text-center mb-4 text-gray-300">
                                        인센티브 기준표 ({employeeType === 'full' ? '정직원' : '파트타임'})
                                    </p>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 text-xs text-center">
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">2,500만원 미만</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#FF6B6B' }}>{employeeType === 'full' ? '4%' : '2%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">2,500만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#FF9F40' }}>{employeeType === 'full' ? '5%' : '2.5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">3,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#FFD93D' }}>{employeeType === 'full' ? '6%' : '3%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">3,500만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#6BCF7F' }}>{employeeType === 'full' ? '7%' : '3.5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">4,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#4ECDC4' }}>{employeeType === 'full' ? '8%' : '4%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">4,500만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#45B7D1' }}>{employeeType === 'full' ? '9%' : '4.5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">5,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#5D5FEF' }}>{employeeType === 'full' ? '10%' : '5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">6,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#A55FEB' }}>{employeeType === 'full' ? '12%' : '6%'}</p>
                                        </div>
                                    </div>
                                    
                                    {/* 정직원/파트타임 비교표 */}
                                    <div className="mt-6 glass-effect rounded-2xl p-6">
                                        <p className="text-lg font-bold mb-4 text-center">현재 매출 기준 인센티브 비교</p>
                                        <div className="grid grid-cols-2 gap-4 text-center">
                                            <div 
                                                className={`rounded-xl p-4 cursor-pointer transition-all duration-300 ${
                                                    employeeType === 'full' 
                                                        ? 'scale-105 shadow-lg text-white' 
                                                        : 'glass-effect hover:scale-105 hover:border-gray-400'
                                                }`}
                                                style={employeeType === 'full' ? { 
                                                    backgroundColor: '#0a4a2c', 
                                                    border: '2px solid #00FF88',
                                                    boxShadow: '0 0 20px rgba(0, 255, 136, 0.6), inset 0 0 20px rgba(0, 255, 136, 0.2)'
                                                } : {}}
                                                onClick={() => setEmployeeType('full')}
                                            >
                                                <p className={`text-sm font-semibold mb-2 ${employeeType === 'full' ? 'text-green-400' : ''}`}>정직원</p>
                                                <p className={`font-black text-2xl mb-2 ${employeeType === 'full' ? 'text-green-400' : ''}`} style={employeeType === 'full' ? { textShadow: '0 0 10px rgba(0, 255, 136, 0.8)' } : {}}>{getIncentiveRate(monthlyTotal, 'full')}%</p>
                                                <p className={`text-sm ${employeeType === 'full' ? 'text-green-400' : 'opacity-80'}`}>
                                                    {Math.floor((monthlyTotal || 0) * (getIncentiveRate(monthlyTotal, 'full') / 100)).toLocaleString()}원
                                                </p>
                                            </div>
                                            <div 
                                                className={`rounded-xl p-4 cursor-pointer transition-all duration-300 ${
                                                    employeeType === 'part' 
                                                        ? 'scale-105 shadow-lg text-white' 
                                                        : 'glass-effect hover:scale-105 hover:border-gray-400'
                                                }`}
                                                style={employeeType === 'part' ? { 
                                                    backgroundColor: '#0a4a2c', 
                                                    border: '2px solid #00FF88',
                                                    boxShadow: '0 0 20px rgba(0, 255, 136, 0.6), inset 0 0 20px rgba(0, 255, 136, 0.2)'
                                                } : {}}
                                                onClick={() => setEmployeeType('part')}
                                            >
                                                <p className={`text-sm font-semibold mb-2 ${employeeType === 'part' ? 'text-green-400' : ''}`}>파트타임</p>
                                                <p className={`font-black text-2xl mb-2 ${employeeType === 'part' ? 'text-green-400' : ''}`} style={employeeType === 'part' ? { textShadow: '0 0 10px rgba(0, 255, 136, 0.8)' } : {}}>{getIncentiveRate(monthlyTotal, 'part')}%</p>
                                                <p className={`text-sm ${employeeType === 'part' ? 'text-green-400' : 'opacity-80'}`}>
                                                    {Math.floor((monthlyTotal || 0) * (getIncentiveRate(monthlyTotal, 'part') / 100)).toLocaleString()}원
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<NeoFitPayCalc />);
    </script>
</body>
</html>
