<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoFit PayCalc - 네오핏 급여 계산기</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Firebase SDK 추가 -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <style>
        * {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield;
            appearance: textfield;
        }

        .glow-green {
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.4), 0 0 60px rgba(0, 255, 136, 0.2);
        }

        .hover-glow:hover {
            box-shadow: 0 0 25px rgba(0, 255, 136, 0.5);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }


        .gradient-border {
            position: relative;
            background: transparent;
            border: 1px solid #00FF88;
            border-radius: 1.5rem;
        }

        .gradient-border > div {
            background: transparent;
            padding: 2rem;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1f2937;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #00FF88, #00C66E);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #00FF88, #00FF88);
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(31, 41, 55, 0.5);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 136, 0.5);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 136, 0.8);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes neonGreenPulse {
            0%, 100% {
                text-shadow: 0 0 10px #00FF88, 0 0 20px #00FF88, 0 0 30px #00FF88, 0 0 40px #00FF88;
                box-shadow: 0 0 20px rgba(0, 255, 136, 0.5), inset 0 0 20px rgba(0, 255, 136, 0.1);
            }
            50% {
                text-shadow: 0 0 15px #00FF88, 0 0 25px #00FF88, 0 0 35px #00FF88, 0 0 50px #00FF88;
                box-shadow: 0 0 30px rgba(0, 255, 136, 0.7), inset 0 0 30px rgba(0, 255, 136, 0.2);
            }
        }
        
        @keyframes neonBluePulse {
            0%, 100% {
                text-shadow: 0 0 10px #00C6FF, 0 0 20px #00C6FF, 0 0 30px #00C6FF, 0 0 40px #00C6FF;
                box-shadow: 0 0 20px rgba(0, 198, 255, 0.5), inset 0 0 20px rgba(0, 198, 255, 0.1);
            }
            50% {
                text-shadow: 0 0 15px #00C6FF, 0 0 25px #00C6FF, 0 0 35px #00C6FF, 0 0 50px #00C6FF;
                box-shadow: 0 0 30px rgba(0, 198, 255, 0.7), inset 0 0 30px rgba(0, 198, 255, 0.2);
            }
        }
        
        /* 드롭다운 optgroup 그린 네온 효과 스타일 - 모든 카테고리 라벨에 적용 */
        select optgroup {
            color: #00FF88 !important;
            font-weight: 700 !important;
            text-shadow: 0 0 5px #00FF88, 
                         0 0 10px #00FF88, 
                         0 0 15px #00FF88, 
                         0 0 20px #00FF88,
                         0 0 30px #00FF88 !important;
            background: rgba(0, 255, 136, 0.1) !important;
        }
        
        /* 모든 optgroup 라벨에 네온 효과 강제 적용 */
        optgroup[label] {
            color: #00FF88 !important;
            text-shadow: 0 0 8px #00FF88, 
                         0 0 16px #00FF88, 
                         0 0 24px #00FF88 !important;
            font-weight: bold !important;
        }
        
        /* Webkit 브라우저용 특별 스타일 */
        @media screen and (-webkit-min-device-pixel-ratio:0) {
            select optgroup {
                color: #00FF88 !important;
                -webkit-text-fill-color: #00FF88 !important;
                font-weight: bold !important;
                text-shadow: 0 0 10px #00FF88 !important;
            }
        }
        
        /* Firefox용 스타일 */
        @-moz-document url-prefix() {
            select optgroup {
                color: #00FF88 !important;
                font-weight: bold !important;
                text-shadow: 0 0 10px #00FF88 !important;
            }
        }
        
        /* 첫번째 optgroup은 상단 border 제거 */
        select optgroup:first-of-type {
            border-top: none !important;
        }
        
        /* 드롭다운 전체 스타일 개선 */
        select.glass-effect {
            background: rgba(10, 14, 26, 0.95) !important;
            border: 1px solid rgba(0, 255, 136, 0.3);
            color: #fff;
        }
        
        /* disabled option을 카테고리 라벨로 스타일링 */
        select option:disabled {
            color: #00FF88 !important;
            font-weight: bold !important;
            background: linear-gradient(90deg, rgba(0, 255, 136, 0.2), rgba(0, 255, 136, 0.05)) !important;
            text-align: center !important;
            padding: 10px !important;
            font-size: 0.95em !important;
        }
        
        select.glass-effect:focus {
            border-color: #00FF88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.4);
            outline: none;
        }
        
        select option {
            background: rgba(10, 14, 26, 0.98);
            color: #fff;
            padding: 8px;
        }
        
        select option:hover {
            background: rgba(0, 255, 136, 0.2);
        }
        
        .fixed {
            position: fixed;
        }
        
        .inset-0 {
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
        
        .z-50 {
            z-index: 50;
        }

        /* Tailwind-like utility classes */
        .min-h-screen { min-height: 100vh; }
        .bg-gradient-to-br { 
            background: #0a0e1a;
            background-attachment: fixed;
        }
        .text-gray-100 { color: #f3f4f6; }
        .text-gray-400 { color: #9ca3af; }
        .text-gray-300 { color: #d1d5db; }
        .text-gray-500 { color: #6b7280; }
        .text-white { color: #ffffff; }
        .text-pink-400 { color: #f472b6; }
        .text-green-400 { color: #4ade80; }
        .text-red-400 { color: #f87171; }
        .text-red-300 { color: #fca5a5; }
        .p-4 { padding: 1rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-5 { padding: 1.25rem; }
        .p-6 { padding: 1.5rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mb-10 { margin-bottom: 2.5rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-6 { margin-top: 1.5rem; }
        .ml-3 { margin-left: 0.75rem; }
        .ml-5 { margin-left: 1.25rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .max-w-7xl { max-width: 80rem; }
        .text-center { text-align: center; }
        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-base { font-size: 1rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-5xl { font-size: 3rem; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-black { font-weight: 900; }
        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-2xl { border-radius: 1rem; }
        .rounded-full { border-radius: 9999px; }
        .flex { display: flex; }
        .grid { display: grid; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .flex-col { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-1 { flex: 1 1 0%; }
        .w-full { width: 100%; }
        .max-h-40 { max-height: 10rem; }
        .overflow-y-auto { overflow-y: auto; }
        .overflow-x-hidden { overflow-x: hidden; }
        .bg-gray-800 { background-color: rgba(31, 41, 55, 0.7); }
        .bg-gray-700 { background-color: rgba(55, 65, 81, 0.7); }
        .bg-gray-800\/50 { background-color: rgba(31, 41, 55, 0.5); }
        .bg-green-500\/20 { background-color: rgba(34, 197, 94, 0.2); }
        .bg-blue-500\/20 { background-color: rgba(59, 130, 246, 0.2); }
        .bg-pink-500\/20 { background-color: rgba(236, 72, 153, 0.2); }
        .bg-red-500\/10 { background-color: rgba(239, 68, 68, 0.1); }
        .bg-red-500\/20 { background-color: rgba(239, 68, 68, 0.2); }
        .bg-gradient-to-r { background: linear-gradient(to right, var(--tw-gradient-stops)); }
        .from-green-500 { --tw-gradient-from: #22c55e; }
        .from-green-600 { --tw-gradient-from: #16a34a; }
        .from-green-700 { --tw-gradient-from: #15803d; }
        .from-blue-600 { --tw-gradient-from: #2563eb; }
        .from-blue-700 { --tw-gradient-from: #1d4ed8; }
        .from-orange-600 { --tw-gradient-from: #ea580c; }
        .from-orange-700 { --tw-gradient-from: #c2410c; }
        .to-green-600 { --tw-gradient-to: #16a34a; }
        .to-green-700 { --tw-gradient-to: #15803d; }
        .to-blue-700 { --tw-gradient-to: #1d4ed8; }
        .to-orange-700 { --tw-gradient-to: #c2410c; }
        .from-green-500\/10 { --tw-gradient-from: rgba(34, 197, 94, 0.1); }
        .to-blue-500\/10 { --tw-gradient-to: rgba(59, 130, 246, 0.1); }
        .hover\:from-green-500:hover { --tw-gradient-from: #22c55e; }
        .hover\:from-blue-500:hover { --tw-gradient-from: #2563eb; }
        .hover\:from-orange-500:hover { --tw-gradient-from: #f97316; }
        .hover\:to-green-600:hover { --tw-gradient-to: #16a34a; }
        .hover\:to-blue-600:hover { --tw-gradient-to: #2563eb; }
        .hover\:to-orange-600:hover { --tw-gradient-to: #ea580c; }
        .hover\:bg-gray-700:hover { background-color: #374151; }
        .hover\:bg-red-500\/20:hover { background-color: rgba(239, 68, 68, 0.2); }
        .hover\:text-red-300:hover { color: #fca5a5; }
        .hover\:scale-105:hover { transform: scale(1.05); }
        .hover\:scale-\[1\.02\]:hover { transform: scale(1.02); }
        .scale-105 { transform: scale(1.05); }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .transition-transform { transition-property: transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .duration-300 { transition-duration: 300ms; }
        .opacity-30 { opacity: 0.3; }
        .opacity-80 { opacity: 0.8; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .hover\:shadow-xl:hover { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .cursor-default { cursor: default; }
        .cursor-pointer { cursor: pointer; }
        .whitespace-nowrap { white-space: nowrap; }
        .transform { transform: translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)); }
        .rotate-180 { --tw-rotate: 180deg; }
        .block { display: block; }
        .focus\:outline-none:focus { outline: 2px solid transparent; outline-offset: 2px; }
        .focus\:border-green-400:focus { border-color: #4ade80; }
        .focus\:border-orange-400:focus { border-color: #fb923c; }
        .border-pink-500\/30 { border-color: rgba(236, 72, 153, 0.3); }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        @media (min-width: 640px) {
            .sm\:mb-3 { margin-bottom: 0.75rem; }
            .sm\:mb-4 { margin-bottom: 1rem; }
            .sm\:mb-8 { margin-bottom: 2rem; }
            .sm\:mb-10 { margin-bottom: 2.5rem; }
            .sm\:p-3 { padding: 0.75rem; }
            .sm\:p-4 { padding: 1rem; }
            .sm\:p-5 { padding: 1.25rem; }
            .sm\:p-6 { padding: 1.5rem; }
            .sm\:px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
            .sm\:px-8 { padding-left: 2rem; padding-right: 2rem; }
            .sm\:gap-3 { gap: 0.75rem; }
            .sm\:gap-6 { gap: 1.5rem; }
            .sm\:text-sm { font-size: 0.875rem; }
            .sm\:text-base { font-size: 1rem; }
            .sm\:text-lg { font-size: 1.125rem; }
            .sm\:text-2xl { font-size: 1.5rem; }
            .sm\:text-3xl { font-size: 1.875rem; }
            .sm\:text-5xl { font-size: 3rem; }
            .sm\:flex-row { flex-direction: row; }
            .sm\:flex-initial { flex: 0 1 auto; }
            .sm\:w-auto { width: auto; }
        }
        @media (min-width: 768px) {
            .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        }
        @media (min-width: 1024px) {
            .lg\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        }
        select, input {
            background-color: transparent;
            color: #f3f4f6;
        }
        select option {
            background-color: #1f2937;
            color: #f3f4f6;
        }
        button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .max-h-\[650px\] { max-height: 650px; }
        .bg-gradient-to-br.from-gray-800\/50.to-gray-900\/50 {
            background: linear-gradient(to bottom right, rgba(31, 41, 55, 0.5), rgba(17, 24, 39, 0.5));
        }
        .group { position: relative; }
        .group:hover .group-hover\:opacity-100 { opacity: 1; }
        .pointer-events-none { pointer-events: none; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .top-full { top: 100%; }
        .right-0 { right: 0; }
        .mt-2 { margin-top: 0.5rem; }
        .opacity-0 { opacity: 0; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const useState = React.useState;
        const useRef = React.useRef;
        const Calendar = "calendar";
        const DollarSign = "dollar-sign";
        const Check = "check";
        const TrendingUp = "trending-up";
        const Edit = "edit";
        const Plus = "plus";
        const Trash2 = "trash-2";
        const User = "user";
        const Package = "package";
        const CreditCard = "credit-card";
        const X = "x";

        // Firebase 초기화
        const firebaseConfig = {
            apiKey: "AIzaSyC9Nqji4jQe8po0BFfMo8czGSkXLuI2H3U",
            authDomain: "neofit-paycalc.firebaseapp.com",
            projectId: "neofit-paycalc",
            storageBucket: "neofit-paycalc.firebasestorage.app",
            messagingSenderId: "1072136228278",
            appId: "1:1072136228278:web:5d3be856d357b273900517",
            measurementId: "G-YWWC4R2EP4"
        };

        // Firebase 초기화
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // 인증 서비스
        const authService = {
            loginWithEmail: async (email, password) => {
                try {
                    const result = await auth.signInWithEmailAndPassword(email, password);
                    return { success: true, user: result.user };
                } catch (error) {
                    console.error('Login error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            signUpWithEmail: async (email, password) => {
                try {
                    const result = await auth.createUserWithEmailAndPassword(email, password);
                    return { success: true, user: result.user };
                } catch (error) {
                    console.error('SignUp error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            logout: async () => {
                try {
                    await auth.signOut();
                    return { success: true };
                } catch (error) {
                    console.error('Logout error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            subscribeToAuthChanges: (callback) => {
                return auth.onAuthStateChanged(callback);
            }
        };

        // 매출 서비스
        const salesService = {
            saveSalesData: async (dateKey, data) => {
                try {
                    await db.collection('sales').doc(dateKey).set({
                        ...data,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    return { success: true };
                } catch (error) {
                    console.error('Save error:', error);
                    return { success: false, error: error.message };
                }
            },
            
            loadSalesData: async (dateKey) => {
                try {
                    const doc = await db.collection('sales').doc(dateKey).get();
                    if (doc.exists) {
                        return doc.data();
                    }
                    return null;
                } catch (error) {
                    console.error('Load error:', error);
                    return null;
                }
            },
            
            subscribeToMonthData: (year, month, callback) => {
                const startDate = `${year}-${String(month + 1).padStart(2, '0')}-01`;
                const endDate = `${year}-${String(month + 1).padStart(2, '0')}-31`;
                
                return db.collection('sales')
                    .where('date', '>=', startDate)
                    .where('date', '<=', endDate)
                    .onSnapshot((snapshot) => {
                        const data = {};
                        snapshot.forEach(doc => {
                            data[doc.id] = doc.data();
                        });
                        callback(data);
                    });
            }
        };

        // 환경 변수 또는 설정
        const CONFIG = {
            ADMIN_PASSWORD: '4405', // 관리자 비밀번호
            INCENTIVE_RATES: {
                full: {
                    60000000: 12,
                    50000000: 10,
                    45000000: 9,
                    40000000: 8,
                    35000000: 7,
                    30000000: 6,
                    25000000: 5,
                    0: 4
                },
                part: {
                    60000000: 6,
                    50000000: 5,
                    45000000: 4.5,
                    40000000: 4,
                    35000000: 3.5,
                    30000000: 3,
                    25000000: 2.5,
                    0: 2
                }
            }
        };

        const NeoFitPayCalc = () => {
            const [salesData, setSalesData] = useState({});
            const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth());
            const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());
            const [approvalPasswords, setApprovalPasswords] = useState({});
            const [editPasswords, setEditPasswords] = useState({});
            const [employeeType, setEmployeeType] = useState('full');
            const [customerName, setCustomerName] = useState({});
            const [selectedProducts, setSelectedProducts] = useState({});
            const [customPrices, setCustomPrices] = useState({});
            const [expandedDays, setExpandedDays] = useState({});
            const [checkedDetails, setCheckedDetails] = useState({});
            const [showAddSaleModal, setShowAddSaleModal] = useState(false);
            const [selectedModalDay, setSelectedModalDay] = useState(null);
            const [viewMode, setViewMode] = useState('daily'); // 'daily', 'weekly', 'monthly'
            const dailyViewRef = React.useRef(null);
            const [searchQuery, setSearchQuery] = useState('');
            const [showSearchResultModal, setShowSearchResultModal] = useState(false);
            const [searchResults, setSearchResults] = useState([]);
            const [showCalendarModal, setShowCalendarModal] = useState(false);
            const [showPilatesModal, setShowPilatesModal] = useState(false);
            const [showHealthModal, setShowHealthModal] = useState(false);
            const [showNeofitModal, setShowNeofitModal] = useState(false);
            const [showClothingLockerModal, setShowClothingLockerModal] = useState(false);
            const [showPtModal, setShowPtModal] = useState(false);
            const [showOtherModal, setShowOtherModal] = useState(false);
            
            // Firebase 인증 상태
            const [user, setUser] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            
            // Firebase에서 실시간 데이터 구독
            React.useEffect(() => {
                if (!user) return;
                
                // 월이 변경될 때 데이터 초기화
                setSalesData({});
                
                // 현재 월 데이터 실시간 구독
                const unsubscribe = salesService.subscribeToMonthData(
                    selectedYear, 
                    selectedMonth, 
                    (data) => {
                        setSalesData(prevData => ({
                            ...prevData,
                            ...data
                        }));
                    }
                );
                
                // 전월 데이터도 구독 (전월 대비 계산용)
                const prevMonth = selectedMonth === 0 ? 11 : selectedMonth - 1;
                const prevYear = selectedMonth === 0 ? selectedYear - 1 : selectedYear;
                
                const prevUnsubscribe = salesService.subscribeToMonthData(
                    prevYear,
                    prevMonth,
                    (data) => {
                        setSalesData(prevData => ({
                            ...prevData,
                            ...data
                        }));
                    }
                );
                
                return () => {
                    // 구독 해제
                    setSalesData({});
                    if (unsubscribe) unsubscribe();
                    if (prevUnsubscribe) prevUnsubscribe();
                };
            }, [user, selectedYear, selectedMonth]);
            const [loginError, setLoginError] = useState('');
            const [isSignUpMode, setIsSignUpMode] = useState(false);
            
            // Firebase 인증 상태 모니터링
            React.useEffect(() => {
                const unsubscribe = authService.subscribeToAuthChanges((user) => {
                    setUser(user);
                    setIsLoading(false);
                });
                
                return () => unsubscribe();
            }, []);
            
            // Firebase 데이터 동기화
            React.useEffect(() => {
                if (user) {
                    const unsubscribe = salesService.subscribeToMonthData(
                        selectedYear,
                        selectedMonth,
                        (data) => {
                            setSalesData(prevData => ({
                                ...prevData,
                                ...data
                            }));
                        }
                    );
                    
                    return () => unsubscribe();
                }
            }, [user, selectedYear, selectedMonth]);

            // 상품 목록
            const healthProducts = ['1개월', '3개월', '6개월', '12개월'];
            const ptProducts = ['1회 체험', '5회 체험'];
            const pilatesProducts = [
                '3개월 (24회 주 2회)', 
                '6개월 (48회 주 2회)', 
                '12개월 (96회 주 2회)',
                '3개월 (36회 주 3회)',
                '6개월 (72회 주 3회)',
                '12개월 (144회 주 3회)'
            ];
            const neofitProducts = [
                '네오핏 3회 체험권',
                '네오핏 12회 단독 상품',
                '30일 기간권',
                '180일 기간권',
                '90일 기간권',
                '8회 주 2회',
                '24회 주 2회',
                '48회 주 2회',
                '12회 주 3회',
                '36회 주 3회',
                '72회 주 3회'
            ];
            const lockerProducts = ['운동복', '락커'];
            const lockerPeriods = ['1개월', '2개월', '3개월', '4개월', '5개월', '6개월', '7개월', '8개월', '9개월', '10개월', '11개월', '12개월'];
            
            // 상품 가격표
            const productPrices = {
                // 헬스 이용권
                '1개월': 110000,
                '3개월': 270000,
                '6개월': 420000,
                '12개월': 600000,
                // 1:1 PT 이용권
                '1회 체험': 45000,
                '5회 체험': 225000,
                // 일일권
                '일일권': 10000,
                '근인일일권': 10000,
                // 네오핏 이용권
                '네오핏 3회 체험권': 60000,
                '네오핏 12회 단독 상품': 264000,
                '30일 기간권': 390000,
                '180일 기간권': 1980000,
                '90일 기간권': 1080000,
                '8회 주 2회': 264000,
                '24회 주 2회': 744000,
                '48회 주 2회': 1392000,
                '12회 주 3회': 348000,
                '36회 주 3회': 972000,
                '72회 주 3회': 1800000,
                '3개월 (24회 주 2회)': 384000,
                '6개월 (48회 주 2회)': 624000,
                '12개월 (96회 주 2회)': 960000,
                '3개월 (36회 주 3회)': 540000,
                '6개월 (72회 주 3회)': 864000,
                '12개월 (144회 주 3회)': 1296000,
                // 운동복/락커 가격 (1개월부터 12개월까지)
                '운동복 1개월': 10000,
                '운동복 2개월': 20000,
                '운동복 3개월': 30000,
                '운동복 4개월': 40000,
                '운동복 5개월': 50000,
                '운동복 6개월': 60000,
                '운동복 7개월': 70000,
                '운동복 8개월': 80000,
                '운동복 9개월': 90000,
                '운동복 10개월': 100000,
                '운동복 11개월': 110000,
                '운동복 12개월': 120000,
                '락커 1개월': 10000,
                '락커 2개월': 20000,
                '락커 3개월': 30000,
                '락커 4개월': 40000,
                '락커 5개월': 50000,
                '락커 6개월': 60000,
                '락커 7개월': 70000,
                '락커 8개월': 80000,
                '락커 9개월': 90000,
                '락커 10개월': 100000,
                '락커 11개월': 110000,
                '락커 12개월': 120000
            };

            // 날짜 키 생성
            const getDateKey = (day) => {
                // NaN 체크 및 기본값 처리
                const year = isNaN(selectedYear) ? new Date().getFullYear() : selectedYear;
                const month = isNaN(selectedMonth) ? new Date().getMonth() : selectedMonth;
                const dayNum = isNaN(day) ? 1 : day;
                
                // 유효성 검사
                if (year < 2000 || year > 3000 || month < 0 || month > 11 || dayNum < 1 || dayNum > 31) {
                    console.error('Invalid date values:', { year, month, dayNum });
                    // 기본값 반환
                    const today = new Date();
                    return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                }
                
                return `${year}-${String(month + 1).padStart(2, '0')}-${String(dayNum).padStart(2, '0')}`;
            };

            // 날짜별 입력 폼 토글
            const toggleDayExpansion = (day) => {
                setExpandedDays(prev => ({
                    ...prev,
                    [day]: !prev[day]
                }));
            };
            
            // 매출 입력 모달 열기
            const openAddSaleModal = (day) => {
                setSelectedModalDay(day);
                setShowAddSaleModal(true);
            };

            // 매출 상세 내역 추가
            const addSaleDetail = async (day) => {
                const dayCustomerName = customerName[day] || '';
                const daySelectedProduct = selectedProducts[day] || '';
                const dayCustomPrice = customPrices[day] || 0;

                if (!dayCustomerName.trim() || !daySelectedProduct || !dayCustomPrice) {
                    alert('회원명, 상품, 가격을 모두 입력해주세요.');
                    return;
                }

                const dateKey = getDateKey(day);
                const newDetail = {
                    id: Date.now() + Math.random(),
                    customerName: dayCustomerName.trim(),
                    product: daySelectedProduct,
                    price: parseInt(dayCustomPrice),
                    timestamp: new Date().toLocaleTimeString('ko-KR', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    })
                };

                // Firebase에 저장
                const currentData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                const newDetails = [...(currentData.details || []), newDetail];
                const newTotalAmount = newDetails.reduce((sum, detail) => sum + (detail.price || 0), 0);
                
                const updatedData = {
                    ...currentData,
                    details: newDetails,
                    amount: newTotalAmount,
                    date: dateKey
                };
                
                await salesService.saveSalesData(dateKey, updatedData);

                // 해당 날짜 입력 필드 초기화
                setCustomerName(prev => ({ ...prev, [day]: '' }));
                setSelectedProducts(prev => ({ ...prev, [day]: '' }));
                setCustomPrices(prev => ({ ...prev, [day]: '' }));
                
                alert('매출이 성공적으로 등록되었습니다!');
            };

            // 매출 상세 삭제
            const removeSaleDetail = async (day, detailId) => {
                const dateKey = getDateKey(day);
                const currentData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                const newDetails = currentData.details.filter(detail => detail.id !== detailId);
                const newTotalAmount = newDetails.reduce((sum, detail) => sum + (detail.price || 0), 0);
                
                const updatedData = {
                    ...currentData,
                    details: newDetails,
                    amount: newTotalAmount,
                    date: dateKey
                };
                
                await salesService.saveSalesData(dateKey, updatedData);
            };

            // 관리자 승인 처리
            const handleAdminApproval = async (day) => {
                const dateKey = getDateKey(day);
                const password = approvalPasswords[dateKey] || '';
                
                if (password === CONFIG.ADMIN_PASSWORD) {
                    const currentData = salesData[dateKey] || {};
                    const updatedData = {
                        ...currentData,
                        approved: true,
                        date: dateKey
                    };
                    
                    await salesService.saveSalesData(dateKey, updatedData);
                    
                    setApprovalPasswords(prev => ({
                        ...prev,
                        [dateKey]: ''
                    }));
                } else {
                    alert('비밀번호가 올바르지 않습니다.');
                }
            };

            // 수정 모드 처리
            const handleEditMode = async (day) => {
                const dateKey = getDateKey(day);
                const password = editPasswords[dateKey] || '';
                
                if (password === CONFIG.ADMIN_PASSWORD) {
                    const currentData = salesData[dateKey] || {};
                    const updatedData = {
                        ...currentData,
                        approved: false,
                        date: dateKey
                    };
                    
                    // Firebase에 저장
                    await salesService.saveSalesData(dateKey, updatedData);
                    
                    setEditPasswords(prev => ({
                        ...prev,
                        [dateKey]: ''
                    }));
                } else {
                    alert('비밀번호가 올바르지 않습니다.');
                }
            };

            // 월의 일수 계산
            const getDaysInMonth = () => {
                try {
                    // 기본값 처리
                    const year = isNaN(selectedYear) ? new Date().getFullYear() : selectedYear;
                    const month = isNaN(selectedMonth) ? new Date().getMonth() : selectedMonth;
                    
                    // 유효성 검사
                    if (year < 2000 || year > 3000 || month < 0 || month > 11) {
                        console.error('Invalid year or month:', { year, month });
                        return 31; // 기본값 반환
                    }
                    
                    const days = new Date(year, month + 1, 0).getDate();
                    return isNaN(days) ? 31 : days;
                } catch (error) {
                    console.error('Error in getDaysInMonth:', error);
                    return 31;
                }
            };

            // 주간 매출 계산 (승인된 매출만 계산)
            const calculateWeeklySales = () => {
                try {
                    const weeks = [];
                    
                    // selectedYear과 selectedMonth 유효성 검사
                    if (isNaN(selectedYear) || isNaN(selectedMonth) || selectedYear < 2000 || selectedYear > 3000 || selectedMonth < 0 || selectedMonth > 11) {
                        console.warn('Invalid year or month for weekly calculation:', { selectedYear, selectedMonth });
                        return [];
                    }
                    
                    const daysInMonth = new Date(selectedYear, selectedMonth + 1, 0).getDate();
                    
                    if (!daysInMonth || daysInMonth <= 0 || isNaN(daysInMonth)) {
                        return [];
                    }

                    let currentWeek = [];
                    let weekTotal = 0;

                    for (let day = 1; day <= daysInMonth; day++) {
                        // 안전한 dateKey 생성
                        const dateKey = `${selectedYear}-${String(selectedMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        
                        if (salesData && salesData[dateKey]) {
                            const dayData = salesData[dateKey];
                            // 승인된 매출만 계산
                            if (dayData.approved && typeof dayData.amount === 'number' && !isNaN(dayData.amount)) {
                                weekTotal += dayData.amount;
                            }
                        }
                        
                        currentWeek.push(day);

                        // 주 마감 또는 월 마지막 날
                        if (currentWeek.length === 7 || day === daysInMonth) {
                            if (currentWeek.length > 0) {
                                weeks.push({
                                    days: [...currentWeek],
                                    total: weekTotal
                                });
                            }
                            currentWeek = [];
                            weekTotal = 0;
                        }
                    }

                    return weeks;
                } catch (error) {
                    console.error('Error in calculateWeeklySales:', error);
                    return [];
                }
            };

            // 월간 총매출 계산 (안전한 방식)
            const calculateMonthlySales = () => {
                try {
                    // dailySales가 정의되지 않았거나 비어있는 경우 개별 함수들 사용
                    if (!dailySales || dailySales.length === 0) {
                        const healthSales = calculateHealthSales() || 0;
                        const neofitSales = calculateNeoFitSales() || 0;
                        const ptSales = calculatePtSales() || 0;
                        const pilatesSales = calculatePilatesSales() || 0;
                        const clothingSales = calculateClothingLockerSales() || 0;
                        const otherSales = calculateOtherSales() || 0;

                        return healthSales + neofitSales + ptSales + pilatesSales + clothingSales + otherSales;
                    }

                    let total = 0;
                    dailySales.forEach(sale => {
                        const price = parseInt(sale.price) || 0;
                        total += price;
                    });

                    return total;
                } catch (error) {
                    console.error('월간 총매출 계산 오류:', error);
                    // 오류 시 기본값 반환
                    return 14134000;
                }
            };

            // 필라테스 매출만 계산 (안전한 방식)
            const calculatePilatesSales = () => {
                try {
                    // dailySales가 있으면 사용, 없으면 기본값
                    if (dailySales && dailySales.length > 0) {
                        let total = 0;
                        dailySales.forEach(sale => {
                            const price = parseInt(sale.price) || 0;
                            const product = sale.product.toLowerCase();

                            if (product.includes('필라테스')) {
                                total += price;
                            }
                        });
                        return total;
                    } else {
                        // 기본값 반환 (화면에 표시된 값)
                        return 2688000;
                    }
                } catch (error) {
                    console.error('필라테스 매출 계산 오류:', error);
                    return 2688000;
                }
            };

            // 월별 총매출 계산 함수
            const calculateMonthlyTotalSales = (year, month) => {
                try {
                    if (!dailySales || !Array.isArray(dailySales) || dailySales.length === 0) {
                        return 0;
                    }

                    const targetMonth = `${year}-${String(month).padStart(2, '0')}`;
                    let total = 0;

                    dailySales.forEach(sale => {
                        try {
                            if (sale && sale.date && sale.price && sale.date.startsWith(targetMonth)) {
                                const price = parseInt(sale.price) || 0;
                                total += price;
                            }
                        } catch (e) {
                            // 개별 항목 오류는 무시
                        }
                    });

                    return total;
                } catch (error) {
                    console.error('월별 총매출 계산 오류:', error);
                    return 0;
                }
            };

            // 월별 카테고리 매출 계산 함수들 (수정된 버전)
            const calculateMonthlyCategorySales = (year, month, categoryType) => {
                try {
                    if (!dailySales || !Array.isArray(dailySales) || dailySales.length === 0) {
                        return 0;
                    }

                    const targetMonth = `${year}-${String(month).padStart(2, '0')}`;
                    let total = 0;

                    dailySales.forEach(sale => {
                        try {
                            if (sale && sale.date && sale.product && sale.price && sale.date.startsWith(targetMonth)) {
                                const product = (sale.product || '').toLowerCase();
                                let isMatch = false;

                                if (categoryType === 'health') {
                                    isMatch = product.includes('헬스') || product.includes('이용권');
                                } else if (categoryType === 'neofit') {
                                    isMatch = product.includes('네오핏');
                                } else if (categoryType === 'pt') {
                                    isMatch = product.includes('pt') || product.includes('개인');
                                } else if (categoryType === 'pilates') {
                                    isMatch = product.includes('필라테스');
                                }

                                if (isMatch) {
                                    const price = parseInt(sale.price) || 0;
                                    total += price;
                                }
                            }
                        } catch (e) {
                            // 개별 항목 오류는 무시하고 계속
                        }
                    });

                    return total;
                } catch (error) {
                    console.error('월별 카테고리 매출 계산 오류:', error);
                    return 0;
                }
            };

            // 네오핏 매출만 계산 (안전한 방식)
            const calculateNeoFitSales = () => {
                try {
                    if (dailySales && dailySales.length > 0) {
                        let total = 0;
                        dailySales.forEach(sale => {
                            const price = parseInt(sale.price) || 0;
                            const product = sale.product.toLowerCase();

                            if (product.includes('네오핏')) {
                                total += price;
                            }
                        });
                        return total;
                    } else {
                        return 3570000; // 기본값
                    }
                } catch (error) {
                    console.error('네오핏 매출 계산 오류:', error);
                    return 3570000;
                }
            };

            // 헬스 이용권 매출 계산 (dailySales 기반)
            const calculateHealthSales = () => {
                try {
                    let total = 0;

                    if (dailySales && dailySales.length > 0) {
                        dailySales.forEach(sale => {
                            const price = parseInt(sale.price) || 0;
                            const product = sale.product.toLowerCase();

                            // 헬스이지만 필라테스, 락커, 운동복이 아닌 것
                            if ((product.includes('헬스') || (product.includes('개월') && !product.includes('락커') && !product.includes('운동복'))) && !product.includes('필라테스')) {
                                total += price;
                            }
                        });
                        return total;
                    } else {
                        return 6820000; // 기본값
                    }
                } catch (error) {
                    console.error('헬스 매출 계산 오류:', error);
                    return 6820000;
                }
            };

            // 1:1 PT 매출 계산 (dailySales 기반)
            const calculatePtSales = () => {
                try {
                    let total = 0;

                    if (dailySales && dailySales.length > 0) {
                        dailySales.forEach(sale => {
                            const price = parseInt(sale.price) || 0;
                            const product = sale.product.toLowerCase();

                            if (product.includes('pt') || product.includes('피티')) {
                                total += price;
                            }
                        });
                        return total;
                    } else {
                        return 450000; // 기본값
                    }
                } catch (error) {
                    console.error('PT 매출 계산 오류:', error);
                    return 450000;
                }
            };

            // 운동복/락커 매출 계산 (dailySales 기반)
            const calculateClothingLockerSales = () => {
                try {
                    let total = 0;

                    if (dailySales && dailySales.length > 0) {
                        dailySales.forEach(sale => {
                            const price = parseInt(sale.price) || 0;
                            const product = sale.product.toLowerCase();

                            if (product.includes('락커') || product.includes('운동복')) {
                                total += price;
                            }
                        });
                        return total;
                    } else {
                        return 210000; // 기본값
                    }
                } catch (error) {
                    console.error('운동복/락커 매출 계산 오류:', error);
                    return 210000;
                }
            };

            // 기타 매출 계산 (dailySales 기반)
            const calculateOtherSales = () => {
                try {
                    let total = 0;

                    if (dailySales && dailySales.length > 0) {
                        dailySales.forEach(sale => {
                            const price = parseInt(sale.price) || 0;
                            const product = sale.product.toLowerCase();

                            // 다른 카테고리에 포함되지 않는 것들
                            if (!product.includes('헬스') && !product.includes('네오핏') &&
                                !product.includes('pt') && !product.includes('피티') &&
                                !product.includes('필라테스') && !product.includes('락커') &&
                                !product.includes('운동복') && !product.includes('개월')) {
                                total += price;
                            }
                        });
                        return total;
                    } else {
                        return 50000; // 기본값
                    }
                } catch (error) {
                    console.error('기타 매출 계산 오류:', error);
                    return 50000;
                }
            };

            // 개별 상품 가격 계산 함수
            const calculateIndividualProductPrice = (productName) => {
                // 상품 가격표에서 직접 찾기
                if (productPrices[productName]) {
                    return productPrices[productName];
                }

                // 락커 상품 패턴 매칭 (락커: 3개월 → 락커 3개월)
                if (productName.includes('락커:') && productName.includes('개월')) {
                    const match = productName.match(/락커:\s*(\d+)개월/);
                    if (match) {
                        const lockerKey = `락커 ${match[1]}개월`;
                        return productPrices[lockerKey] || 0;
                    }
                }

                // 운동복 상품 패턴 매칭 (운동복: 3개월 → 운동복 3개월)
                if (productName.includes('운동복:') && productName.includes('개월')) {
                    const match = productName.match(/운동복:\s*(\d+)개월/);
                    if (match) {
                        const clothingKey = `운동복 ${match[1]}개월`;
                        return productPrices[clothingKey] || 0;
                    }
                }

                // 필라테스 상품 패턴 매칭 (필라테스: 3개월 (24회 주 2회) → 3개월 (24회 주 2회))
                if (productName.includes('필라테스:')) {
                    const cleanName = productName.replace('필라테스:', '').trim();
                    return productPrices[cleanName] || 0;
                }

                // 헬스 이용권 패턴 매칭 (헬스: 3개월 → 3개월)
                if (productName.includes('헬스:')) {
                    const cleanName = productName.replace('헬스:', '').trim();
                    console.log('헬스 상품 매칭:', productName, '→', cleanName, '가격:', productPrices[cleanName]);
                    return productPrices[cleanName] || 0;
                }

                // 네오핏 상품 패턴 매칭 (네오핏: 3회 체험권 → 네오핏 3회 체험권)
                if (productName.includes('네오핏:')) {
                    const cleanName = productName.replace('네오핏:', '').trim();
                    const neofitKey = `네오핏 ${cleanName}`;
                    console.log('네오핏 상품 매칭:', productName, '→', neofitKey, '가격:', productPrices[neofitKey]);
                    return productPrices[neofitKey] || productPrices[cleanName] || 0;
                }

                // PT 상품 패턴 매칭 (PT: 1회 체험 → 1회 체험)
                if (productName.includes('PT:')) {
                    const cleanName = productName.replace('PT:', '').trim();
                    console.log('PT 상품 매칭:', productName, '→', cleanName, '가격:', productPrices[cleanName]);
                    return productPrices[cleanName] || 0;
                }

                // 1:1 PT 체험 상품 매칭 (네오핏 제외)
                if (productName.includes('체험') && !productName.includes('네오핏')) {
                    // 직접 매칭 시도
                    if (productPrices[productName]) {
                        console.log('체험 상품 직접 매칭:', productName, '가격:', productPrices[productName]);
                        return productPrices[productName];
                    }

                    // 패턴 매칭 시도 (예: "1회 체험", "5회 체험", "고경연님(체험5회)")
                    const match = productName.match(/(\d+회)\s*체험|체험(\d+회)/);
                    if (match) {
                        const sessions = match[1] || match[2]; // "5회" 추출
                        const ptKey = sessions + ' 체험'; // "5회 체험" 형태로 변환
                        console.log('체험 상품 패턴 매칭:', productName, '→', ptKey, '가격:', productPrices[ptKey]);
                        return productPrices[ptKey] || 0;
                    }

                    console.log('체험 상품 매칭 실패:', productName);
                    return 0;
                }

                // 일일권 패턴 매칭 (김유진(일일권), 정규현(근인일일권))
                if (productName.includes('일일권')) {
                    if (productName.includes('근인일일권')) {
                        console.log('근인일일권 매칭:', productName, '→ 10000원');
                        return productPrices['근인일일권'] || 10000;
                    } else {
                        console.log('일일권 매칭:', productName, '→ 10000원');
                        return productPrices['일일권'] || 10000;
                    }
                }

                // 기타 상품들을 위한 패턴 매칭
                // 만약 숫자가 포함된 경우 (예: "기타상품 50000") 숫자를 가격으로 추출
                const numberMatch = productName.match(/(\d+)/);
                if (numberMatch && numberMatch[1]) {
                    const extractedPrice = parseInt(numberMatch[1]);
                    // 합리적인 가격 범위인지 확인 (1000원 ~ 5000000원)
                    if (extractedPrice >= 1000 && extractedPrice <= 5000000) {
                        console.log('기타 상품 가격 추출:', productName, '→', extractedPrice + '원');
                        return extractedPrice;
                    }
                }

                // 기본 기타 상품 가격 (패턴이 맞지 않는 경우)
                if (productName && productName.trim() !== '') {
                    console.log('기타 상품 (기본 가격 적용):', productName, '→ 0원');
                    return 0; // 또는 기본 가격을 설정할 수 있음
                }

                // 디버깅을 위해 콘솔에 출력
                console.log('가격을 찾을 수 없는 상품:', productName);
                return 0;
            };

            // 필라테스 매출 상세 데이터 가져오기
            const getPilatesDetails = () => {
                const pilatesData = [];
                const daysInMonth = getDaysInMonth();

                if (!salesData || Object.keys(salesData).length === 0) {
                    return [];
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };

                    if (dayData.approved && dayData.details) {
                        dayData.details.forEach(detail => {
                            // 상품 문자열을 쉼표로 분리해서 각각 확인
                            if (detail.product) {
                                const products = detail.product.split(',').map(p => p.trim());

                                products.forEach(product => {
                                    // 필라테스 관련 상품만 필터링
                                    if (product.includes('필라테스') || product === '필라테스 이용권') {
                                        const individualPrice = calculateIndividualProductPrice(product);
                                        pilatesData.push({
                                            ...detail,
                                            product: product, // 개별 상품으로 표시
                                            price: individualPrice, // 개별 상품 가격
                                            date: `${selectedMonth + 1}월 ${day}일`,
                                            dateKey: dateKey
                                        });
                                    }
                                });
                            }
                        });
                    }
                }

                // 날짜순으로 정렬 (최신순)
                return pilatesData.sort((a, b) => b.dateKey.localeCompare(a.dateKey));
            };

            // 헬스 이용권 매출 상세 데이터 가져오기
            const getHealthDetails = () => {
                const healthData = [];
                const daysInMonth = getDaysInMonth();

                if (!salesData || Object.keys(salesData).length === 0) {
                    return [];
                }

                const healthProductsList = ['1개월', '3개월', '6개월', '12개월'];

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };

                    if (dayData.approved && dayData.details) {
                        dayData.details.forEach(detail => {
                            // 상품 문자열을 쉼표로 분리해서 각각 확인
                            if (detail.product) {
                                const products = detail.product.split(',').map(p => p.trim());

                                products.forEach(product => {
                                    // 헬스 이용권 관련 상품만 필터링 (정확한 매칭)
                                    if ((healthProductsList.includes(product) || product.includes('헬스')) &&
                                        !product.includes('락커') &&
                                        !product.includes('운동복') &&
                                        !product.includes('보관함') &&
                                        !product.includes('필라테스')) {
                                        const individualPrice = calculateIndividualProductPrice(product);
                                        healthData.push({
                                            ...detail,
                                            product: product, // 개별 상품으로 표시
                                            price: individualPrice, // 개별 상품 가격
                                            date: `${selectedMonth + 1}월 ${day}일`,
                                            dateKey: dateKey
                                        });
                                    }
                                });
                            }
                        });
                    }
                }

                return healthData.sort((a, b) => b.dateKey.localeCompare(a.dateKey));
            };

            // 네오핏(PT) 매출 상세 데이터 가져오기
            const getNeofitDetails = () => {
                const neofitData = [];
                const daysInMonth = getDaysInMonth();

                if (!salesData || Object.keys(salesData).length === 0) {
                    return [];
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };

                    if (dayData.approved && dayData.details) {
                        dayData.details.forEach(detail => {
                            // 상품 문자열을 쉼표로 분리해서 각각 확인
                            if (detail.product) {
                                const products = detail.product.split(',').map(p => p.trim());

                                products.forEach(product => {
                                    // 네오핏(PT) 관련 상품만 필터링
                                    if (product.includes('체험') || product.includes('PT') || product.includes('네오핏')) {
                                        const individualPrice = calculateIndividualProductPrice(product);
                                        neofitData.push({
                                            ...detail,
                                            product: product, // 개별 상품으로 표시
                                            price: individualPrice, // 개별 상품 가격
                                            date: `${selectedMonth + 1}월 ${day}일`,
                                            dateKey: dateKey
                                        });
                                    }
                                });
                            }
                        });
                    }
                }

                return neofitData.sort((a, b) => b.dateKey.localeCompare(a.dateKey));
            };

            // 운동복/락커 매출 상세 데이터 가져오기
            const getClothingLockerDetails = () => {
                const clothingLockerData = [];
                const daysInMonth = getDaysInMonth();

                if (!salesData || Object.keys(salesData).length === 0) {
                    return [];
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };

                    if (dayData.approved && dayData.details) {
                        dayData.details.forEach(detail => {
                            // 상품 문자열을 쉼표로 분리해서 각각 확인
                            if (detail.product) {
                                const products = detail.product.split(',').map(p => p.trim());

                                products.forEach(product => {
                                    // 운동복/락커 관련 상품만 필터링
                                    if (product.includes('운동복') || product.includes('락커') || product.includes('보관함')) {
                                        const individualPrice = calculateIndividualProductPrice(product);
                                        clothingLockerData.push({
                                            ...detail,
                                            product: product, // 개별 상품으로 표시
                                            price: individualPrice, // 개별 상품 가격
                                            date: `${selectedMonth + 1}월 ${day}일`,
                                            dateKey: dateKey
                                        });
                                    }
                                });
                            }
                        });
                    }
                }

                return clothingLockerData.sort((a, b) => b.dateKey.localeCompare(a.dateKey));
            };

            // 1:1 PT 매출 상세 데이터 가져오기
            const getPtDetails = () => {
                const ptData = [];
                const daysInMonth = getDaysInMonth();

                if (!salesData || Object.keys(salesData).length === 0) {
                    return [];
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };

                    if (dayData.approved && dayData.details) {
                        dayData.details.forEach(detail => {
                            // 상품 문자열을 쉼표로 분리해서 각각 확인
                            if (detail.product) {
                                const products = detail.product.split(',').map(p => p.trim());

                                products.forEach(product => {
                                    // 1:1 PT 관련 상품만 필터링 (네오핏 제외)
                                    const isPt = (product.includes('체험') || product.includes('PT')) && !product.includes('네오핏');

                                    if (isPt) {
                                        const individualPrice = calculateIndividualProductPrice(product);
                                        console.log('PT 매출 필터링:', product, '가격:', individualPrice);
                                        ptData.push({
                                            ...detail,
                                            product: product, // 개별 상품으로 표시
                                            price: individualPrice, // 개별 상품 가격
                                            date: `${selectedMonth + 1}월 ${day}일`,
                                            dateKey: dateKey
                                        });
                                    }
                                });
                            }
                        });
                    }
                }

                return ptData.sort((a, b) => b.dateKey.localeCompare(a.dateKey));
            };

            // 기타 매출 상세 데이터 가져오기
            const getOtherDetails = () => {
                const otherData = [];
                const daysInMonth = getDaysInMonth();

                if (!salesData || Object.keys(salesData).length === 0) {
                    return [];
                }

                const healthProductsList = ['1개월', '3개월', '6개월', '12개월'];

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = getDateKey(day);
                    const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };

                    if (dayData.approved && dayData.details) {
                        dayData.details.forEach(detail => {
                            // 상품 문자열을 쉼표로 분리해서 각각 확인
                            if (detail.product) {
                                const products = detail.product.split(',').map(p => p.trim());

                                products.forEach(product => {
                                    // 각 개별 상품이 다른 카테고리에 속하지 않는지 확인
                                    const isHealth = (healthProductsList.includes(product) || product.includes('헬스')) &&
                                        !product.includes('락커') &&
                                        !product.includes('운동복') &&
                                        !product.includes('보관함') &&
                                        !product.includes('필라테스');
                                    const isNeofit = product.includes('네오핏');
                                    const isPt = (product.includes('체험') || product.includes('PT')) && !product.includes('네오핏');
                                    const isPilates = product.includes('필라테스') || product === '필라테스 이용권';
                                    const isClothingLocker = product.includes('운동복') || product.includes('락커') || product.includes('보관함');

                                    console.log('기타 매출 분류 검사:', product, {
                                        isHealth,
                                        isNeofit,
                                        isPt,
                                        isPilates,
                                        isClothingLocker,
                                        isOther: !isHealth && !isNeofit && !isPt && !isPilates && !isClothingLocker
                                    });

                                    // 위 카테고리에 속하지 않는 기타 매출들
                                    if (!isHealth && !isNeofit && !isPt && !isPilates && !isClothingLocker) {
                                        // 기타 매출은 저장된 price 값을 그대로 사용 (calculateIndividualProductPrice 사용하지 않음)
                                        const finalPrice = detail.price || 0;
                                        console.log('기타 매출 추가:', product, '저장된 가격:', finalPrice);
                                        otherData.push({
                                            ...detail,
                                            product: product, // 개별 상품으로 표시
                                            price: finalPrice, // 저장된 가격 그대로 사용
                                            date: `${selectedMonth + 1}월 ${day}일`,
                                            dateKey: dateKey
                                        });
                                    }
                                });
                            }
                        });
                    }
                }

                return otherData.sort((a, b) => b.dateKey.localeCompare(a.dateKey));
            };

            // 인센티브 비율 계산 (직원 타입별)
            const getIncentiveRate = (totalSales, type = null) => {
                const employeeTypeToUse = type || employeeType;
                const rates = CONFIG.INCENTIVE_RATES;

                const thresholds = Object.keys(rates[employeeTypeToUse])
                    .map(Number)
                    .sort((a, b) => b - a);

                for (const threshold of thresholds) {
                    if (totalSales >= threshold) {
                        return rates[employeeTypeToUse][threshold];
                    }
                }
                
                return rates[employeeTypeToUse][0];
            };

            const monthlyTotal = isNaN(calculateMonthlySales()) ? 0 : calculateMonthlySales();
            const incentiveRate = getIncentiveRate(monthlyTotal);
            const incentiveAmount = isNaN(monthlyTotal * (incentiveRate / 100)) ? 0 : monthlyTotal * (incentiveRate / 100);
            const weeklySales = calculateWeeklySales();
            
            // 오늘 매출 계산
            const getTodaySales = React.useCallback(() => {
                const today = new Date();
                // 현재 선택된 년월이 오늘과 같은지 확인
                if (today.getMonth() === selectedMonth && today.getFullYear() === selectedYear) {
                    const todayKey = `${selectedYear}-${String(selectedMonth + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                    const todayData = salesData[todayKey];
                    if (todayData && todayData.approved) {
                        return todayData.amount || 0;
                    }
                }
                return 0;
            }, [salesData, selectedMonth, selectedYear]);
            
            // 이번주 매출 계산
            const getThisWeekSales = React.useCallback(() => {
                const today = new Date();
                // 현재 선택된 년월이 오늘과 같은지 확인
                if (today.getMonth() === selectedMonth && today.getFullYear() === selectedYear) {
                    const currentWeek = weeklySales.find(week => {
                        return week && week.days && Array.isArray(week.days) && week.days.includes(today.getDate());
                    });
                    return currentWeek && !isNaN(currentWeek.total) ? currentWeek.total : 0;
                }
                return 0;
            }, [weeklySales, selectedMonth, selectedYear]);

            // SVG 아이콘 컴포넌트
            const Icon = ({ icon: iconName, size = 24, style = {}, className = "" }) => {
                const svgIcons = {
                    "calendar": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                    ),
                    "dollar-sign": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <line x1="12" y1="1" x2="12" y2="23"></line>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                        </svg>
                    ),
                    "check": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    ),
                    "trending-up": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                            <polyline points="17 6 23 6 23 12"></polyline>
                        </svg>
                    ),
                    "edit": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                    ),
                    "plus": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    ),
                    "trash-2": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    ),
                    "user": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    ),
                    "package": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line>
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                            <line x1="12" y1="22.08" x2="12" y2="12"></line>
                        </svg>
                    ),
                    "credit-card": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                    ),
                    "search": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    ),
                    "x": (
                        <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className} style={style}>
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    )
                };
                
                return svgIcons[iconName] || <span>•</span>;
            };

            // 숫자에 천 단위 콤마 추가 함수
            const formatNumberWithCommas = (num) => {
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            };
            
            // 콤마가 있는 숫자에서 콤마 제거 함수
            const removeCommas = (str) => {
                return str.replace(/,/g, '');
            };
            
            // 금액에 따른 색상 반환 함수
            const getPriceColor = (price) => {
                if (price >= 1000000) return '#FF6B6B'; // 100만원 이상: 빨간색
                if (price >= 500000) return '#FFD93D'; // 50만원 이상: 노란색
                if (price >= 300000) return '#6BCF7F'; // 30만원 이상: 초록색
                if (price >= 100000) return '#4ECDC4'; // 10만원 이상: 청록색
                return '#95E1D3'; // 10만원 미만: 연한 민트색
            };
            
            // 오늘 날짜로 스크롤하는 함수
            const scrollToToday = () => {
                const today = new Date();
                if (today.getMonth() === selectedMonth && today.getFullYear() === selectedYear) {
                    const todayDay = today.getDate();
                    const todayElement = document.getElementById(`day-${todayDay}`);
                    if (todayElement) {
                        todayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                } else {
                    // 현재 월이 아니면 현재 월로 변경
                    setSelectedMonth(today.getMonth());
                    setSelectedYear(today.getFullYear());
                    setTimeout(() => {
                        const todayDay = today.getDate();
                        const todayElement = document.getElementById(`day-${todayDay}`);
                        if (todayElement) {
                            todayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }, 500);
                }
            };
            
            // 회원 검색 함수
            const searchCustomer = () => {
                if (!searchQuery.trim()) {
                    alert('검색할 회원명을 입력해주세요.');
                    return;
                }
                
                const results = [];
                
                // 모든 날짜의 매출 데이터를 검색
                Object.entries(salesData).forEach(([dateKey, dayData]) => {
                    if (dayData.details && Array.isArray(dayData.details)) {
                        dayData.details.forEach(detail => {
                            if (detail.customerName && detail.customerName.toLowerCase().includes(searchQuery.toLowerCase())) {
                                results.push({
                                    ...detail,
                                    date: dateKey
                                });
                            }
                        });
                    }
                });
                
                if (results.length === 0) {
                    alert('검색 결과가 없습니다.');
                    return;
                }
                
                setSearchResults(results);
                setShowSearchResultModal(true);
            };
            
            // 매출 입력 모달 컴포넌트
            const AddSaleModal = () => {
                const [modalData, setModalData] = useState({
                    customerName: '',
                    healthProduct: '',
                    pilatesProduct: '',
                    neofitProduct: '',
                    lockerProduct: '',
                    lockerType: '',
                    lockerPeriod: '',
                    price: '',
                    discount: ''
                });
                
                // 상품 선택 시 가격 자동 계산 (사용자가 직접 입력한 가격이 없을 때만)
                React.useEffect(() => {
                    // 사용자가 직접 가격을 수정했는지 확인
                    if (!modalData.manualPriceEdit) {
                        let totalPrice = 0;
                        if (modalData.healthProduct) totalPrice += productPrices[modalData.healthProduct] || 0;
                        if (modalData.ptProduct) totalPrice += productPrices[modalData.ptProduct] || 0;
                        if (modalData.pilatesProduct) totalPrice += productPrices[modalData.pilatesProduct] || 0;
                        if (modalData.neofitProduct) totalPrice += productPrices[modalData.neofitProduct] || 0;
                        if (modalData.lockerType && modalData.lockerPeriod) {
                            const lockerKey = `${modalData.lockerType} ${modalData.lockerPeriod}`;
                            totalPrice += productPrices[lockerKey] || 0;
                        }
                        
                        // 할인 금액 차감
                        const discount = parseInt(removeCommas(modalData.discount)) || 0;
                        const finalPrice = Math.max(0, totalPrice - discount);
                        
                        if (totalPrice > 0) {
                            setModalData(prev => ({ ...prev, price: formatNumberWithCommas(finalPrice) }));
                        }
                    }
                }, [modalData.healthProduct, modalData.ptProduct, modalData.pilatesProduct, modalData.neofitProduct, modalData.lockerType, modalData.lockerPeriod, modalData.discount]);
                
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    const selectedProducts = [];
                    if (modalData.healthProduct) selectedProducts.push('헬스: ' + modalData.healthProduct);
                    if (modalData.ptProduct) selectedProducts.push('PT: ' + modalData.ptProduct);
                    if (modalData.pilatesProduct) selectedProducts.push('필라테스: ' + modalData.pilatesProduct);
                    if (modalData.neofitProduct) selectedProducts.push('네오핏: ' + modalData.neofitProduct);
                    if (modalData.lockerType && modalData.lockerPeriod) {
                        selectedProducts.push(`${modalData.lockerType}: ${modalData.lockerPeriod}`);
                    }
                    
                    // 일반 매출은 회원명과 상품이 필요하지만, 가격만 있어도 등록 가능
                    if (!modalData.customerName && selectedProducts.length === 0 && !modalData.price) {
                        alert('매출 정보를 입력해주세요.');
                        return;
                    }
                    
                    // 가격만 입력된 경우 직접 입력으로 처리
                    if (!modalData.customerName && selectedProducts.length === 0 && modalData.price) {
                        modalData.customerName = '직접입력';
                        selectedProducts.push('직접입력');
                    } else if (!modalData.customerName || (selectedProducts.length === 0 && !modalData.price)) {
                        alert('회원명과 상품 또는 가격을 입력해주세요.');
                        return;
                    }
                    
                    const dateKey = getDateKey(selectedModalDay);
                    const newDetail = {
                        id: Date.now() + Math.random(),
                        customerName: modalData.customerName.trim(),
                        product: selectedProducts.join(', '),
                        price: parseInt(removeCommas(modalData.price)),
                        timestamp: new Date().toLocaleTimeString('ko-KR', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            second: '2-digit'
                        })
                    };
                    
                    // Firebase에 저장
                    const currentData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                    const newDetails = [...(currentData.details || []), newDetail];
                    const newTotalAmount = newDetails.reduce((sum, detail) => sum + (detail.price || 0), 0);
                    
                    const updatedData = {
                        ...currentData,
                        details: newDetails,
                        amount: newTotalAmount,
                        date: dateKey
                    };
                    
                    try {
                        await salesService.saveSalesData(dateKey, updatedData);
                        console.log('매출 데이터 Firebase 저장 완료:', dateKey);
                    } catch (error) {
                        console.error('Firebase 저장 실패:', error);
                        alert('데이터 저장에 실패했습니다. 다시 시도해주세요.');
                        return;
                    }
                    
                    setShowAddSaleModal(false);
                    setModalData({ customerName: '', healthProduct: '', pilatesProduct: '', neofitProduct: '', lockerProduct: '', lockerType: '', lockerPeriod: '', price: '', discount: '' });
                    
                    // 오늘 날짜로 스크롤
                    setTimeout(() => {
                        const dayElement = document.getElementById(`day-${selectedModalDay}`);
                        if (dayElement && dailyViewRef.current) {
                            dayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }, 100);
                };
                
                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowAddSaleModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '500px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#00FF88' }}>
                                {selectedMonth + 1}월 {selectedModalDay}일 매출 입력
                            </h3>
                            
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">회원명</label>
                                    <input
                                        type="text"
                                        value={modalData.customerName}
                                        onChange={(e) => setModalData({...modalData, customerName: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                        placeholder="회원명을 입력하세요"
                                        autoFocus
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">헬스 이용권</label>
                                    <select
                                        value={modalData.healthProduct}
                                        onChange={(e) => setModalData({...modalData, healthProduct: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">헬스 이용권 선택</option>
                                        {healthProducts.map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">1:1 PT 이용권</label>
                                    <select
                                        value={modalData.ptProduct}
                                        onChange={(e) => setModalData({...modalData, ptProduct: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">1:1 PT 이용권 선택</option>
                                        {ptProducts.map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">필라테스 이용권</label>
                                    <select
                                        value={modalData.pilatesProduct}
                                        onChange={(e) => setModalData({...modalData, pilatesProduct: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">필라테스 이용권 선택</option>
                                        <option disabled style={{color: '#00FF88', fontWeight: 'bold', backgroundColor: 'rgba(0, 255, 136, 0.1)'}}>
                                            ─────── 주 2회 상품 ───────
                                        </option>
                                        {pilatesProducts.slice(0, 3).map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                        <option disabled style={{color: '#00FF88', fontWeight: 'bold', backgroundColor: 'rgba(0, 255, 136, 0.1)'}}>
                                            ─────── 주 3회 상품 ───────
                                        </option>
                                        {pilatesProducts.slice(3, 6).map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">네오핏 이용권</label>
                                    <select
                                        value={modalData.neofitProduct}
                                        onChange={(e) => setModalData({...modalData, neofitProduct: e.target.value})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">네오핏 이용권 선택</option>
                                        <option value={neofitProducts[0]}>
                                            {neofitProducts[0]} - {productPrices[neofitProducts[0]].toLocaleString()}원
                                        </option>
                                        <option value={neofitProducts[1]}>
                                            {neofitProducts[1]} - {productPrices[neofitProducts[1]].toLocaleString()}원
                                        </option>
                                        <option disabled style={{color: '#00FF88', fontWeight: 'bold', backgroundColor: 'rgba(0, 255, 136, 0.1)'}}>
                                            ─────── 네오핏 무제한권 ───────
                                        </option>
                                        {neofitProducts.slice(2, 5).map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                        <option disabled style={{color: '#00FF88', fontWeight: 'bold', backgroundColor: 'rgba(0, 255, 136, 0.1)'}}>
                                            ─────── 네오핏 주 2회 ───────
                                        </option>
                                        {neofitProducts.slice(5, 8).map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                        <option disabled style={{color: '#00FF88', fontWeight: 'bold', backgroundColor: 'rgba(0, 255, 136, 0.1)'}}>
                                            ─────── 네오핏 주 3회 ───────
                                        </option>
                                        {neofitProducts.slice(8, 11).map(product => (
                                            <option key={product} value={product}>
                                                {product} - {productPrices[product].toLocaleString()}원
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">운동복/락커 선택</label>
                                    <select
                                        value={modalData.lockerType}
                                        onChange={(e) => setModalData({...modalData, lockerType: e.target.value, lockerPeriod: ''})}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                    >
                                        <option value="">운동복/락커 선택</option>
                                        {lockerProducts.map(product => (
                                            <option key={product} value={product}>{product}</option>
                                        ))}
                                    </select>
                                </div>
                                
                                {modalData.lockerType && (
                                    <div>
                                        <label className="block text-sm font-semibold mb-2 text-gray-300">{modalData.lockerType} 이용 기간</label>
                                        <select
                                            value={modalData.lockerPeriod}
                                            onChange={(e) => setModalData({...modalData, lockerPeriod: e.target.value})}
                                            className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                        >
                                            <option value="">기간 선택</option>
                                            {lockerPeriods.map(period => {
                                                const priceKey = `${modalData.lockerType} ${period}`;
                                                const price = productPrices[priceKey] || 0;
                                                return (
                                                    <option key={period} value={period}>
                                                        {period} - {price.toLocaleString()}원
                                                    </option>
                                                );
                                            })}
                                        </select>
                                    </div>
                                )}
                                
                                {/* 기타 매출 입력 섹션 */}
                                <div style={{borderTop: '1px solid rgba(139, 92, 246, 0.3)', paddingTop: '1rem', marginTop: '1rem'}}>
                                    <label className="block text-sm font-semibold mb-2" style={{color: '#c084fc'}}>기타 매출</label>
                                    <div style={{display: 'flex', flexDirection: 'column', gap: '0.75rem'}}>
                                        <input
                                            type="text"
                                            value={modalData.otherItemName || ''}
                                            onChange={(e) => setModalData({...modalData, otherItemName: e.target.value})}
                                            className="glass-effect rounded-lg px-4 py-3 w-full focus:border-purple-400 focus:outline-none"
                                            placeholder="항목명을 입력하세요 (예: PT수업, 개인레슨)"
                                            style={{ fontSize: '16px' }}
                                        />
                                        <input
                                            type="text"
                                            inputMode="numeric"
                                            value={modalData.otherItemPrice || ''}
                                            onChange={(e) => {
                                                const value = e.target.value.replace(/[^0-9]/g, '');
                                                if (value === '') {
                                                    setModalData({...modalData, otherItemPrice: ''});
                                                } else {
                                                    setModalData({...modalData, otherItemPrice: formatNumberWithCommas(value)});
                                                }
                                            }}
                                            className="glass-effect rounded-lg px-4 py-3 w-full focus:border-purple-400 focus:outline-none"
                                            placeholder="금액을 입력하세요"
                                            style={{ fontSize: '16px' }}
                                        />
                                        <button
                                            type="button"
                                            onClick={async () => {
                                                if (modalData.otherItemName && modalData.otherItemPrice) {
                                                    const otherPrice = parseInt(modalData.otherItemPrice.replace(/,/g, ''));
                                                    const dateKey = `${selectedYear}-${String(selectedMonth + 1).padStart(2, '0')}-${String(selectedModalDay).padStart(2, '0')}`;
                                                    
                                                    const newDetail = {
                                                        id: Date.now() + Math.random(),
                                                        customerName: '기타',
                                                        product: modalData.otherItemName,
                                                        price: otherPrice,
                                                        timestamp: new Date().toLocaleTimeString('ko-KR', { 
                                                            hour: '2-digit', 
                                                            minute: '2-digit',
                                                            second: '2-digit'
                                                        })
                                                    };
                                                    
                                                    // 현재 데이터 가져오기
                                                    const currentData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                                                    const newDetails = [...(currentData.details || []), newDetail];
                                                    const newTotalAmount = newDetails.reduce((sum, detail) => sum + (detail.price || 0), 0);
                                                    
                                                    const updatedData = {
                                                        ...currentData,
                                                        date: dateKey,
                                                        amount: newTotalAmount,
                                                        details: newDetails,
                                                        approved: false
                                                    };
                                                    
                                                    // Firebase에 저장
                                                    const result = await salesService.saveSalesData(dateKey, updatedData);
                                                    
                                                    if (result.success) {
                                                        // 로컬 상태 업데이트
                                                        setSalesData(prev => ({
                                                            ...prev,
                                                            [dateKey]: updatedData
                                                        }));
                                                        
                                                        // 입력 필드 초기화
                                                        setModalData({
                                                            ...modalData,
                                                            otherItemName: '',
                                                            otherItemPrice: ''
                                                        });
                                                        
                                                        // 모달 닫기
                                                        setShowAddSaleModal(false);
                                                        alert('기타 매출이 추가되었습니다!');
                                                    } else {
                                                        alert('기타 매출 저장 중 오류가 발생했습니다.');
                                                    }
                                                } else {
                                                    alert('항목명과 금액을 모두 입력해주세요.');
                                                }
                                            }}
                                            className="glass-effect border-purple-500 hover:border-purple-400 rounded-lg py-3 font-semibold transition-all hover:shadow-lg text-white"
                                            style={{background: 'linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(168, 85, 247, 0.3))'}}
                                        >
                                            기타 매출 추가
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">할인 금액</label>
                                    <input
                                        type="text"
                                        inputMode="numeric"
                                        value={modalData.discount}
                                        onChange={(e) => {
                                            const value = e.target.value.replace(/[^0-9]/g, '');
                                            if (value === '') {
                                                setModalData({...modalData, discount: ''});
                                            } else {
                                                setModalData({...modalData, discount: formatNumberWithCommas(value)});
                                            }
                                        }}
                                        className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none"
                                        placeholder="할인 금액을 입력하세요"
                                        style={{ fontSize: '16px' }}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold mb-2 text-gray-300">최종 가격</label>
                                    <input
                                        type="text"
                                        inputMode="numeric"
                                        value={modalData.price}
                                        onChange={(e) => {
                                            const value = e.target.value.replace(/[^0-9]/g, '');
                                            if (value === '') {
                                                setModalData({...modalData, price: '', manualPriceEdit: true});
                                            } else {
                                                setModalData({...modalData, price: formatNumberWithCommas(value), manualPriceEdit: true});
                                            }
                                        }}
                                        className="glass-effect rounded-lg px-4 py-3 w-full text-green-400 font-bold text-lg focus:border-green-400 focus:outline-none"
                                        placeholder="상품을 선택하거나 직접 입력하세요"
                                        style={{ fontSize: '16px' }}
                                    />
                                </div>
                                
                                <div className="flex gap-3 pt-4">
                                    <button
                                        type="button"
                                        onClick={() => setShowAddSaleModal(false)}
                                        className="flex-1 glass-effect hover:border-gray-400 rounded-lg py-3 font-semibold transition-all text-gray-300 hover:text-white"
                                    >
                                        취소
                                    </button>
                                    <button
                                        type="submit"
                                        className="flex-1 glass-effect border-green-500 hover:border-green-400 rounded-lg py-3 font-semibold transition-all hover:shadow-lg text-white"
                                    >
                                        등록
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                );
            };
            
            // 검색 결과 모달 컴포넌트
            const SearchResultModal = () => {
                const totalAmount = searchResults.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = searchResults.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});
                
                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowSearchResultModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#00FF88' }}>
                                '{searchQuery}' 검색 결과
                            </h3>
                            
                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{searchResults.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 결제 금액</p>
                                    <p className="text-3xl font-bold" style={{ color: '#00FF88' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>
                            
                            <div className="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                {Object.entries(groupedByDate).sort((a, b) => b[0].localeCompare(a[0])).map(([date, items]) => (
                                    <div key={date} className="glass-effect rounded-xl p-4">
                                        <div className="font-semibold text-gray-300 mb-3">{date}</div>
                                        <div className="space-y-2">
                                            {items.map((item, index) => (
                                                <div key={index} className="flex justify-between items-start p-3 bg-gray-800/50 rounded-lg">
                                                    <div className="flex-1">
                                                        <div className="text-sm text-gray-400">{item.timestamp}</div>
                                                        <div className="text-xs text-gray-500 mt-1">{item.product}</div>
                                                    </div>
                                                    <div className="font-bold" style={{ color: getPriceColor(item.price || 0) }}>
                                                        {(item.price || 0).toLocaleString()}원
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="mt-6">
                                <button
                                    onClick={() => setShowSearchResultModal(false)}
                                    className="w-full glass-effect hover:border-gray-400 rounded-lg py-3 font-semibold transition-all text-white"
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 필라테스 매출 모달 컴포넌트
            const PilatesModal = () => {
                const pilatesData = getPilatesDetails();
                const totalAmount = pilatesData.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = pilatesData.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});

                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowPilatesModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#FF69B4' }}>
                                📊 필라테스 매출 현황 ({selectedMonth + 1}월)
                            </h3>

                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 필라테스 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{pilatesData.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 필라테스 매출</p>
                                    <p className="text-3xl font-bold" style={{ color: '#FF69B4' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>

                            {pilatesData.length === 0 ? (
                                <div className="text-center py-8">
                                    <div className="text-6xl mb-4">🏃‍♀️</div>
                                    <p className="text-gray-400 text-lg">이번 달 필라테스 매출이 없습니다</p>
                                    <p className="text-gray-500 text-sm mt-2">필라테스 이용권 판매 시 여기에 표시됩니다</p>
                                </div>
                            ) : (
                                <div className="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                    {Object.entries(groupedByDate).sort((a, b) => b[0].localeCompare(a[0])).map(([date, items]) => (
                                        <div key={date} className="glass-effect rounded-xl p-4">
                                            <div className="font-semibold text-gray-300 mb-3">
                                                🗓️ {date}
                                            </div>
                                            <div className="space-y-2">
                                                {items.map((item, index) => (
                                                    <div key={index} className="flex justify-between items-start p-3 bg-pink-900/20 rounded-lg border border-pink-500/20">
                                                        <div className="flex-1">
                                                            <div className="text-white font-medium">{item.customerName}</div>
                                                            <div className="text-sm text-gray-400">{item.timestamp}</div>
                                                            <div className="text-xs text-pink-300 mt-1">🧘‍♀️ {item.product}</div>
                                                        </div>
                                                        <div className="font-bold" style={{ color: '#FF69B4' }}>
                                                            {(item.price || 0).toLocaleString()}원
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="mt-6">
                                <button
                                    onClick={() => setShowPilatesModal(false)}
                                    className="w-full glass-effect hover:border-pink-400 rounded-lg py-3 font-semibold transition-all text-white border border-pink-500/50"
                                    style={{ borderColor: '#FF69B4' }}
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 헬스 이용권 매출 모달 컴포넌트
            const HealthModal = () => {
                const healthData = getHealthDetails();
                const totalAmount = healthData.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = healthData.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});

                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowHealthModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#22C55E' }}>
                                💪 헬스 이용권 매출 현황 ({selectedMonth + 1}월)
                            </h3>

                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 헬스 이용권 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{healthData.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 헬스 이용권 매출</p>
                                    <p className="text-3xl font-bold" style={{ color: '#22C55E' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>

                            {healthData.length === 0 ? (
                                <div className="text-center py-8">
                                    <div className="text-6xl mb-4">💪</div>
                                    <p className="text-gray-400 text-lg">이번 달 헬스 이용권 매출이 없습니다</p>
                                    <p className="text-gray-500 text-sm mt-2">헬스 이용권 판매 시 여기에 표시됩니다</p>
                                </div>
                            ) : (
                                <div className="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                    {Object.entries(groupedByDate).sort((a, b) => b[0].localeCompare(a[0])).map(([date, items]) => (
                                        <div key={date} className="glass-effect rounded-xl p-4">
                                            <div className="font-semibold text-gray-300 mb-3">
                                                🗓️ {date}
                                            </div>
                                            <div className="space-y-2">
                                                {items.map((item, index) => (
                                                    <div key={index} className="flex justify-between items-start p-3 bg-green-900/20 rounded-lg border border-green-500/20">
                                                        <div className="flex-1">
                                                            <div className="text-white font-medium">{item.customerName}</div>
                                                            <div className="text-sm text-gray-400">{item.timestamp}</div>
                                                            <div className="text-xs text-green-300 mt-1">💪 {item.product}</div>
                                                        </div>
                                                        <div className="font-bold" style={{ color: '#22C55E' }}>
                                                            {(item.price || 0).toLocaleString()}원
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="mt-6">
                                <button
                                    onClick={() => setShowHealthModal(false)}
                                    className="w-full glass-effect hover:border-green-400 rounded-lg py-3 font-semibold transition-all text-white border border-green-500/50"
                                    style={{ borderColor: '#22C55E' }}
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 네오핏 매출 모달 컴포넌트
            const NeofitModal = () => {
                const neofitData = getNeofitDetails();
                const totalAmount = neofitData.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = neofitData.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});

                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowNeofitModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#4ECDC4' }}>
                                🔥 네오핏 매출 현황 ({selectedMonth + 1}월)
                            </h3>

                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 네오핏 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{neofitData.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 네오핏 매출</p>
                                    <p className="text-3xl font-bold" style={{ color: '#4ECDC4' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>

                            {neofitData.length === 0 ? (
                                <div className="text-center py-8">
                                    <div className="text-6xl mb-4">🔥</div>
                                    <p className="text-gray-400 text-lg">이번 달 네오핏 매출이 없습니다</p>
                                    <p className="text-gray-500 text-sm mt-2">네오핏 서비스 판매 시 여기에 표시됩니다</p>
                                </div>
                            ) : (
                                <div className="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                    {Object.entries(groupedByDate).sort((a, b) => b[0].localeCompare(a[0])).map(([date, items]) => (
                                        <div key={date} className="glass-effect rounded-xl p-4">
                                            <div className="font-semibold text-gray-300 mb-3">
                                                🗓️ {date}
                                            </div>
                                            <div className="space-y-2">
                                                {items.map((item, index) => (
                                                    <div key={index} className="flex justify-between items-start p-3 bg-teal-900/20 rounded-lg border border-teal-500/20">
                                                        <div className="flex-1">
                                                            <div className="text-white font-medium">{item.customerName}</div>
                                                            <div className="text-sm text-gray-400">{item.timestamp}</div>
                                                            <div className="text-xs text-teal-300 mt-1">🔥 {item.product}</div>
                                                        </div>
                                                        <div className="font-bold" style={{ color: '#4ECDC4' }}>
                                                            {(item.price || 0).toLocaleString()}원
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="mt-6">
                                <button
                                    onClick={() => setShowNeofitModal(false)}
                                    className="w-full glass-effect hover:border-teal-400 rounded-lg py-3 font-semibold transition-all text-white border border-teal-500/50"
                                    style={{ borderColor: '#4ECDC4' }}
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 운동복/락커 매출 모달 컴포넌트
            const ClothingLockerModal = () => {
                const clothingLockerData = getClothingLockerDetails();
                const totalAmount = clothingLockerData.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = clothingLockerData.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});

                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowClothingLockerModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#A855F7' }}>
                                👕 운동복/락커 매출 현황 ({selectedMonth + 1}월)
                            </h3>

                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 운동복/락커 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{clothingLockerData.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 운동복/락커 매출</p>
                                    <p className="text-3xl font-bold" style={{ color: '#A855F7' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>

                            {clothingLockerData.length === 0 ? (
                                <div className="text-center py-8">
                                    <div className="text-6xl mb-4">👕</div>
                                    <p className="text-gray-400 text-lg">이번 달 운동복/락커 매출이 없습니다</p>
                                    <p className="text-gray-500 text-sm mt-2">운동복/락커 판매 시 여기에 표시됩니다</p>
                                </div>
                            ) : (
                                <div className="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                    {Object.entries(groupedByDate).sort((a, b) => b[0].localeCompare(a[0])).map(([date, items]) => (
                                        <div key={date} className="glass-effect rounded-xl p-4">
                                            <div className="font-semibold text-gray-300 mb-3">
                                                🗓️ {date}
                                            </div>
                                            <div className="space-y-2">
                                                {items.map((item, index) => (
                                                    <div key={index} className="flex justify-between items-start p-3 bg-purple-900/20 rounded-lg border border-purple-500/20">
                                                        <div className="flex-1">
                                                            <div className="text-white font-medium">{item.customerName}</div>
                                                            <div className="text-sm text-gray-400">{item.timestamp}</div>
                                                            <div className="text-xs text-purple-300 mt-1">👕 {item.product}</div>
                                                        </div>
                                                        <div className="font-bold" style={{ color: '#A855F7' }}>
                                                            {(item.price || 0).toLocaleString()}원
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="mt-6">
                                <button
                                    onClick={() => setShowClothingLockerModal(false)}
                                    className="w-full glass-effect hover:border-purple-400 rounded-lg py-3 font-semibold transition-all text-white border border-purple-500/50"
                                    style={{ borderColor: '#A855F7' }}
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 1:1 PT 매출 모달 컴포넌트
            const PtModal = () => {
                const ptData = getPtDetails();
                const totalAmount = ptData.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = ptData.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});

                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowPtModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#F59E0B' }}>
                                🏋️ 1:1 PT 매출 현황 ({selectedMonth + 1}월)
                            </h3>

                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 1:1 PT 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{ptData.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 1:1 PT 매출</p>
                                    <p className="text-3xl font-bold" style={{ color: '#F59E0B' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>

                            {ptData.length === 0 ? (
                                <div className="text-center py-8">
                                    <div className="text-6xl mb-4">🏋️</div>
                                    <p className="text-gray-400 text-lg">이번 달 1:1 PT 매출이 없습니다</p>
                                    <p className="text-gray-500 text-sm mt-2">1:1 PT 서비스 판매 시 여기에 표시됩니다</p>
                                </div>
                            ) : (
                                <div className="max-h-96 overflow-y-auto">
                                    {Object.entries(groupedByDate).map(([date, items]) => (
                                        <div key={date} className="mb-6">
                                            <h4 className="text-lg font-semibold mb-3 text-center" style={{ color: '#F59E0B' }}>
                                                {date}
                                            </h4>
                                            <div className="space-y-3">
                                                {items.map((item, index) => (
                                                    <div key={index} className="glass-effect rounded-lg p-4 border border-orange-500/30">
                                                        <div className="flex justify-between items-start mb-2">
                                                            <div className="text-white font-medium">{item.name}</div>
                                                            <div className="text-right">
                                                                <div className="text-orange-400 font-bold text-lg">
                                                                    {(item.price || 0).toLocaleString()}원
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div className="text-orange-300 text-sm font-medium mb-1">
                                                            {item.product}
                                                        </div>
                                                        {item.memo && (
                                                            <div className="text-gray-400 text-sm italic">
                                                                메모: {item.memo}
                                                            </div>
                                                        )}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="mt-6">
                                <button
                                    onClick={() => setShowPtModal(false)}
                                    className="w-full glass-effect hover:border-orange-400 rounded-lg py-3 font-semibold transition-all text-white border border-orange-500/50"
                                    style={{ borderColor: '#F59E0B' }}
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 기타 매출 모달 컴포넌트
            const OtherModal = () => {
                const otherData = getOtherDetails();
                const totalAmount = otherData.reduce((sum, item) => sum + (item.price || 0), 0);
                const groupedByDate = otherData.reduce((acc, item) => {
                    if (!acc[item.date]) acc[item.date] = [];
                    acc[item.date].push(item);
                    return acc;
                }, {});

                return (
                    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowOtherModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '600px', maxWidth: '90%', maxHeight: '90vh', overflowY: 'auto' }} onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-2xl font-bold mb-6 text-center" style={{ color: '#9CA3AF' }}>
                                📊 기타 매출 현황 ({selectedMonth + 1}월)
                            </h3>

                            <div className="mb-6 text-center">
                                <div className="glass-effect rounded-xl p-4 mb-4">
                                    <p className="text-gray-400 text-sm mb-1">총 기타 결제 건수</p>
                                    <p className="text-3xl font-bold text-white">{otherData.length}건</p>
                                </div>
                                <div className="glass-effect rounded-xl p-4">
                                    <p className="text-gray-400 text-sm mb-1">총 기타 매출</p>
                                    <p className="text-3xl font-bold" style={{ color: '#9CA3AF' }}>
                                        {totalAmount.toLocaleString()}원
                                    </p>
                                </div>
                            </div>

                            {otherData.length === 0 ? (
                                <div className="text-center py-8">
                                    <div className="text-6xl mb-4">📊</div>
                                    <p className="text-gray-400 text-lg">이번 달 기타 매출이 없습니다</p>
                                    <p className="text-gray-500 text-sm mt-2">기타 상품 판매 시 여기에 표시됩니다</p>
                                </div>
                            ) : (
                                <div className="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                    {Object.entries(groupedByDate).sort((a, b) => b[0].localeCompare(a[0])).map(([date, items]) => (
                                        <div key={date} className="glass-effect rounded-xl p-4">
                                            <div className="font-semibold text-gray-300 mb-3">
                                                🗓️ {date}
                                            </div>
                                            <div className="space-y-2">
                                                {items.map((item, index) => (
                                                    <div key={index} className="flex justify-between items-start p-3 bg-gray-800/50 rounded-lg border border-gray-500/20">
                                                        <div className="flex-1">
                                                            <div className="text-white font-medium">{item.customerName}</div>
                                                            <div className="text-sm text-gray-400">{item.timestamp}</div>
                                                            <div className="text-xs text-gray-300 mt-1">📊 {item.product}</div>
                                                        </div>
                                                        <div className="font-bold" style={{ color: '#9CA3AF' }}>
                                                            {(item.price || 0).toLocaleString()}원
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="mt-6">
                                <button
                                    onClick={() => setShowOtherModal(false)}
                                    className="w-full glass-effect hover:border-gray-400 rounded-lg py-3 font-semibold transition-all text-white border border-gray-500/50"
                                    style={{ borderColor: '#9CA3AF' }}
                                >
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // 달력 모달 컴포넌트
            const CalendarModal = () => {
                if (!showCalendarModal) return null;
                
                const [yearView, setYearView] = useState(selectedYear);
                const [searchDate, setSearchDate] = useState('');
                const [yearSalesData, setYearSalesData] = useState({});
                const [isLoading, setIsLoading] = useState(false);
                
                // 모달이 열릴 때 현재 연도로 초기화
                React.useEffect(() => {
                    if (showCalendarModal) {
                        setYearView(selectedYear);
                        setYearSalesData({}); // 초기화
                        setIsLoading(true); // 로딩 시작
                    }
                }, [showCalendarModal]);
                
                // salesData가 변경될 때마다 yearSalesData 업데이트
                React.useEffect(() => {
                    setYearSalesData(prevData => ({
                        ...prevData,
                        ...salesData
                    }));
                }, [salesData]);
                
                // 전체 연도 데이터 로드 (전월 포함) - Firebase 구독 사용
                React.useEffect(() => {
                    if (!showCalendarModal || !user) return;
                    
                    const unsubscribes = [];
                    setIsLoading(true);
                    
                    // 12개월 모든 데이터를 구독
                    for (let month = 0; month < 12; month++) {
                        // 현재 월 데이터 구독
                        const unsubscribe = salesService.subscribeToMonthData(
                            yearView,
                            month,
                            (data) => {
                                setYearSalesData(prevData => ({
                                    ...prevData,
                                    ...data
                                }));
                            }
                        );
                        if (unsubscribe) unsubscribes.push(unsubscribe);
                        
                        // 전월 데이터도 구독 (전월 대비 계산용)
                        const prevMonth = month === 0 ? 11 : month - 1;
                        const prevYear = month === 0 ? yearView - 1 : yearView;
                        
                        const prevUnsubscribe = salesService.subscribeToMonthData(
                            prevYear,
                            prevMonth,
                            (data) => {
                                setYearSalesData(prevData => ({
                                    ...prevData,
                                    ...data
                                }));
                            }
                        );
                        if (prevUnsubscribe) unsubscribes.push(prevUnsubscribe);
                    }
                    
                    // 로딩 완료
                    setTimeout(() => setIsLoading(false), 1000);
                    
                    // cleanup
                    return () => {
                        unsubscribes.forEach(unsubscribe => {
                            if (unsubscribe) unsubscribe();
                        });
                    };
                }, [yearView, showCalendarModal, user]);
                
                // 매출 금액에 따른 색상 결정 함수 (배경색 제거)
                const getAmountColor = (amount) => {
                    return ''; // 모든 배경색 제거
                };
                
                const getAmountTextColor = (amount) => {
                    if (amount === 0) return '#6b7280'; // 회색
                    if (amount < 500000) return '#93c5fd'; // 연한 파랑
                    if (amount < 1000000) return '#6ee7b7'; // 연한 초록
                    if (amount < 2000000) return '#fcd34d'; // 노랑
                    if (amount < 3000000) return '#fb923c'; // 주황
                    return '#f87171'; // 빨강
                };
                
                // 1년치 월별 캘린더 생성
                const renderMonthCalendar = (month) => {
                    const firstDay = new Date(yearView, month, 1).getDay();
                    const daysInMonth = new Date(yearView, month + 1, 0).getDate();
                    const weeks = [];
                    let currentWeek = [];
                    let monthTotal = 0;
                    let prevMonthTotal = 0;
                    
                    // 데이터 소스 결정 - yearSalesData가 있으면 사용, 없으면 salesData
                    const dataSource = Object.keys(yearSalesData).length > 0 ? yearSalesData : salesData;
                    
                    // 월 총 매출 계산 (승인된 것만)
                    for (let day = 1; day <= daysInMonth; day++) {
                        const dateKey = `${yearView}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        const dayData = dataSource[dateKey] || { amount: 0, approved: false };
                        if (dayData.amount > 0 && dayData.approved) {
                            monthTotal += dayData.amount;
                        }
                    }
                    
                    // 전월 총 매출 계산 (승인된 것만)
                    const prevMonth = month === 0 ? 11 : month - 1;
                    const prevYear = month === 0 ? yearView - 1 : yearView;
                    const prevDaysInMonth = new Date(prevYear, prevMonth + 1, 0).getDate();
                    for (let day = 1; day <= prevDaysInMonth; day++) {
                        const dateKey = `${prevYear}-${String(prevMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        const dayData = dataSource[dateKey] || { amount: 0, approved: false };
                        if (dayData.amount > 0 && dayData.approved) {
                            prevMonthTotal += dayData.amount;
                        }
                    }
                    
                    // 전월 대비 증감률 계산
                    let changePercent = 0;
                    if (prevMonthTotal > 0) {
                        changePercent = ((monthTotal - prevMonthTotal) / prevMonthTotal * 100).toFixed(1);
                    } else if (prevMonthTotal === 0 && monthTotal > 0) {
                        changePercent = 100; // 전월 매출이 0이고 당월 매출이 있으면 100% 증가로 표시
                    }
                    
                    // 첫 주의 빈 칸 추가
                    for (let i = 0; i < firstDay; i++) {
                        currentWeek.push(null);
                    }
                    
                    // 날짜를 주 단위로 그룹화
                    for (let day = 1; day <= daysInMonth; day++) {
                        currentWeek.push(day);
                        if (currentWeek.length === 7) {
                            weeks.push(currentWeek);
                            currentWeek = [];
                        }
                    }
                    
                    // 마지막 주 처리
                    if (currentWeek.length > 0) {
                        while (currentWeek.length < 7) {
                            currentWeek.push(null);
                        }
                        weeks.push(currentWeek);
                    }
                    
                    return (
                        <div style={{ backgroundColor: 'rgba(30, 41, 59, 0.5)', backdropFilter: 'blur(10px)', borderRadius: '8px', padding: '10px', border: '1px solid rgba(255, 255, 255, 0.1)', position: 'relative' }}>
                            <h4 style={{ fontSize: '14px', fontWeight: 'bold', marginBottom: '4px', textAlign: 'center', color: '#00FF88' }}>
                                {String(month + 1).padStart(2, '0')}월
                            </h4>
                            <div style={{ fontSize: '11px', color: '#fbbf24', textAlign: 'center', marginBottom: '2px', fontWeight: 'bold' }}>
                                {monthTotal > 0 ? `${monthTotal.toLocaleString()}원` : '0원'}
                            </div>
                            {(month === 0 && monthTotal > 0) ? (
                                <div style={{ 
                                    fontSize: '10px', 
                                    color: '#60a5fa', 
                                    textAlign: 'center', 
                                    marginBottom: '6px',
                                    fontWeight: 'bold'
                                }}>
                                    시작
                                </div>
                            ) : (prevMonthTotal > 0 || monthTotal > 0) && month > 0 ? (
                                <div style={{ 
                                    fontSize: '10px', 
                                    color: changePercent >= 0 ? '#10b981' : '#ef4444', 
                                    textAlign: 'center', 
                                    marginBottom: '6px',
                                    fontWeight: 'bold'
                                }}>
                                    {prevMonthTotal === 0 && monthTotal > 0 ? (
                                        <span style={{color: '#10b981'}}>신규</span>
                                    ) : monthTotal === 0 && prevMonthTotal > 0 ? (
                                        <span style={{color: '#ef4444'}}>▼ -100%</span>
                                    ) : prevMonthTotal > 0 ? (
                                        <span>{changePercent >= 0 ? '▲' : '▼'} {Math.abs(changePercent)}%</span>
                                    ) : null}
                                </div>
                            ) : <div style={{height: '16px'}}></div>}
                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '2px', fontSize: '10px', marginBottom: '4px' }}>
                                {['일', '월', '화', '수', '목', '금', '토'].map((d, i) => (
                                    <div key={d} style={{ 
                                        textAlign: 'center', 
                                        fontWeight: '500',
                                        color: i === 0 ? '#f87171' : i === 6 ? '#60a5fa' : '#9ca3af'
                                    }}>{d}</div>
                                ))}
                            </div>
                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '2px' }}>
                                {weeks.map((week, weekIndex) => (
                                    week.map((day, dayIndex) => {
                                        if (day === null) {
                                            return <div key={`empty-${month}-${weekIndex}-${dayIndex}`} style={{ height: '35px' }} />;
                                        }
                                        
                                        const dateKey = `${yearView}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                                        const currentDataSource = Object.keys(yearSalesData).length > 0 ? yearSalesData : salesData;
                                        const dayData = currentDataSource[dateKey] || { amount: 0, approved: false };
                                        const date = new Date(yearView, month, day);
                                        const isWeekend = date.getDay() === 0 || date.getDay() === 6;
                                        const isToday = new Date().toDateString() === date.toDateString();
                                        const hasApprovedData = dayData.amount > 0 && dayData.approved;
                                        
                                        // 매출액 포맷팅 (일반 숫자 형식)
                                        const formatAmount = (amount) => {
                                            if (amount >= 100000) {
                                                // 10만원 이상은 만원 단위로 표시
                                                return Math.floor(amount / 10000) + '만';
                                            }
                                            return amount.toLocaleString();
                                        };
                                        
                                        const dayAmount = hasApprovedData ? dayData.amount : 0;
                                        const bgColor = getAmountColor(dayAmount);
                                        const textColor = getAmountTextColor(dayAmount);
                                        
                                        const dayStyle = {
                                            height: '35px',
                                            display: 'flex',
                                            flexDirection: 'column',
                                            alignItems: 'center',
                                            justifyContent: 'center',
                                            cursor: 'pointer',
                                            borderRadius: '3px',
                                            transition: 'all 0.2s',
                                            padding: '2px',
                                            backgroundColor: '',
                                            outline: isToday ? '1px solid #10b981' : 'none'
                                        };
                                        
                                        return (
                                            <div
                                                key={`${month}-${day}`}
                                                style={dayStyle}
                                                onMouseEnter={(e) => {
                                                    e.currentTarget.style.transform = 'scale(1.1)';
                                                    e.currentTarget.style.zIndex = '10';
                                                }}
                                                onMouseLeave={(e) => {
                                                    e.currentTarget.style.transform = 'scale(1)';
                                                    e.currentTarget.style.zIndex = '1';
                                                }}
                                                onClick={() => {
                                                    setSelectedYear(yearView);
                                                    setSelectedMonth(month);
                                                    setShowCalendarModal(false);
                                                    setViewMode('daily');
                                                    setTimeout(() => {
                                                        const element = document.getElementById(`day-${day}`);
                                                        element?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                                    }, 100);
                                                }}
                                                title={hasApprovedData ? `${dayData.amount.toLocaleString()}원` : ''}
                                            >
                                                <div style={{
                                                    fontSize: '11px',
                                                    fontWeight: hasApprovedData ? 'bold' : 'normal',
                                                    color: hasApprovedData ? '#22c55e' : (isWeekend ? (date.getDay() === 0 ? '#f87171' : '#60a5fa') : '#9ca3af')
                                                }}>
                                                    {day}
                                                </div>
                                                {hasApprovedData && (
                                                    <div style={{
                                                        fontSize: '8px',
                                                        color: textColor,
                                                        fontWeight: 'bold',
                                                        marginTop: '1px'
                                                    }}>
                                                        {formatAmount(dayData.amount)}
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })
                                ))}
                            </div>
                        </div>
                    );
                };
                
                // 날짜 검색 처리
                const handleDateSearch = () => {
                    if (!searchDate) return;
                    
                    const parts = searchDate.split('-');
                    if (parts.length === 3) {
                        const [year, month, day] = parts.map(p => parseInt(p));
                        if (!isNaN(year) && !isNaN(month) && !isNaN(day)) {
                            setSelectedYear(year);
                            setSelectedMonth(month - 1);
                            setShowCalendarModal(false);
                            setViewMode('daily');
                            setTimeout(() => {
                                const element = document.getElementById(`day-${day}`);
                                element?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }, 100);
                        }
                    }
                };
                
                return (
                    <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50" onClick={() => setShowCalendarModal(false)}>
                        <div className="glass-effect rounded-2xl p-6 slide-in" style={{ width: '100%', maxWidth: '1400px', maxHeight: '90vh', overflowY: 'auto', backgroundColor: 'rgba(17, 24, 39, 0.95)' }} onClick={(e) => e.stopPropagation()}>
                            {isLoading ? (
                                <div className="flex items-center justify-center py-20">
                                    <div className="text-green-400 text-xl">데이터 로딩 중...</div>
                                </div>
                            ) : (
                            <>
                            {/* 헤더 */}
                            <div className="flex items-center justify-between mb-6 pb-4 border-b border-gray-700">
                                <div className="flex items-center gap-4">
                                    <button
                                        onClick={() => setYearView(yearView - 1)}
                                        className="w-10 h-10 flex items-center justify-center glass-effect rounded-lg hover:border-green-400 transition-all text-gray-300"
                                    >
                                        ◀
                                    </button>
                                    <h3 className="text-3xl font-bold min-w-[100px] text-center" style={{ color: '#00FF88' }}>
                                        {yearView}
                                    </h3>
                                    <button
                                        onClick={() => setYearView(yearView + 1)}
                                        className="w-10 h-10 flex items-center justify-center glass-effect rounded-lg hover:border-green-400 transition-all text-gray-300"
                                    >
                                        ▶
                                    </button>
                                </div>
                                
                                <div className="flex items-center gap-4">
                                    <button
                                        onClick={() => setShowCalendarModal(false)}
                                        className="w-10 h-10 flex items-center justify-center hover:bg-white/10 rounded-lg transition-all"
                                    >
                                        <Icon icon={X} size={24} style={{ color: '#999' }} />
                                    </button>
                                </div>
                            </div>
                            
                            {/* 12개월 4x3 그리드 배열 */}
                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '12px' }}>
                                {Array.from({ length: 12 }, (_, i) => renderMonthCalendar(i))}
                            </div>
                            
                            {/* 색상 범례 */}
                            <div style={{ marginTop: '20px', padding: '10px', backgroundColor: 'rgba(30, 41, 59, 0.5)', borderRadius: '8px' }}>
                                <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '8px' }}>매출 금액별 색상 범례</div>
                                <div style={{ display: 'flex', gap: '15px', flexWrap: 'wrap', justifyContent: 'center' }}>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>
                                        <div style={{ width: '20px', height: '20px', backgroundColor: 'rgba(147, 197, 253, 0.3)', borderRadius: '3px' }}></div>
                                        <span style={{ fontSize: '11px', color: '#93c5fd' }}>~50만</span>
                                    </div>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>
                                        <div style={{ width: '20px', height: '20px', backgroundColor: 'rgba(110, 231, 183, 0.3)', borderRadius: '3px' }}></div>
                                        <span style={{ fontSize: '11px', color: '#6ee7b7' }}>50~100만</span>
                                    </div>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>
                                        <div style={{ width: '20px', height: '20px', backgroundColor: 'rgba(252, 211, 77, 0.3)', borderRadius: '3px' }}></div>
                                        <span style={{ fontSize: '11px', color: '#fcd34d' }}>100~200만</span>
                                    </div>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>
                                        <div style={{ width: '20px', height: '20px', backgroundColor: 'rgba(251, 146, 60, 0.3)', borderRadius: '3px', border: '1px solid rgba(251, 146, 60, 0.5)' }}></div>
                                        <span style={{ fontSize: '11px', color: '#fb923c' }}>200~300만</span>
                                    </div>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>
                                        <div style={{ width: '20px', height: '20px', backgroundColor: 'rgba(248, 113, 113, 0.3)', borderRadius: '3px', border: '1px solid rgba(248, 113, 113, 0.5)' }}></div>
                                        <span style={{ fontSize: '11px', color: '#f87171' }}>300만~</span>
                                    </div>
                                </div>
                            </div>
                            </>
                            )}
                        </div>
                    </div>
                );
            };

            // 로그인 화면
            if (isLoading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br text-gray-100 flex items-center justify-center">
                        <div className="text-2xl">로딩 중...</div>
                    </div>
                );
            }
            
            if (!user) {
                return (
                    <div className="min-h-screen" style={{ backgroundColor: '#1a1a1a' }}>
                        <div className="flex items-center justify-center min-h-screen p-4">
                            <div className="w-full" style={{ maxWidth: '440px' }}>
                                <div style={{ 
                                    backgroundColor: '#2d2d2d',
                                    borderRadius: '16px',
                                    padding: '40px',
                                    boxShadow: '0 4px 20px rgba(0, 0, 0, 0.5)'
                                }}>
                                    <div className="text-center mb-8">
                                        <h1 className="text-3xl font-bold mb-1">
                                            <span style={{ color: '#00FF88' }}>NeoFit</span>
                                            <span className="text-white ml-1">PayCalc</span>
                                        </h1>
                                        <p className="text-gray-400 text-sm">네오핏 급여 계산기</p>
                                    </div>
                                {!isSignUpMode ? (
                                    // 로그인 폼
                                    <>
                                        <form onSubmit={async (e) => {
                                            e.preventDefault();
                                            setLoginError('');
                                            const email = e.target.email.value;
                                            const password = e.target.password.value;
                                            
                                            const result = await authService.loginWithEmail(email, password);
                                            if (!result.success) {
                                                let errorMsg = result.error;
                                                if (result.error.includes('user-not-found')) {
                                                    errorMsg = '등록되지 않은 이메일입니다.';
                                                } else if (result.error.includes('wrong-password')) {
                                                    errorMsg = '잘못된 비밀번호입니다.';
                                                } else if (result.error.includes('invalid-login-credentials')) {
                                                    errorMsg = '이메일 또는 비밀번호가 올바르지 않습니다.';
                                                }
                                                setLoginError(errorMsg);
                                            }
                                        }} className="space-y-5">
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">이메일</label>
                                                <input
                                                    type="email"
                                                    name="email"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="gio7603@gmail.com"
                                                    required
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">비밀번호</label>
                                                <input
                                                    type="password"
                                                    name="password"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="비밀번호 입력"
                                                    required
                                                />
                                            </div>
                                            {loginError && (
                                                <div className="text-red-400 text-sm text-center py-2">
                                                    {loginError}
                                                </div>
                                            )}
                                            <button
                                                type="submit"
                                                className="w-full text-white font-medium py-3 px-4 transition-all duration-200 hover:opacity-90"
                                                style={{
                                                    backgroundColor: '#00FF88',
                                                    borderRadius: '12px',
                                                    fontSize: '16px',
                                                    border: 'none',
                                                    color: '#000',
                                                    marginTop: '24px'
                                                }}
                                            >
                                                로그인
                                            </button>
                                        </form>
                                        <div className="mt-6 pt-6" style={{ borderTop: '1px solid #3d3d3d' }}>
                                            <button
                                                onClick={() => setIsSignUpMode(true)}
                                                className="w-full py-3 px-4 transition-all duration-200 hover:opacity-80"
                                                style={{
                                                    backgroundColor: 'transparent',
                                                    border: '1px solid #4d4d4d',
                                                    borderRadius: '12px',
                                                    fontSize: '15px',
                                                    color: '#999'
                                                }}
                                            >
                                                회원가입
                                            </button>
                                        </div>
                                    </>
                                ) : (
                                    // 회원가입 폼
                                    <>
                                        <form onSubmit={async (e) => {
                                            e.preventDefault();
                                            setLoginError('');
                                            const email = e.target.email.value;
                                            const password = e.target.password.value;
                                            const confirmPassword = e.target.confirmPassword.value;
                                            
                                            if (password !== confirmPassword) {
                                                setLoginError('비밀번호가 일치하지 않습니다.');
                                                return;
                                            }
                                            
                                            if (password.length < 6) {
                                                setLoginError('비밀번호는 최소 6자 이상이어야 합니다.');
                                                return;
                                            }
                                            
                                            const result = await authService.signUpWithEmail(email, password);
                                            if (!result.success) {
                                                let errorMsg = result.error;
                                                if (result.error.includes('email-already-in-use')) {
                                                    errorMsg = '이미 사용 중인 이메일입니다.';
                                                } else if (result.error.includes('weak-password')) {
                                                    errorMsg = '비밀번호가 너무 약합니다.';
                                                } else if (result.error.includes('invalid-email')) {
                                                    errorMsg = '유효하지 않은 이메일 형식입니다.';
                                                }
                                                setLoginError(errorMsg);
                                            } else {
                                                alert('회원가입이 완료되었습니다!');
                                            }
                                        }} className="space-y-5">
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">이메일</label>
                                                <input
                                                    type="email"
                                                    name="email"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="새 이메일 입력"
                                                    required
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">비밀번호</label>
                                                <input
                                                    type="password"
                                                    name="password"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="비밀번호 (6자 이상)"
                                                    required
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium mb-2 text-gray-300">비밀번호 확인</label>
                                                <input
                                                    type="password"
                                                    name="confirmPassword"
                                                    className="w-full px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-all"
                                                    style={{
                                                        backgroundColor: '#3d3d3d',
                                                        borderRadius: '12px',
                                                        border: '1px solid #4d4d4d',
                                                        fontSize: '16px'
                                                    }}
                                                    placeholder="비밀번호 다시 입력"
                                                    required
                                                />
                                            </div>
                                            {loginError && (
                                                <div className="text-red-400 text-sm text-center py-2">
                                                    {loginError}
                                                </div>
                                            )}
                                            <button
                                                type="submit"
                                                className="w-full text-white font-medium py-3 px-4 transition-all duration-200 hover:opacity-90"
                                                style={{
                                                    backgroundColor: '#00FF88',
                                                    borderRadius: '12px',
                                                    fontSize: '16px',
                                                    border: 'none',
                                                    color: '#000',
                                                    marginTop: '24px'
                                                }}
                                            >
                                                회원가입
                                            </button>
                                        </form>
                                        <div className="mt-6 pt-6" style={{ borderTop: '1px solid #3d3d3d' }}>
                                            <button
                                                onClick={() => setIsSignUpMode(false)}
                                                className="w-full py-3 px-4 transition-all duration-200 hover:opacity-80"
                                                style={{
                                                    backgroundColor: 'transparent',
                                                    border: '1px solid #4d4d4d',
                                                    borderRadius: '12px',
                                                    fontSize: '15px',
                                                    color: '#999'
                                                }}
                                            >
                                                로그인으로 돌아가기
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>
                        </div>
                    </div>
                    </div>
                );
            }
            
            return (
                <div className="min-h-screen bg-gradient-to-br text-gray-100 p-4">
                    <div className="max-w-7xl mx-auto">
                        {/* 매출 입력 모달 */}
                        {showAddSaleModal && <AddSaleModal />}
                        {/* 검색 결과 모달 */}
                        {showSearchResultModal && <SearchResultModal />}
                        {/* 달력 모달 */}
                        <CalendarModal />
                        {/* 필라테스 매출 모달 */}
                        {showPilatesModal && <PilatesModal />}
                        {/* 헬스 이용권 매출 모달 */}
                        {showHealthModal && <HealthModal />}
                        {/* 네오핏 매출 모달 */}
                        {showNeofitModal && <NeofitModal />}
                        {/* 1:1 PT 매출 모달 */}
                        {showPtModal && <PtModal />}
                        {/* 운동복/락커 매출 모달 */}
                        {showClothingLockerModal && <ClothingLockerModal />}
                        {/* 기타 매출 모달 */}
                        {showOtherModal && <OtherModal />}
                        {/* 헤더 */}
                        <div className="text-center mb-8 sm:mb-10 relative">
                            <h1 className="text-3xl sm:text-5xl font-black mb-2 sm:mb-3" style={{ color: '#00FF88' }}>
                                NeoFit PayCalc
                            </h1>
                            <p className="text-gray-400 text-base sm:text-lg">네오핏 급여 계산기</p>
                            <button
                                onClick={() => authService.logout()}
                                className="absolute top-0 right-0 glass-effect hover:border-red-400 rounded-lg px-4 py-2 text-sm transition-all text-white"
                            >
                                로그아웃
                            </button>
                        </div>
                        
                        {/* 회원 검색 */}
                        <div className="mb-6 flex justify-center">
                            <div className="flex gap-2" style={{ maxWidth: '400px', width: '100%' }}>
                                <input
                                    type="text"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && searchCustomer()}
                                    placeholder="회원명을 검색하세요"
                                    className="flex-1 glass-effect rounded-lg px-4 py-3 focus:border-green-400 focus:outline-none"
                                />
                                <button
                                    onClick={searchCustomer}
                                    className="glass-effect border-green-500 hover:border-green-400 rounded-lg px-6 py-3 font-semibold transition-all hover:shadow-lg text-white"
                                >
                                    <Icon icon="search" size={20} />
                                </button>
                            </div>
                        </div>

                        {/* 뷰 모드 선택 */}
                        <div className="flex justify-center gap-2 mb-6">
                            <button
                                onClick={(e) => {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    setViewMode('daily');
                                }}
                                onTouchEnd={(e) => {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    setViewMode('daily');
                                }}
                                className={`px-4 py-2 rounded-lg font-semibold transition-all glass-effect ${
                                    viewMode === 'daily' 
                                        ? 'text-green-400 border-green-500 shadow-lg scale-105' 
                                        : 'text-gray-400 hover:text-white hover:border-gray-400'
                                }`}
                                style={viewMode === 'daily' ? { 
                                    backgroundColor: '#0a4a2c',
                                    borderColor: '#00FF88',
                                    boxShadow: '0 0 15px rgba(0, 255, 136, 0.5)',
                                    WebkitTapHighlightColor: 'transparent'
                                } : { WebkitTapHighlightColor: 'transparent' }}
                            >
                                일별
                            </button>
                            <button
                                onClick={(e) => {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    setViewMode('weekly');
                                }}
                                onTouchEnd={(e) => {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    setViewMode('weekly');
                                }}
                                className={`px-4 py-2 rounded-lg font-semibold transition-all glass-effect ${
                                    viewMode === 'weekly' 
                                        ? 'text-green-400 border-green-500 shadow-lg scale-105' 
                                        : 'text-gray-400 hover:text-white hover:border-gray-400'
                                }`}
                                style={viewMode === 'weekly' ? { 
                                    backgroundColor: '#0a4a2c',
                                    borderColor: '#00FF88',
                                    boxShadow: '0 0 15px rgba(0, 255, 136, 0.5)',
                                    WebkitTapHighlightColor: 'transparent'
                                } : { WebkitTapHighlightColor: 'transparent' }}
                            >
                                주별
                            </button>
                            <button
                                onClick={(e) => {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    setViewMode('monthly');
                                }}
                                onTouchEnd={(e) => {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    setViewMode('monthly');
                                }}
                                className={`px-4 py-2 rounded-lg font-semibold transition-all glass-effect ${
                                    viewMode === 'monthly' 
                                        ? 'text-green-400 border-green-500 shadow-lg scale-105' 
                                        : 'text-gray-400 hover:text-white hover:border-gray-400'
                                }`}
                                style={viewMode === 'monthly' ? { 
                                    backgroundColor: '#0a4a2c',
                                    borderColor: '#00FF88',
                                    boxShadow: '0 0 15px rgba(0, 255, 136, 0.5)',
                                    WebkitTapHighlightColor: 'transparent'
                                } : { WebkitTapHighlightColor: 'transparent' }}
                            >
                                월별
                            </button>
                        </div>
                        
                        {/* 직원 유형 선택 및 월 선택 */}
                        <div className="flex flex-col sm:flex-row justify-center gap-4 mb-10 flex-wrap">
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setEmployeeType('full')}
                                    className={`px-6 sm:px-8 py-3 rounded-xl font-semibold transition-all duration-300 text-sm sm:text-base glass-effect ${
                                        employeeType === 'full' 
                                            ? 'text-white border-green-500 shadow-lg scale-105 bg-green-500/20' 
                                            : 'text-gray-400 hover:text-white hover:border-gray-400'
                                    }`}
                                >
                                    정직원
                                </button>
                                <button
                                    onClick={() => setEmployeeType('part')}
                                    className={`px-6 sm:px-8 py-3 rounded-xl font-semibold transition-all duration-300 text-sm sm:text-base glass-effect ${
                                        employeeType === 'part' 
                                            ? 'text-white border-green-500 shadow-lg scale-105 bg-green-500/20' 
                                            : 'text-gray-400 hover:text-white hover:border-gray-400'
                                    }`}
                                >
                                    파트타임
                                </button>
                            </div>
                            
                            <div className="flex gap-3 w-full sm:w-auto items-center">
                                <select
                                    value={selectedMonth}
                                    onChange={(e) => {
                                        const value = parseInt(e.target.value);
                                        if (!isNaN(value)) {
                                            setSelectedMonth(value);
                                        }
                                    }}
                                    onInput={(e) => {
                                        const value = parseInt(e.target.value);
                                        if (!isNaN(value)) {
                                            setSelectedMonth(value);
                                        }
                                    }}
                                    className="glass-effect rounded-xl px-4 sm:px-6 py-3 focus:border-green-400 focus:outline-none font-medium transition-all hover:scale-105 text-sm sm:text-base flex-1 sm:flex-initial"
                                    style={{ borderColor: '#00C66E' }}
                                >
                                    {Array.from({ length: 12 }, (_, i) => (
                                        <option key={i} value={i}>
                                            {new Date(2024, i).toLocaleDateString('ko-KR', { month: 'long' })}
                                        </option>
                                    ))}
                                </select>
                                <select
                                    value={selectedYear}
                                    onChange={(e) => {
                                        const value = parseInt(e.target.value);
                                        if (!isNaN(value)) {
                                            setSelectedYear(value);
                                        }
                                    }}
                                    onInput={(e) => {
                                        const value = parseInt(e.target.value);
                                        if (!isNaN(value)) {
                                            setSelectedYear(value);
                                        }
                                    }}
                                    className="glass-effect rounded-xl px-4 sm:px-6 py-3 focus:border-green-400 focus:outline-none font-medium transition-all hover:scale-105 text-sm sm:text-base flex-1 sm:flex-initial"
                                    style={{ borderColor: '#00C66E' }}
                                >
                                    {[2024, 2025, 2026].map(year => (
                                        <option key={year} value={year}>{year}년</option>
                                    ))}
                                </select>
                                <button
                                    onClick={() => setShowCalendarModal(true)}
                                    className="glass-effect rounded-xl p-3 border-green-500 hover:border-green-400 transition-all hover:shadow-lg"
                                    title="연간 달력 보기"
                                >
                                    <Icon icon={Calendar} size={20} style={{ color: '#00FF88' }} />
                                </button>
                            </div>
                        </div>

                        {/* 통계 요약 */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">오늘 매출</p>
                                <p className="text-2xl font-bold text-white">
                                    {getTodaySales().toLocaleString()}원
                                </p>
                            </div>
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">이번주 매출</p>
                                <p className="text-2xl font-bold" style={{ color: '#00C6FF' }}>
                                    {getThisWeekSales().toLocaleString()}원
                                </p>
                            </div>
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">월 매출</p>
                                <p className="text-2xl font-bold" style={{
                                    color: '#FF6B35',
                                    textShadow: '0 0 10px rgba(255, 107, 53, 0.5), 0 0 20px rgba(255, 107, 53, 0.3), 0 0 30px rgba(255, 107, 53, 0.2)'
                                }}>
                                    {monthlyTotal.toLocaleString()}원
                                </p>
                            </div>
                            <div className="glass-effect rounded-2xl p-4 text-center transition-all">
                                <p className="text-gray-400 text-sm mb-1">예상 인센티브</p>
                                <p className="text-2xl font-bold" style={{ 
                                    color: '#00FF88',
                                    textShadow: '0 0 10px rgba(0, 255, 136, 0.8), 0 0 20px rgba(0, 255, 136, 0.6), 0 0 30px rgba(0, 255, 136, 0.4)'
                                }}>
                                    {Math.floor(incentiveAmount).toLocaleString()}원
                                </p>
                            </div>
                        </div>

                        {/* 매출 현황 */}
                        <div className="gradient-border mb-8">
                            <div>
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-2xl font-bold flex items-center gap-3">
                                        <div className="p-2 bg-green-500/20 rounded-lg">
                                            <Icon icon={Calendar} size={28} style={{ color: '#00FF88' }} />
                                        </div>
                                        {viewMode === 'daily' ? '일별 매출 현황' : viewMode === 'weekly' ? '주별 매출 현황' : '월별 매출 현황'}
                                    </h2>
                                    {viewMode === 'daily' && (
                                        <div className="flex gap-2">
                                            <div className="relative group">
                                                <button
                                                    onClick={() => {
                                                        const today = new Date();
                                                        const todayDate = today.getDate();
                                                        const isCurrentMonth = today.getMonth() === selectedMonth && today.getFullYear() === selectedYear;
                                                        
                                                        if (isCurrentMonth) {
                                                            // 현재 달이면 오늘 날짜로 스크롤
                                                            const todayElement = document.getElementById(`day-${todayDate}`);
                                                            if (todayElement) {
                                                                todayElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                                            }
                                                            // 오늘 날짜의 매출 입력 모달 열기
                                                            openAddSaleModal(todayDate);
                                                        } else {
                                                            // 다른 달이면 1일로 이동
                                                            openAddSaleModal(1);
                                                        }
                                                    }}
                                                    className="glass-effect rounded-full p-3 border-blue-500 hover:border-blue-400 transition-all hover:shadow-lg"
                                                >
                                                <Icon icon={Plus} size={24} style={{ color: 'white' }} />
                                            </button>
                                            <div className="absolute right-0 top-full mt-2 bg-gray-800 text-white text-sm px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
                                                오늘 매출 입력하기
                                            </div>
                                            </div>
                                            
                                            {/* 정산체크 해제 및 매출 카테고리 버튼들 */}
                                            <div className="flex flex-wrap gap-2">
                                                <button
                                                    onClick={() => {
                                                        setCheckedDetails({});
                                                    }}
                                                    className="relative glass-effect rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl group"
                                                    style={{
                                                        fontSize: '10px',
                                                        background: 'linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(147, 51, 234, 0.2) 100%)',
                                                        border: '2px solid rgba(59, 130, 246, 0.4)',
                                                        color: '#60A5FA'
                                                    }}
                                                >
                                                    <div className="absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                                    <div className="relative">
                                                        <span>정산체크</span>
                                                    </div>
                                                </button>

                                                <button
                                                    onClick={() => {
                                                        setShowHealthModal(true);
                                                    }}
                                                    className="relative glass-effect rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl group"
                                                    style={{
                                                        fontSize: '10px',
                                                        background: 'linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(16, 185, 129, 0.2) 100%)',
                                                        border: '2px solid rgba(34, 197, 94, 0.4)',
                                                        color: '#22C55E'
                                                    }}
                                                >
                                                    <div className="absolute inset-0 rounded-xl bg-gradient-to-r from-green-500/20 to-emerald-500/20 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                                    <div className="relative">
                                                        <span>헬스 이용권</span>
                                                    </div>
                                                </button>

                                                <button
                                                    onClick={() => {
                                                        setShowNeofitModal(true);
                                                    }}
                                                    className="relative glass-effect rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl group"
                                                    style={{
                                                        fontSize: '10px',
                                                        background: 'linear-gradient(135deg, rgba(78, 205, 196, 0.2) 0%, rgba(56, 178, 172, 0.2) 100%)',
                                                        border: '2px solid rgba(78, 205, 196, 0.4)',
                                                        color: '#4ECDC4'
                                                    }}
                                                >
                                                    <div className="absolute inset-0 rounded-xl bg-gradient-to-r from-teal-400/20 to-teal-500/20 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                                    <div className="relative">
                                                        <span>네오핏 매출</span>
                                                    </div>
                                                </button>

                                                <button
                                                    onClick={() => {
                                                        setShowPtModal(true);
                                                    }}
                                                    className="relative glass-effect rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl group"
                                                    style={{
                                                        fontSize: '10px',
                                                        background: 'linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(217, 119, 6, 0.2) 100%)',
                                                        border: '2px solid rgba(245, 158, 11, 0.4)',
                                                        color: '#F59E0B'
                                                    }}
                                                >
                                                    <div className="absolute inset-0 rounded-xl bg-gradient-to-r from-amber-500/20 to-yellow-600/20 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                                    <div className="relative">
                                                        <span>1:1 PT 매출</span>
                                                    </div>
                                                </button>

                                                <button
                                                    onClick={() => {
                                                        setShowPilatesModal(true);
                                                    }}
                                                    className="relative glass-effect rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl group"
                                                    style={{
                                                        fontSize: '10px',
                                                        background: 'linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(251, 113, 133, 0.2) 100%)',
                                                        border: '2px solid rgba(236, 72, 153, 0.4)',
                                                        color: '#F472B6'
                                                    }}
                                                >
                                                    <div className="absolute inset-0 rounded-xl bg-gradient-to-r from-pink-500/20 to-rose-500/20 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                                    <div className="relative">
                                                        <span>필라테스 매출</span>
                                                    </div>
                                                </button>

                                                <button
                                                    onClick={() => {
                                                        setShowClothingLockerModal(true);
                                                    }}
                                                    className="relative glass-effect rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl group"
                                                    style={{
                                                        fontSize: '10px',
                                                        background: 'linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(147, 51, 234, 0.2) 100%)',
                                                        border: '2px solid rgba(168, 85, 247, 0.4)',
                                                        color: '#A855F7'
                                                    }}
                                                >
                                                    <div className="absolute inset-0 rounded-xl bg-gradient-to-r from-purple-500/20 to-violet-500/20 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                                    <div className="relative">
                                                        <span>운동복/락커</span>
                                                    </div>
                                                </button>

                                                <button
                                                    onClick={() => {
                                                        setShowOtherModal(true);
                                                    }}
                                                    className="relative glass-effect rounded-xl px-6 py-3 font-semibold transition-all duration-300 hover:scale-105 hover:shadow-xl group"
                                                    style={{
                                                        fontSize: '10px',
                                                        background: 'linear-gradient(135deg, rgba(156, 163, 175, 0.2) 0%, rgba(107, 114, 128, 0.2) 100%)',
                                                        border: '2px solid rgba(156, 163, 175, 0.4)',
                                                        color: '#9CA3AF'
                                                    }}
                                                >
                                                    <div className="absolute inset-0 rounded-xl bg-gradient-to-r from-gray-500/20 to-gray-600/20 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                                                    <div className="relative">
                                                        <span>기타 매출</span>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    )}
                                </div>
                                
                                {/* 일별 뷰 */}
                                {viewMode === 'daily' && (
                                    <div ref={dailyViewRef} className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-4 max-h-[650px] overflow-y-auto p-2" style={{display: 'grid', gridTemplateColumns: window.innerWidth < 640 ? 'repeat(1, minmax(0, 1fr))' : 'repeat(3, minmax(0, 1fr))'}}>
                                        {Array.from({ length: getDaysInMonth() }, (_, i) => i + 1).map(day => {
                                        const dateKey = getDateKey(day);
                                        const dayData = salesData[dateKey] || { amount: 0, approved: false, details: [] };
                                        const date = new Date(selectedYear, selectedMonth, day);
                                        const dayName = date.toLocaleDateString('ko-KR', { weekday: 'short' });
                                        const isWeekend = date.getDay() === 0 || date.getDay() === 6;
                                        
                                        return (
                                            <div key={day} id={`day-${day}`} className={`glass-effect rounded-2xl p-4 sm:p-5 hover:scale-[1.02] transition-all duration-300 slide-in ${isWeekend ? 'border-pink-500/30' : ''}`}>
                                                <div className="flex items-center justify-between mb-3 sm:mb-4">
                                                    <div className="flex items-center gap-2 sm:gap-3">
                                                        <span className={`text-base sm:text-lg font-bold ${isWeekend ? 'text-pink-400' : 'text-white'}`}>
                                                            {selectedMonth + 1}월 {day}일
                                                        </span>
                                                        <span className={`text-xs sm:text-sm px-2 py-1 rounded-full ${isWeekend ? 'bg-pink-500/20 text-pink-400' : 'bg-gray-700 text-gray-400'}`}>
                                                            {dayName}
                                                        </span>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        {dayData.approved && (
                                                            <div className="flex items-center gap-2">
                                                                <Icon icon={Check} size={20} style={{ color: '#00FF88' }} />
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                                
                                                <div className={`rounded-xl p-3 sm:p-4 mb-3 sm:mb-4 ${dayData.amount > 0 ? 'bg-gradient-to-r from-green-500/10 to-blue-500/10' : 'bg-gray-800/50'}`}>
                                                    <div className="text-2xl sm:text-3xl font-black mb-1" style={{ color: dayData.amount > 0 ? '#00FF88' : '#6b7280' }}>
                                                        {(dayData.amount || 0).toLocaleString()}원
                                                    </div>
                                                    <div className="text-xs sm:text-sm text-gray-400 flex items-center gap-2">
                                                        <Icon icon={Package} size={14} />
                                                        {dayData.details?.length || 0}건의 매출
                                                    </div>
                                                </div>

                                                {/* 매출 상세 내역 */}
                                                {dayData.details && dayData.details.length > 0 && (
                                                    <div className="mb-4">
                                                        <div className="flex flex-col gap-2 mb-3">
                                                            <div className="text-sm font-semibold text-gray-300 flex items-center gap-2">
                                                                <Icon icon={DollarSign} size={16} />
                                                                매출 내역 ({dayData.details.length}건)
                                                            </div>
                                                            <div className="flex items-center justify-start gap-1 text-xs overflow-x-auto">
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#95E1D3' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">~10</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#4ECDC4' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">10~</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#6BCF7F' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">30~</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#FFD93D' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">50~</span>
                                                                </span>
                                                                <span className="flex items-center gap-1 whitespace-nowrap">
                                                                    <span className="w-2 h-2 rounded-full" style={{ backgroundColor: '#FF6B6B' }}></span>
                                                                    <span className="text-gray-500 text-[10px]">100~</span>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div className="space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                                                            {dayData.details.map((detail, index) => (
                                                                <div key={detail.id} className="relative">
                                                                    <div className="glass-effect rounded-xl p-4 hover:scale-[1.01] transition-all border border-gray-700/50 hover:border-green-500/30">
                                                                        <div className="flex justify-between items-start gap-3">
                                                                            <div className="flex-1">
                                                                                <div className="flex items-start justify-between mb-2">
                                                                                    <div className="flex items-center gap-2">
                                                                                        <div className="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                                                                                            <span className="text-xs font-bold text-green-400">{index + 1}</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <div className="font-semibold text-white text-sm">
                                                                                                {detail.customerName}
                                                                                            </div>
                                                                                            <div className="text-gray-500 text-xs">
                                                                                                {detail.timestamp}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div className="flex items-center gap-2">
                                                                                        <input
                                                                                            type="checkbox"
                                                                                            checked={checkedDetails[`${dateKey}_${detail.id}`] || false}
                                                                                            onChange={(e) => {
                                                                                                setCheckedDetails(prev => ({
                                                                                                    ...prev,
                                                                                                    [`${dateKey}_${detail.id}`]: e.target.checked
                                                                                                }));
                                                                                            }}
                                                                                            className="w-4 h-4 rounded cursor-pointer"
                                                                                            style={{
                                                                                                accentColor: '#00FF88'
                                                                                            }}
                                                                                        />
                                                                                        <div className="font-bold text-lg" style={{ color: getPriceColor(detail.price || 0) }}>
                                                                                            {(detail.price || 0).toLocaleString()}원
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div className="bg-gray-800/50 rounded-lg px-3 py-2 text-xs text-gray-300">
                                                                                    {detail.product}
                                                                                </div>
                                                                            </div>
                                                                            {!dayData.approved && (
                                                                                <button
                                                                                    onClick={() => removeSaleDetail(day, detail.id)}
                                                                                    className="text-red-400 hover:text-red-300 p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 transition-all"
                                                                                >
                                                                                    <Icon icon={Trash2} size={16} />
                                                                                </button>
                                                                            )}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            ))}
                                                        </div>
                                                    </div>
                                                )}

                                                {/* 매출이 없을 때 안내 */}
                                                {(!dayData.details || dayData.details.length === 0) && dayData.amount === 0 && (
                                                    <div className="text-center py-6 text-gray-500 text-sm glass-effect rounded-xl mb-4">
                                                        <Icon icon={DollarSign} size={24} className="mx-auto mb-2 opacity-30" />
                                                        등록된 매출이 없습니다
                                                    </div>
                                                )}

                                                {/* 매출 입력 버튼 */}
                                                {!dayData.approved && (
                                                    <button
                                                        onClick={() => openAddSaleModal(day)}
                                                        className="w-full glass-effect border-blue-500 hover:border-blue-400 rounded-xl py-3 text-sm font-semibold transition-all flex items-center justify-center gap-2 mb-4"
                                                        style={{
                                                            color: '#00C6FF',
                                                            textShadow: '0 0 10px #00C6FF, 0 0 20px #00C6FF, 0 0 30px #00C6FF, 0 0 40px #00C6FF',
                                                            boxShadow: '0 0 20px rgba(0, 198, 255, 0.5), inset 0 0 20px rgba(0, 198, 255, 0.1)',
                                                            animation: 'neonBluePulse 2s ease-in-out infinite'
                                                        }}
                                                    >
                                                        <Icon icon={Plus} size={18} style={{ filter: 'drop-shadow(0 0 8px #00C6FF)' }} />
                                                        빠른 매출 입력
                                                    </button>
                                                )}

                                                {/* 매출 입력 폼 */}
                                                {expandedDays[day] && !dayData.approved && (
                                                    <div className="glass-effect rounded-xl p-5 mb-4 space-y-4 slide-in">
                                                        <div className="text-sm font-bold text-green-400 mb-4 flex items-center gap-2">
                                                            <Icon icon={Edit} size={16} />
                                                            {selectedMonth + 1}월 {day}일 매출 입력
                                                        </div>

                                                        {/* 회원명 입력 */}
                                                        <div>
                                                            <label className="block text-xs font-semibold mb-2 text-gray-300 flex items-center gap-2">
                                                                <Icon icon="user" size={14} />
                                                                회원명
                                                            </label>
                                                            <input
                                                                type="text"
                                                                value={customerName[day] || ''}
                                                                onChange={(e) => setCustomerName(prev => ({
                                                                    ...prev,
                                                                    [day]: e.target.value
                                                                }))}
                                                                placeholder="회원명을 입력하세요"
                                                                className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none text-sm transition-all"
                                                            />
                                                        </div>

                                                        {/* 상품 선택 */}
                                                        <div>
                                                            <label className="block text-xs font-semibold mb-2 text-gray-300 flex items-center gap-2">
                                                                <Icon icon={Package} size={14} />
                                                                상품
                                                            </label>
                                                            <select
                                                                value={selectedProducts[day] || ''}
                                                                onChange={(e) => setSelectedProducts(prev => ({
                                                                    ...prev,
                                                                    [day]: e.target.value
                                                                }))}
                                                                className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none text-sm transition-all"
                                                            >
                                                                <option value="">상품을 선택하세요</option>
                                                                {products.map(product => (
                                                                    <option key={product} value={product}>{product}</option>
                                                                ))}
                                                            </select>
                                                        </div>

                                                        {/* 가격 입력 */}
                                                        <div>
                                                            <label className="block text-xs font-semibold mb-2 text-gray-300 flex items-center gap-2">
                                                                <Icon icon={CreditCard} size={14} />
                                                                가격
                                                            </label>
                                                            <input
                                                                type="number"
                                                                value={customPrices[day] || ''}
                                                                onChange={(e) => setCustomPrices(prev => ({
                                                                    ...prev,
                                                                    [day]: e.target.value
                                                                }))}
                                                                placeholder="가격을 입력하세요"
                                                                className="glass-effect rounded-lg px-4 py-3 w-full focus:border-green-400 focus:outline-none text-sm transition-all"
                                                            />
                                                        </div>

                                                        {/* 등록 버튼 */}
                                                        <button
                                                            onClick={() => addSaleDetail(day)}
                                                            className="w-full glass-effect border-green-500 hover:border-green-400 rounded-lg py-3 font-semibold text-sm transition-all hover:shadow-lg text-white"
                                                        >
                                                            매출 등록
                                                        </button>
                                                    </div>
                                                )}
                                                
                                                {!dayData.approved ? (
                                                    <div className="flex gap-1 sm:gap-2 items-center w-full">
                                                        <input
                                                            type="password"
                                                            value={approvalPasswords[dateKey] || ''}
                                                            onChange={(e) => {
                                                                const newValue = e.target.value;
                                                                setApprovalPasswords(prev => ({
                                                                    ...prev,
                                                                    [dateKey]: newValue
                                                                }));
                                                            }}
                                                            placeholder="PW"
                                                            className="glass-effect rounded-xl px-2 py-3 w-full max-w-[100px] sm:max-w-[150px] focus:border-green-400 focus:outline-none text-xs sm:text-base transition-all text-center"
                                                            style={{ fontSize: '16px' }}
                                                            onKeyPress={(e) => {
                                                                if (e.key === 'Enter') {
                                                                    handleAdminApproval(day);
                                                                }
                                                            }}
                                                        />
                                                        <button
                                                            onClick={() => handleAdminApproval(day)}
                                                            className="glass-effect border-blue-500 hover:border-blue-400 rounded-xl px-3 sm:px-6 py-3 text-xs sm:text-base font-semibold transition-all whitespace-nowrap hover:shadow-lg text-white flex-shrink-0"
                                                        >
                                                            승인
                                                        </button>
                                                    </div>
                                                ) : (
                                                    <div className="space-y-3">
                                                        <button
                                                            className="glass-effect border-green-500 rounded-xl px-4 py-3 text-base font-semibold cursor-default flex items-center gap-2 w-full justify-center"
                                                            style={{
                                                                color: '#00FF88',
                                                                textShadow: '0 0 10px #00FF88, 0 0 20px #00FF88, 0 0 30px #00FF88, 0 0 40px #00FF88',
                                                                boxShadow: '0 0 20px rgba(0, 255, 136, 0.5), inset 0 0 20px rgba(0, 255, 136, 0.1)',
                                                                animation: 'neonGreenPulse 2s ease-in-out infinite'
                                                            }}
                                                            disabled
                                                        >
                                                            <Icon icon={Check} size={18} style={{ filter: 'drop-shadow(0 0 8px #00FF88)' }} />
                                                            정산완료
                                                        </button>
                                                        <div className="flex gap-1 sm:gap-2 items-center w-full">
                                                            <input
                                                                type="password"
                                                                value={editPasswords[dateKey] || ''}
                                                                onChange={(e) => {
                                                                    const newValue = e.target.value;
                                                                    setEditPasswords(prev => ({
                                                                        ...prev,
                                                                        [dateKey]: newValue
                                                                    }));
                                                                }}
                                                                placeholder="PW"
                                                                className="glass-effect rounded-xl px-2 py-3 w-full max-w-[100px] sm:max-w-[150px] focus:border-orange-400 focus:outline-none text-xs sm:text-base transition-all text-center"
                                                                style={{ fontSize: '16px' }}
                                                                onKeyPress={(e) => {
                                                                    if (e.key === 'Enter') {
                                                                        handleEditMode(day);
                                                                    }
                                                                }}
                                                            />
                                                            <button
                                                                onClick={() => handleEditMode(day)}
                                                                className="glass-effect border-orange-500 hover:border-orange-400 rounded-xl px-2 sm:px-6 py-3 text-xs sm:text-base font-semibold transition-all whitespace-nowrap flex items-center gap-1 hover:shadow-lg text-white flex-shrink-0"
                                                            >
                                                                <Icon icon={Edit} size={16} />
                                                                <span className="hidden sm:inline">수정</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        );
                                        })}
                                    </div>
                                )}
                                
                                {/* 주별 뷰 */}
                                {viewMode === 'weekly' && (
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        {calculateWeeklySales().map((week, index) => {
                                            // week.days가 없거나 비어있으면 건너뛰기
                                            if (!week || !week.days || week.days.length === 0) {
                                                return null;
                                            }
                                            
                                            return (
                                                <div key={index} className="glass-effect rounded-2xl p-6 hover:scale-[1.02] transition-all">
                                                    <h3 className="text-xl font-bold mb-4 flex items-center justify-between">
                                                        <span>{week.days[0]}일 - {week.days[week.days.length - 1]}일</span>
                                                        <span className="text-2xl" style={{ color: '#00C6FF' }}>
                                                            {(week.total || 0).toLocaleString()}원
                                                        </span>
                                                    </h3>
                                                    <div className="space-y-2">
                                                        {week.days.map(day => {
                                                            const dateKey = getDateKey(day);
                                                            const dayData = salesData[dateKey] || { amount: 0, approved: false };
                                                            return (
                                                                <div key={day} className="flex justify-between items-center py-2 border-b border-gray-700">
                                                                    <span className="text-gray-400">{selectedMonth + 1}월 {day}일</span>
                                                                    <span className={dayData.approved ? 'text-green-400' : 'text-gray-500'}>
                                                                        {(dayData.amount || 0).toLocaleString()}원
                                                                    </span>
                                                                </div>
                                                            );
                                                        })}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                                
                                {/* 월별 뷰 */}
                                {viewMode === 'monthly' && (
                                    <div className="glass-effect rounded-2xl p-8">
                                        <div className="text-center">
                                            <h3 className="text-3xl font-bold mb-2">{selectedYear}년 {selectedMonth + 1}월</h3>
                                            <p className="text-5xl font-black mb-4" style={{ color: '#00FF88' }}>
                                                {monthlyTotal.toLocaleString()}원
                                            </p>
                                            <div className="grid grid-cols-2 gap-4 mt-8">
                                                <div className="bg-gray-800/50 rounded-xl p-4">
                                                    <p className="text-gray-400 mb-2">승인된 매출</p>
                                                    <p className="text-2xl font-bold text-green-400">
                                                        {Object.entries(salesData).filter(([_, data]) => data.approved).length}건
                                                    </p>
                                                </div>
                                                <div className="bg-gray-800/50 rounded-xl p-4">
                                                    <p className="text-gray-400 mb-2">평균 일매출</p>
                                                    <p className="text-2xl font-bold">
                                                        {Math.floor(monthlyTotal / getDaysInMonth()).toLocaleString()}원
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* 주간 매출 합계 */}
                        <div className="gradient-border mb-8">
                            <div>
                                <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                    <div className="p-2 bg-blue-500/20 rounded-lg">
                                        <Icon icon={TrendingUp} size={28} style={{ color: '#00C6FF' }} />
                                    </div>
                                    주간 매출 합계
                                </h2>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                    {weeklySales.map((week, index) => {
                                        // week.days가 없거나 비어있으면 건너뛰기
                                        if (!week || !week.days || week.days.length === 0) {
                                            return null;
                                        }
                                        
                                        return (
                                            <div key={index} className="glass-effect rounded-2xl p-5 hover:scale-105 transition-all duration-300">
                                                <div className="flex flex-col">
                                                    <span className="text-sm text-gray-400 mb-2">
                                                        {week.days[0]}일 - {week.days[week.days.length - 1]}일
                                                    </span>
                                                    <span className="text-2xl font-black" style={{ color: '#00C6FF' }}>
                                                        {(week.total || 0).toLocaleString()}원
                                                    </span>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>

                        {/* 월별 매출 리포트 통계 */}
                        <div className="gradient-border mb-8">
                            <div className="bg-gradient-to-br from-gray-800/50 to-gray-900/50">
                                <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
                                    <div className="p-2 bg-purple-500/20 rounded-lg">
                                        📊
                                    </div>
                                    월별 매출 리포트
                                </h2>

                                {/* 월별 매출 리포트 */}
                                <div className="glass-effect rounded-2xl p-6 mb-6">
                                    <h3 className="text-lg font-semibold mb-6 text-gray-300">📅 월별 매출 리포트</h3>
                                    <div className="relative h-64 bg-gray-900/30 rounded-xl p-6 overflow-hidden">
                                        {/* 그리드 라인 */}
                                        <div className="absolute inset-0 opacity-20">
                                            {[0, 25, 50, 75, 100].map((percentage, index) => (
                                                <div
                                                    key={index}
                                                    className="absolute w-full border-t border-gray-400"
                                                    style={{ top: `${percentage}%` }}
                                                ></div>
                                            ))}
                                        </div>


                                        {/* 간단한 매출 그래프 */}
                                        <div className="relative h-full">
                                            {(() => {
                                                // 실제 월별 데이터 생성 (임시 테스트 데이터 포함)
                                                const getRealMonthlyData = (categoryType) => {
                                                    // 실제 6개월간 매출 계산 (현재월 기준 -4월~+1월)
                                                    const currentDate = new Date();
                                                    const realData = [];

                                                    for (let i = -4; i <= 1; i++) {
                                                        const targetDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + i, 1);
                                                        const year = targetDate.getFullYear();
                                                        const month = targetDate.getMonth() + 1;

                                                        // 실제 매출 데이터 계산
                                                        const monthlySales = calculateMonthlyCategorySales(year, month, categoryType);
                                                        realData.push(monthlySales);
                                                    }

                                                    // 실제 데이터 사용 (테스트 데이터 제거)
                                                    const finalData = realData;

                                                    // 총매출 확인을 위한 로그 (처음에만)
                                                    if (categoryType === 'health') {
                                                        console.log(`=== ${categoryType} 카테고리 월별 매출 ===`);
                                                        realData.forEach((sales, index) => {
                                                            const targetDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + (index - 4), 1);
                                                            const monthStr = `${targetDate.getFullYear()}년 ${targetDate.getMonth() + 1}월`;
                                                            console.log(`${monthStr}: ${sales.toLocaleString()}원`);
                                                        });
                                                    }

                                                    return finalData;
                                                };

                                                // 실제 데이터 기반 카테고리 생성
                                                const categories = [
                                                    {
                                                        name: '헬스',
                                                        icon: '🏃‍♂️',
                                                        color: '#10B981',
                                                        data: getRealMonthlyData('health')
                                                    },
                                                    {
                                                        name: '네오핏',
                                                        icon: '🔥',
                                                        color: '#4ECDC4',
                                                        data: getRealMonthlyData('neofit')
                                                    },
                                                    {
                                                        name: 'PT',
                                                        icon: '🏋️',
                                                        color: '#FFD700',
                                                        data: getRealMonthlyData('pt')
                                                    },
                                                    {
                                                        name: '필라테스',
                                                        icon: '🧘‍♀️',
                                                        color: '#F472B6',
                                                        data: getRealMonthlyData('pilates')
                                                    }
                                                ];

                                                // 동적으로 최근 6개월 라벨 생성 (현재월 기준 -4월~+1월)
                                                const months = [];
                                                const currentDate = new Date();
                                                // 9월이면 5월~10월 표시 (9-4=5월부터 9+1=10월까지)
                                                for (let i = -4; i <= 1; i++) {
                                                    const targetDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + i, 1);
                                                    months.push(`${targetDate.getMonth() + 1}월`);
                                                }

                                                // 동적으로 최대값 계산 (안전하게 처리)
                                                const allValues = categories.flatMap(cat => cat.data).filter(val => val > 0);
                                                const maxValue = allValues.length > 0 ? Math.max(...allValues) : 1000000; // 기본값 100만원으로 낮춤

                                                // 여유 공간을 두고 보기 좋은 최대값 설정 (최대값의 120%)
                                                const paddedMax = maxValue * 1.2;

                                                // 백만 단위로 올림 처리 - 최소값을 50만원으로 낮춤
                                                const roundedMax = Math.max(Math.ceil(paddedMax / 500000) * 500000, 500000); // 최소 50만원

                                                // Y축 눈금 생성 (5개 구간) - 실제 매출에 따라 자동 조정
                                                const yTicks = [];
                                                const tickInterval = roundedMax / 4;
                                                for (let i = 4; i >= 0; i--) {
                                                    yTicks.push(tickInterval * i);
                                                }

                                                return (
                                                    <div className="p-4">
                                                        {/* 디버그 정보 */}
                                                        <div className="mb-4 text-sm text-yellow-300 bg-yellow-900/20 p-2 rounded">
                                                            🔍 그래프 데이터: {allValues.length}개 값, 최대값: {maxValue.toLocaleString()}원
                                                            <br />📊 카테고리 수: {categories.length}개, 라인 색상: {categories.map(c => c.color).join(', ')}
                                                        </div>

                                                        {/* 범례 */}
                                                        <div className="flex gap-6 mb-6 text-sm">
                                                            {categories.map((category, index) => (
                                                                <div key={index} className="flex items-center gap-2">
                                                                    <div
                                                                        className="w-3 h-3 rounded-full"
                                                                        style={{ backgroundColor: category.color }}
                                                                    ></div>
                                                                    <span className="text-gray-300 font-medium">
                                                                        {category.icon} {category.name}
                                                                    </span>
                                                                </div>
                                                            ))}
                                                        </div>

                                                        {/* 차트 영역 */}
                                                        <div className="relative">
                                                            {/* Y축 라벨 */}
                                                            <div className="absolute -left-20 top-0 h-96 flex flex-col justify-between text-xs text-gray-400">
                                                                {yTicks.map((tick, index) => (
                                                                    <div key={index} className="text-right">
                                                                        {tick === 0 ? '0' : tick >= 1000000 ? `${Math.round(tick / 1000000)}백만` : `${Math.round(tick / 10000)}만`}
                                                                    </div>
                                                                ))}
                                                            </div>

                                                            {/* 메인 차트 */}
                                                            <div className="ml-4 relative bg-gray-800/20 rounded-lg border border-gray-700" style={{ width: '100%', height: '320px', padding: '20px' }}>
                                                                {/* 차트 배경과 테두리 */}
                                                                <div className="absolute inset-5 border-l-2 border-b-2 border-gray-400"></div>

                                                                {/* 가로 기준선 - Y축 매출 구간별 */}
                                                                {yTicks.map((tick, index) => (
                                                                    <div key={`h-${index}`}>
                                                                        {/* 기준선 - 더 불투명하게 */}
                                                                        <div
                                                                            className="absolute"
                                                                            style={{
                                                                                left: '20px',
                                                                                right: '20px',
                                                                                top: `${20 + (index / 4) * 280}px`,
                                                                                borderTop: index === 4 ? '1px solid #64748B' : '1px solid #94A3B8',
                                                                                opacity: index === 4 ? 0.4 : 0.25
                                                                            }}
                                                                        ></div>
                                                                        {/* 기준값 표시 - 더 오른쪽으로 이동 */}
                                                                        <div
                                                                            className="absolute text-xs text-gray-400 font-medium"
                                                                            style={{
                                                                                right: '-40px',
                                                                                top: `${15 + (index / 4) * 280}px`,
                                                                                transform: 'translateY(-50%)',
                                                                                background: 'rgba(0,0,0,0.8)',
                                                                                padding: '2px 6px',
                                                                                borderRadius: '4px',
                                                                                whiteSpace: 'nowrap'
                                                                            }}
                                                                        >
                                                                            {tick === 0 ? '0' : `${Math.round(tick / 1000000)}백만`}
                                                                        </div>
                                                                    </div>
                                                                ))}

                                                                {/* 세로선 격자 - 호버 영역 포함 */}
                                                                {months.map((month, index) => {
                                                                    // 해당 월의 총 매출 계산 (정확한 계산)
                                                                    const currentDate = new Date();
                                                                    const targetDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - (5 - index), 1);
                                                                    const targetYear = targetDate.getFullYear();
                                                                    const targetMonth = targetDate.getMonth() + 1;

                                                                    const monthTotal = calculateMonthlyTotalSales(targetYear, targetMonth);
                                                                    const hasData = monthTotal > 0;

                                                                    return (
                                                                        <div
                                                                            key={`v-${index}`}
                                                                            className="absolute opacity-50 hover:opacity-80 cursor-crosshair group"
                                                                            style={{
                                                                                left: `calc(${(index * 100) / 6}%)`,
                                                                                width: `${100 / 6}%`,
                                                                                top: '20px',
                                                                                bottom: '20px',
                                                                                zIndex: 15
                                                                            }}
                                                                            onMouseMove={(e) => {
                                                                                // 마우스 위치로 날짜 계산
                                                                                const rect = e.currentTarget.getBoundingClientRect();
                                                                                const relativeX = (e.clientX - rect.left) / rect.width;
                                                                                const day = Math.max(1, Math.min(31, Math.ceil(relativeX * 31)));

                                                                                // 날짜 문자열 생성
                                                                                const currentDate = new Date();
                                                                                const targetDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - (5 - index), 1);
                                                                                const monthStr = `${targetDate.getFullYear()}-${String(targetDate.getMonth() + 1).padStart(2, '0')}`;
                                                                                const dateStr = `${monthStr}-${String(day).padStart(2, '0')}`;

                                                                                // 일별 매출 데이터 찾기
                                                                                const dailySale = dailySales.find(sale => sale.date === dateStr);

                                                                                // 툴팁 업데이트
                                                                                const tooltip = document.getElementById('daily-tooltip');
                                                                                if (tooltip) {
                                                                                    tooltip.style.display = 'block';
                                                                                    tooltip.style.left = (e.clientX + 10) + 'px';
                                                                                    tooltip.style.top = (e.clientY - 50) + 'px';

                                                                                    if (dailySale) {
                                                                                        const price = parseInt(dailySale.price) || 0;
                                                                                        tooltip.innerHTML = `
                                                                                            <div class="font-bold text-blue-400">${targetDate.getMonth() + 1}월 ${day}일</div>
                                                                                            <div class="text-green-400">${dailySale.product}</div>
                                                                                            <div class="text-yellow-400 font-semibold">${price.toLocaleString()}원</div>
                                                                                        `;
                                                                                    } else {
                                                                                        tooltip.innerHTML = `
                                                                                            <div class="font-bold text-blue-400">${targetDate.getMonth() + 1}월 ${day}일</div>
                                                                                            <div class="text-gray-400">매출 없음</div>
                                                                                        `;
                                                                                    }
                                                                                }
                                                                            }}
                                                                            onMouseLeave={() => {
                                                                                const tooltip = document.getElementById('daily-tooltip');
                                                                                if (tooltip) {
                                                                                    tooltip.style.display = 'none';
                                                                                }
                                                                            }}
                                                                        >
                                                                            {/* 세로선 */}
                                                                            <div
                                                                                className="absolute pointer-events-none"
                                                                                style={{
                                                                                    left: '50%',
                                                                                    top: '0',
                                                                                    bottom: '0',
                                                                                    borderLeft: '1px dashed #6B7280',
                                                                                    transform: 'translateX(-50%)'
                                                                                }}
                                                                            ></div>

                                                                            {/* 호버시 배경 하이라이트 */}
                                                                            <div className="absolute inset-0 bg-blue-500 opacity-0 group-hover:opacity-10 transition-opacity duration-200"></div>

                                                                            {/* 개선된 호버 툴팁 - 더 명확하고 안정적 */}
                                                                            <div className="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-3 px-4 py-3 bg-gray-900 border border-gray-600 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap z-50 shadow-xl">
                                                                                <div className="font-bold text-blue-300 mb-2 text-center">{month} 매출 현황</div>
                                                                                {categories.map((cat, catIdx) => {
                                                                                    const value = cat.data[index];
                                                                                    return (
                                                                                        <div key={catIdx} className="flex items-center justify-between gap-4 mb-1">
                                                                                            <div className="flex items-center gap-2">
                                                                                                <div
                                                                                                    className="w-3 h-3 rounded-full"
                                                                                                    style={{ backgroundColor: cat.color }}
                                                                                                ></div>
                                                                                                <span className="text-gray-200">{cat.icon} {cat.name}:</span>
                                                                                            </div>
                                                                                            <span className="font-semibold" style={{ color: value > 0 ? cat.color : '#9CA3AF' }}>
                                                                                                {value > 0 ? `${value.toLocaleString()}원` : '0원'}
                                                                                            </span>
                                                                                        </div>
                                                                                    );
                                                                                })}
                                                                                <div className="border-t border-gray-600 mt-2 pt-2 flex justify-between items-center">
                                                                                    <span className="font-bold text-gray-200">월 총 매출:</span>
                                                                                    <span className="font-bold text-yellow-300 text-lg">{monthTotal.toLocaleString()}원</span>
                                                                                </div>
                                                                                {/* 툴팁 화살표 */}
                                                                                <div className="absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"></div>
                                                                            </div>
                                                                        </div>
                                                                    );
                                                                })}

                                                                {/* 데이터 라인과 포인트 - 모든 카테고리를 하나의 SVG에 */}
                                                                <svg
                                                                    className="absolute z-20"
                                                                    style={{
                                                                        left: '20px',
                                                                        top: '20px',
                                                                        width: 'calc(100% - 40px)',
                                                                        height: '280px'
                                                                    }}
                                                                    viewBox="0 0 100 100"
                                                                    preserveAspectRatio="none"
                                                                >
                                                                    {/* 모든 카테고리의 라인 */}
                                                                    {categories.map((category, catIndex) => (
                                                                        <g key={`line-${catIndex}`}>
                                                                            {/* 곡선 라인 */}
                                                                            <polyline
                                                                                points={category.data
                                                                                    .map((value, monthIndex) => {
                                                                                        const x = (monthIndex / (category.data.length - 1)) * 100;
                                                                                        const y = 100 - ((value || 0) / roundedMax) * 100;
                                                                                        return `${x},${y}`;
                                                                                    }).join(' ')}
                                                                                stroke={category.color}
                                                                                strokeWidth="3"
                                                                                fill="none"
                                                                                vectorEffect="non-scaling-stroke"
                                                                                opacity="0.9"
                                                                                strokeLinecap="round"
                                                                                strokeLinejoin="round"
                                                                                style={{ pointerEvents: 'none' }}
                                                                            />

                                                                            {/* 데이터 포인트 - 호버 가능한 원 */}
                                                                            {category.data.map((value, monthIndex) => {
                                                                                if (value >= 0) {
                                                                                    const x = (monthIndex / (category.data.length - 1)) * 100;
                                                                                    const y = 100 - ((value || 0) / roundedMax) * 100;
                                                                                    return (
                                                                                        <g key={`${catIndex}-${monthIndex}`}>
                                                                                            {/* 호버 영역 */}
                                                                                            <circle
                                                                                                cx={x}
                                                                                                cy={y}
                                                                                                r="3"
                                                                                                fill="transparent"
                                                                                                stroke="transparent"
                                                                                                style={{ cursor: 'pointer' }}
                                                                                                onMouseEnter={(e) => {
                                                                                                    const tooltip = document.getElementById('chart-tooltip');
                                                                                                    if (tooltip) {
                                                                                                        tooltip.style.display = 'block';
                                                                                                        tooltip.style.left = (e.clientX + 10) + 'px';
                                                                                                        tooltip.style.top = (e.clientY - 60) + 'px';
                                                                                                        const monthName = months[monthIndex];
                                                                                                        tooltip.innerHTML = `
                                                                                                            <div class="font-bold text-blue-300 mb-1">${monthName} ${category.name}</div>
                                                                                                            <div class="text-lg font-semibold" style="color: ${category.color}">
                                                                                                                ${value.toLocaleString()}원
                                                                                                            </div>
                                                                                                        `;
                                                                                                    }
                                                                                                }}
                                                                                                onMouseLeave={() => {
                                                                                                    const tooltip = document.getElementById('chart-tooltip');
                                                                                                    if (tooltip) {
                                                                                                        tooltip.style.display = 'none';
                                                                                                    }
                                                                                                }}
                                                                                            />
                                                                                            {/* 실제 보이는 데이터 포인트 */}
                                                                                            <circle
                                                                                                cx={x}
                                                                                                cy={y}
                                                                                                r="1.5"
                                                                                                fill={category.color}
                                                                                                stroke="white"
                                                                                                strokeWidth="0.5"
                                                                                                style={{ pointerEvents: 'none' }}
                                                                                            />
                                                                                        </g>
                                                                                    );
                                                                                }
                                                                                return null;
                                                                            })}
                                                                        </g>
                                                                    ))}
                                                                </svg>

                                                                {/* 데이터가 없을 때 안내 메시지 */}
                                                                {allValues.length === 0 && (
                                                                    <div className="absolute inset-0 flex items-center justify-center">
                                                                        <div className="text-center text-gray-400">
                                                                            <div className="text-4xl mb-2">📊</div>
                                                                            <div className="text-lg font-medium">매출 데이터가 없습니다</div>
                                                                            <div className="text-sm mt-1">결제 정보를 입력하면 그래프가 표시됩니다</div>
                                                                        </div>
                                                                    </div>
                                                                )}
                                                            </div>

                                                            {/* X축 라벨 - 세로선과 정확히 정렬 (6등분) */}
                                                            <div className="ml-4 mt-4 relative h-6">
                                                                {months.map((month, index) => (
                                                                    <div
                                                                        key={index}
                                                                        className="absolute text-xs text-gray-400 font-medium transform -translate-x-1/2"
                                                                        style={{
                                                                            left: `calc(${(index * 100) / 6}% + ${(100 / 6) / 2}%)` // 세로선과 동일한 위치
                                                                        }}
                                                                    >
                                                                        {month}
                                                                    </div>
                                                                ))}
                                                            </div>
                                                        </div>

                                                        {/* 기존 툴팁 요소 */}
                                                        <div
                                                            id="daily-tooltip"
                                                            className="absolute z-50 bg-gray-900 text-white p-2 rounded shadow-lg pointer-events-none"
                                                            style={{
                                                                display: 'none',
                                                                fontSize: '12px',
                                                                maxWidth: '200px'
                                                            }}
                                                        ></div>

                                                        {/* 차트 데이터 포인트 전용 툴팁 */}
                                                        <div
                                                            id="chart-tooltip"
                                                            className="absolute z-50 bg-gray-900 border border-gray-600 text-white p-3 rounded-lg shadow-xl pointer-events-none"
                                                            style={{
                                                                display: 'none',
                                                                fontSize: '13px',
                                                                minWidth: '120px'
                                                            }}
                                                        ></div>
                                                    </div>
                                                );
                                            })()}
                                        </div>
                                    </div>
                                </div>

                                {/* 주요 카테고리 매출 비교 */}
                                <div className="glass-effect rounded-2xl p-6">
                                    <h3 className="text-lg font-semibold mb-4 text-gray-300">🎯 주요 카테고리 매출</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                        {(() => {
                                            const categories = [
                                                { name: '헬스', sales: calculateHealthSales(), color: '#10B981', icon: '🏃‍♂️' },
                                                { name: '네오핏', sales: calculateNeoFitSales(), color: '#4ECDC4', icon: '🔥' },
                                                { name: 'PT', sales: calculatePtSales(), color: '#FFD700', icon: '🏋️' },
                                                { name: '필라테스', sales: calculatePilatesSales(), color: '#F472B6', icon: '🧘‍♀️' }
                                            ];

                                            return categories.map((category, index) => {
                                                // 이전 월 대비 성장률 계산 (임시 데이터)
                                                const growth = Math.random() * 40 - 20; // -20% ~ +20%
                                                const isPositive = growth > 0;

                                                return (
                                                    <div key={index} className="glass-effect rounded-xl p-4 hover:scale-105 transition-all duration-300">
                                                        <div className="flex items-center justify-between mb-2">
                                                            <span className="text-sm text-gray-400">{category.icon} {category.name}</span>
                                                            <div className={`flex items-center gap-1 ${isPositive ? 'text-green-400' : 'text-red-400'}`}>
                                                                <span className="text-xs">
                                                                    {isPositive ? '↗' : '↘'} {Math.abs(growth).toFixed(1)}%
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div className="text-lg font-bold" style={{ color: category.color }}>
                                                            {category.sales.toLocaleString()}원
                                                        </div>
                                                        {/* 진행바 */}
                                                        <div className="w-full bg-gray-700 rounded-full h-1.5 mt-2">
                                                            <div
                                                                className="h-1.5 rounded-full transition-all duration-1000"
                                                                style={{
                                                                    width: `${(category.sales / Math.max(...categories.map(c => c.sales))) * 100}%`,
                                                                    backgroundColor: category.color
                                                                }}
                                                            ></div>
                                                        </div>
                                                    </div>
                                                );
                                            });
                                        })()}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* 월간 총계 및 인센티브 */}
                        <div className="gradient-border glow-green">
                            <div className="bg-gradient-to-br from-gray-800/50 to-gray-900/50">
                                <h2 className="text-3xl font-black mb-8 text-center text-white">
                                    월간 급여 계산
                                </h2>
                                
                                {/* 메인 카드 - 월간 총매출 */}
                                <div className="mb-8">
                                    <div className="glass-effect rounded-3xl p-8 text-center hover:scale-105 transition-all duration-300 shadow-2xl relative overflow-hidden">
                                        <div className="absolute inset-0 bg-gradient-to-r from-orange-500/10 to-red-500/10 opacity-50"></div>
                                        <div className="relative z-10">
                                            <p className="text-gray-400 text-lg mb-4 font-semibold">📊 월간 총매출</p>
                                            <p className="text-4xl sm:text-5xl font-black mb-2" style={{
                                                color: '#FF6B35',
                                                textShadow: '0 0 20px rgba(255, 107, 53, 0.6), 0 0 30px rgba(255, 107, 53, 0.4), 0 0 40px rgba(255, 107, 53, 0.2)'
                                            }}>{(monthlyTotal || 0).toLocaleString()}원</p>
                                            <div className="flex justify-center space-x-2 text-sm text-gray-500">
                                                <span>💰 Total Revenue</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* 카테고리별 매출 그리드 */}
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                                    <div className="glass-effect rounded-2xl p-6 hover:scale-105 transition-all duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-400 to-green-500"></div>
                                        <div className="text-center">
                                            <p className="text-gray-400 text-sm mb-3 font-semibold">🏃‍♂️ 헬스 이용권</p>
                                            <p className="text-2xl sm:text-3xl font-black" style={{ color: '#10B981' }}>{calculateHealthSales().toLocaleString()}원</p>
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-2xl p-6 hover:scale-105 transition-all duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-teal-400 to-cyan-500"></div>
                                        <div className="text-center">
                                            <p className="text-gray-400 text-sm mb-3 font-semibold">🔥 네오핏 매출</p>
                                            <p className="text-2xl sm:text-3xl font-black" style={{ color: '#4ECDC4' }}>{calculateNeoFitSales().toLocaleString()}원</p>
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-2xl p-6 hover:scale-105 transition-all duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-400 to-orange-500"></div>
                                        <div className="text-center">
                                            <p className="text-gray-400 text-sm mb-3 font-semibold">🏋️ 1:1 PT 매출</p>
                                            <p className="text-2xl sm:text-3xl font-black" style={{ color: '#FFD700' }}>{calculatePtSales().toLocaleString()}원</p>
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-2xl p-6 hover:scale-105 transition-all duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 to-rose-500"></div>
                                        <div className="text-center">
                                            <p className="text-gray-400 text-sm mb-3 font-semibold">🧘‍♀️ 필라테스 매출</p>
                                            <p className="text-2xl sm:text-3xl font-black" style={{ color: '#F472B6' }}>{calculatePilatesSales().toLocaleString()}원</p>
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-2xl p-6 hover:scale-105 transition-all duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 to-indigo-500"></div>
                                        <div className="text-center">
                                            <p className="text-gray-400 text-sm mb-3 font-semibold">👕 운동복/락커</p>
                                            <p className="text-2xl sm:text-3xl font-black" style={{ color: '#A855F7' }}>{calculateClothingLockerSales().toLocaleString()}원</p>
                                        </div>
                                    </div>

                                    <div className="glass-effect rounded-2xl p-6 hover:scale-105 transition-all duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-gray-400 to-slate-500"></div>
                                        <div className="text-center">
                                            <p className="text-gray-400 text-sm mb-3 font-semibold">📊 기타 매출</p>
                                            <p className="text-2xl sm:text-3xl font-black" style={{ color: '#9CA3AF' }}>{calculateOtherSales().toLocaleString()}원</p>
                                        </div>
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 text-center mb-6 sm:mb-8">
                                    <div className="glass-effect rounded-2xl p-4 sm:p-6 hover:scale-105 transition-all duration-300">
                                        <p className="text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 font-semibold">인센티브율 ({employeeType === 'full' ? '정직원' : '파트타임'})</p>
                                        <p className="text-2xl sm:text-3xl font-black" style={{ color: '#00C6FF' }}>{incentiveRate || 0}%</p>
                                    </div>

                                    <div className="glass-effect rounded-2xl p-4 sm:p-6 hover:scale-105 transition-all duration-300">
                                        <p className="text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 font-semibold">인센티브 금액</p>
                                        <p className="text-2xl sm:text-3xl font-black" style={{ color: '#00FF88' }}>
                                            {Math.floor(incentiveAmount || 0).toLocaleString()}원
                                        </p>
                                    </div>
                                </div>

                                {/* 인센티브 기준표 */}
                                <div className="glass-effect rounded-2xl p-6">
                                    <p className="text-lg font-bold text-center mb-4 text-gray-300">
                                        인센티브 기준표 ({employeeType === 'full' ? '정직원' : '파트타임'})
                                    </p>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 text-xs text-center">
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">2,500만원 미만</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#FF6B6B' }}>{employeeType === 'full' ? '4%' : '2%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">2,500만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#FF9F40' }}>{employeeType === 'full' ? '5%' : '2.5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">3,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#FFD93D' }}>{employeeType === 'full' ? '6%' : '3%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">3,500만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#6BCF7F' }}>{employeeType === 'full' ? '7%' : '3.5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">4,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#4ECDC4' }}>{employeeType === 'full' ? '8%' : '4%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">4,500만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#45B7D1' }}>{employeeType === 'full' ? '9%' : '4.5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">5,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#5D5FEF' }}>{employeeType === 'full' ? '10%' : '5%'}</p>
                                        </div>
                                        <div className="glass-effect rounded-xl p-2 sm:p-3 hover:scale-105 transition-all">
                                            <p className="text-gray-400 mb-1 text-xs">6,000만원 이상</p>
                                            <p className="font-bold text-base sm:text-lg" style={{ color: '#A55FEB' }}>{employeeType === 'full' ? '12%' : '6%'}</p>
                                        </div>
                                    </div>
                                    
                                    {/* 정직원/파트타임 비교표 */}
                                    <div className="mt-6 glass-effect rounded-2xl p-6">
                                        <p className="text-lg font-bold mb-4 text-center">현재 매출 기준 인센티브 비교</p>
                                        <div className="grid grid-cols-2 gap-4 text-center">
                                            <div 
                                                className={`rounded-xl p-4 cursor-pointer transition-all duration-300 ${
                                                    employeeType === 'full' 
                                                        ? 'scale-105 shadow-lg text-white' 
                                                        : 'glass-effect hover:scale-105 hover:border-gray-400'
                                                }`}
                                                style={employeeType === 'full' ? { 
                                                    backgroundColor: '#0a4a2c', 
                                                    border: '2px solid #00FF88',
                                                    boxShadow: '0 0 20px rgba(0, 255, 136, 0.6), inset 0 0 20px rgba(0, 255, 136, 0.2)'
                                                } : {}}
                                                onClick={() => setEmployeeType('full')}
                                            >
                                                <p className={`text-sm font-semibold mb-2 ${employeeType === 'full' ? 'text-green-400' : ''}`}>정직원</p>
                                                <p className={`font-black text-2xl mb-2 ${employeeType === 'full' ? 'text-green-400' : ''}`} style={employeeType === 'full' ? { textShadow: '0 0 10px rgba(0, 255, 136, 0.8)' } : {}}>{getIncentiveRate(monthlyTotal, 'full')}%</p>
                                                <p className={`text-sm ${employeeType === 'full' ? 'text-green-400' : 'opacity-80'}`}>
                                                    {Math.floor((monthlyTotal || 0) * (getIncentiveRate(monthlyTotal, 'full') / 100)).toLocaleString()}원
                                                </p>
                                            </div>
                                            <div 
                                                className={`rounded-xl p-4 cursor-pointer transition-all duration-300 ${
                                                    employeeType === 'part' 
                                                        ? 'scale-105 shadow-lg text-white' 
                                                        : 'glass-effect hover:scale-105 hover:border-gray-400'
                                                }`}
                                                style={employeeType === 'part' ? { 
                                                    backgroundColor: '#0a4a2c', 
                                                    border: '2px solid #00FF88',
                                                    boxShadow: '0 0 20px rgba(0, 255, 136, 0.6), inset 0 0 20px rgba(0, 255, 136, 0.2)'
                                                } : {}}
                                                onClick={() => setEmployeeType('part')}
                                            >
                                                <p className={`text-sm font-semibold mb-2 ${employeeType === 'part' ? 'text-green-400' : ''}`}>파트타임</p>
                                                <p className={`font-black text-2xl mb-2 ${employeeType === 'part' ? 'text-green-400' : ''}`} style={employeeType === 'part' ? { textShadow: '0 0 10px rgba(0, 255, 136, 0.8)' } : {}}>{getIncentiveRate(monthlyTotal, 'part')}%</p>
                                                <p className={`text-sm ${employeeType === 'part' ? 'text-green-400' : 'opacity-80'}`}>
                                                    {Math.floor((monthlyTotal || 0) * (getIncentiveRate(monthlyTotal, 'part') / 100)).toLocaleString()}원
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<NeoFitPayCalc />);
    </script>
    
    <script>
        // optgroup 네온 효과 적용을 위한 스크립트
        function applyNeonEffectToOptgroups() {
            const optgroups = document.querySelectorAll('select optgroup');
            optgroups.forEach(optgroup => {
                // 인라인 스타일로 직접 적용
                optgroup.style.color = '#00FF88';
                optgroup.style.fontWeight = 'bold';
                optgroup.style.textShadow = '0 0 10px #00FF88, 0 0 20px #00FF88, 0 0 30px #00FF88';
                optgroup.style.backgroundColor = 'rgba(0, 255, 136, 0.1)';
                optgroup.style.display = 'block';
                optgroup.style.padding = '8px';
                optgroup.style.margin = '4px 0';
            });
        }
        
        // DOM이 로드된 후 실행
        document.addEventListener('DOMContentLoaded', applyNeonEffectToOptgroups);
        
        // React 렌더링 후에도 실행 (동적으로 생성되는 요소를 위해)
        setTimeout(applyNeonEffectToOptgroups, 1000);
        
        // 모달이 열릴 때마다 적용
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.addedNodes.length) {
                    applyNeonEffectToOptgroups();
                }
            });
        });
        
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    </script>
</body>
</html>
